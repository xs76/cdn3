window.__require=function t(e,o,a){function i(c,r){if(!o[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!r&&l)return l(s,!0);if(n)return n(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var u=o[c]={exports:{}};e[c][0].call(u.exports,function(t){return i(e[c][1][t]||t)},u,u.exports,t,e,o,a)}return o[c].exports}for(var n="function"==typeof __require&&__require,c=0;c<a.length;c++)i(a[c]);return i}({AdManageTools:[function(t,e,o){"use strict";cc._RF.push(e,"2b6d2fJ/mhMAqeLBKWTSolk","AdManageTools"),Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../GD/GDADMgr"),i=function(){function t(){}return t.prototype.initBanner=function(){cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative?jsb.reflection.callStaticMethod("Mopub","showBannerAd:",""):cc.sys.os!=cc.sys.OS_ANDROID&&cc.sys.os!=cc.sys.OS_LINUX||!cc.sys.isNative?app.facebook.isFbi()?app.facebook.initBannerAd():a.gdAdMgr.isGD()&&a.gdAdMgr.showBanner():window.SDKTools._hideBanner||jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AppHelper","showBannerAd","()V")},t.prototype.hideBanner=function(){cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative?jsb.reflection.callStaticMethod("Mopub","hideBannerAd:",""):cc.sys.os!=cc.sys.OS_ANDROID&&cc.sys.os!=cc.sys.OS_LINUX||!cc.sys.isNative?app.facebook.isFbi()?app.facebook.hideBannerAd():a.gdAdMgr.isGD()&&a.gdAdMgr.hideBanner():jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AppHelper","hideBannerAd","()V")},t.prototype.showInterstitialAd=function(){cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative?jsb.reflection.callStaticMethod("Mopub","showInterstitialAd:",""):cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative?(jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AppHelper","showIntenerAd","()V"),window.SDKTools._interOpenNum=0):a.gdAdMgr.isGD()?a.gdAdMgr.showInterstitial():app.facebook.isFbi()&&(app.facebook.showInterstitialAd(),window.SDKTools._interOpenNum=0),cfg.const.isGameBackByAdb=!0;var t=app.Utils.getStringFromLocal("first_open_intenerAd");t&&""!=t||(app.LogEvent.showLogEventWithName("first_show_intenerAd"),app.Utils.saveStringToLocal("first_open_intenerAd",1))},t.prototype.showRewardedAd=function(){cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative?jsb.reflection.callStaticMethod("Mopub","showRewardedAd:","SDKTools.onRewardedAd"):cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AppHelper","showRewardedAd","(Ljava/lang/String;)V","SDKTools.onRewardedAd"):a.gdAdMgr.isGD()?a.gdAdMgr.showRewardAD():app.facebook.isFbi()&&app.facebook.showRewardedVideoAd("rewardedAd"),cfg.const.isGameBackByAdb=!0;var t=app.Utils.getStringFromLocal("first_open_rewardAd");t&&""!=t||(app.LogEvent.showLogEventWithName("first_open_rewardAd"),app.Utils.saveStringToLocal("first_open_rewardAd",1))},t.prototype.showChallengeRewardedAd=function(){cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative?jsb.reflection.callStaticMethod("Mopub","showRewardedAd:","SDKTools.onChallengeRewardedAd"):cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AppHelper","showRewardedAd","(Ljava/lang/String;)V","SDKTools.onChallengeRewardedAd"):app.facebook.isFbi()&&app.facebook.showRewardedVideoAd("challenge_rewardedAd"),cfg.const.isGameBackByAdb=!0},t.prototype.showGetRotateRewardedAd=function(){cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative?jsb.reflection.callStaticMethod("Mopub","showRewardedAd:","SDKTools.onGetRotateRewardedAd"):cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AppHelper","showRewardedAd","(Ljava/lang/String;)V","SDKTools.onGetRotateRewardedAd"):app.facebook.isFbi()&&app.facebook.showRewardedVideoAd("rotate_rewardedAd"),cfg.const.isGameBackByAdb=!0},t.prototype.onHideLogo=function(){cc.sys.os!=cc.sys.OS_ANDROID&&cc.sys.os!=cc.sys.OS_LINUX||!cc.sys.isNative||jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","onHideLogo","()V")},t.prototype.onBackPressed=function(){cc.sys.os!=cc.sys.OS_ANDROID&&cc.sys.os!=cc.sys.OS_LINUX||!cc.sys.isNative||jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","onOtherBackPressed","()V")},t.prototype.getConfigData=function(){cc.sys.os!=cc.sys.OS_ANDROID&&cc.sys.os!=cc.sys.OS_LINUX||!cc.sys.isNative||(jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getConfigData","()V"),cfg.const.apk_name=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getApkPackageName","()Ljava/lang/String;"))},t.prototype.getLanguageValue=function(){if(cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative)return jsb.reflection.callStaticMethod("RemoteConifgHelper","getLocalLanguageValue:","(Ljava/lang/String;)V")},t.isIos=function(){if(cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative)return!0},t.prototype.isConnectIsNomarl=function(){cfg.const.isConnectIsNomarl=cc.sys.getNetworkType(),cfg.const.isConnectIsNomarl==cc.sys.NetworkType.LAN?cfg.const.isConnectIsNomarl="1":cfg.const.isConnectIsNomarl="0"},t.prototype.showReview=function(){cc.sys.os!=cc.sys.OS_ANDROID&&cc.sys.os!=cc.sys.OS_LINUX||!cc.sys.isNative||jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","review","()V")},t.prototype.setBrighnessMax=function(t){cc.sys.os!=cc.sys.OS_ANDROID&&cc.sys.os!=cc.sys.OS_LINUX||!cc.sys.isNative?cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative&&jsb.reflection.callStaticMethod("RemoteConifgHelper","setUIBrightness:",t):jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AppHelper","setBrighnessMax","(Ljava/lang/String;)V",t)},t.prototype.moveTaskToBack=function(){cc.sys.os!=cc.sys.OS_ANDROID&&cc.sys.os!=cc.sys.OS_LINUX||!cc.sys.isNative||jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","moveTaskToBack","()V")},t.prototype.setVibrator=function(t){void 0===t&&(t=1e3),cc.sys.os!=cc.sys.OS_ANDROID&&cc.sys.os!=cc.sys.OS_LINUX||!cc.sys.isNative?cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative&&jsb.reflection.callStaticMethod("RemoteConifgHelper","setVibrator:","1000"):jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AppHelper","setVibrator","()V")},t.prototype.getHasInter=function(){return cc.sys.os!=cc.sys.OS_ANDROID&&cc.sys.os!=cc.sys.OS_LINUX||!cc.sys.isNative?cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative?jsb.reflection.callStaticMethod("Mopub","getInterIsReady:",""):app.facebook.isFbi()?app.facebook.hasInterstitialAd():void 0:"1"==jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppHelper","isLoadInterSuccess","()Ljava/lang/String;")},t}();o.default=i,cc._RF.pop()},{"../../GD/GDADMgr":"GDADMgr"}],AudioCpn:[function(t,e,o){"use strict";cc._RF.push(e,"1a950bAA/lGCKSDHC6fJ/Mt","AudioCpn"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function t(){}return t.prototype.playSound=function(t){if(this.otherVolume=cfg.const.soundVolume,!(this.otherVolume<=0))switch(cc.audioEngine.setEffectsVolume(.5),t){case"BGM":break;case"button":cc.audioEngine.playEffect(app.res.loadAudio(cfg.res.audio.button),!1);break;case"select":cc.audioEngine.playEffect(app.res.loadAudio(cfg.res.audio.select),!1);break;case"place":cc.audioEngine.playEffect(app.res.loadAudio(cfg.res.audio.place),!1);break;case"clear":cc.audioEngine.playEffect(app.res.loadAudio(cfg.res.audio.clear),!1);break;case"win_game":cc.audioEngine.playEffect(app.res.loadAudio(cfg.res.audio.win_game),!1)}},t.prototype.stopSound=function(){cc.audioEngine.stop(this.bgmSound)},t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.instance=null,t}();o.default=a,cc._RF.pop()},{}],BlockPuzzleAITools:[function(t,e,o){"use strict";cc._RF.push(e,"8f092wOpmtLtbQWt1PAT5wK","BlockPuzzleAITools"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function t(){this.cubeType_index_1=new Array,this.cubeType_index_2=new Array,this.cubeType_index_3=new Array,this.cubeType_index_4=new Array,this.nowScore=0,this.isNeedStartRuler=!1,this.game_difficulty=null}return t.prototype.initCubeStackType=function(){this.cubeType_index_1=new Array,this.cubeType_index_2=new Array,this.cubeType_index_3=new Array,this.cubeType_index_4=new Array,this.game_difficulty={1:{200:{gameScore:200,onePro:70,twoPro:30,threePro:0,fourPro:0,nedStartRuler:!0},500:{gameScore:500,onePro:70,twoPro:30,threePro:0,fourPro:0,nedStartRuler:!0},700:{gameScore:700,onePro:60,twoPro:35,threePro:5,fourPro:0,nedStartRuler:!0},1e3:{gameScore:1e3,onePro:60,twoPro:35,threePro:5,fourPro:0,nedStartRuler:!0},1500:{gameScore:1500,onePro:50,twoPro:40,threePro:10,fourPro:0,nedStartRuler:!0},2e3:{gameScore:2e3,onePro:40,twoPro:40,threePro:15,fourPro:5,nedStartRuler:!0},2001:{gameScore:999999999,onePro:40,twoPro:30,threePro:20,fourPro:10,nedStartRuler:!1}},2:{200:{gameScore:200,onePro:70,twoPro:30,threePro:0,fourPro:0,nedStartRuler:!0},500:{gameScore:500,onePro:70,twoPro:30,threePro:0,fourPro:0,nedStartRuler:!0},700:{gameScore:700,onePro:60,twoPro:35,threePro:5,fourPro:0,nedStartRuler:!0},1e3:{gameScore:1e3,onePro:50,twoPro:40,threePro:10,fourPro:0,nedStartRuler:!0},1500:{gameScore:1500,onePro:40,twoPro:40,threePro:15,fourPro:5,nedStartRuler:!0},2e3:{gameScore:2e3,onePro:40,twoPro:30,threePro:20,fourPro:10,nedStartRuler:!1},2001:{gameScore:999999999,onePro:40,twoPro:30,threePro:20,fourPro:10,nedStartRuler:!1}},3:{200:{gameScore:200,onePro:70,twoPro:30,threePro:0,fourPro:0,nedStartRuler:!0},500:{gameScore:500,onePro:60,twoPro:35,threePro:5,fourPro:0,nedStartRuler:!0},700:{gameScore:700,onePro:50,twoPro:40,threePro:10,fourPro:0,nedStartRuler:!0},1e3:{gameScore:1e3,onePro:40,twoPro:40,threePro:15,fourPro:5,nedStartRuler:!0},1500:{gameScore:1500,onePro:40,twoPro:30,threePro:20,fourPro:10,nedStartRuler:!0},2e3:{gameScore:2e3,onePro:40,twoPro:30,threePro:20,fourPro:10,nedStartRuler:!1},2001:{gameScore:999999999,onePro:40,twoPro:30,threePro:20,fourPro:10,nedStartRuler:!1}},4:{200:{gameScore:200,onePro:60,twoPro:40,threePro:0,fourPro:0,nedStartRuler:!0},500:{gameScore:500,onePro:50,twoPro:45,threePro:5,fourPro:0,nedStartRuler:!0},700:{gameScore:700,onePro:40,twoPro:50,threePro:10,fourPro:0,nedStartRuler:!0},1e3:{gameScore:1e3,onePro:40,twoPro:40,threePro:20,fourPro:0,nedStartRuler:!1},1500:{gameScore:1500,onePro:40,twoPro:30,threePro:20,fourPro:10,nedStartRuler:!1},2e3:{gameScore:2e3,onePro:40,twoPro:30,threePro:20,fourPro:10,nedStartRuler:!1},2001:{gameScore:999999999,onePro:40,twoPro:30,threePro:20,fourPro:10,nedStartRuler:!1}},5:{200:{gameScore:200,onePro:50,twoPro:50,threePro:0,fourPro:0,nedStartRuler:!0},500:{gameScore:500,onePro:40,twoPro:50,threePro:10,fourPro:0,nedStartRuler:!0},700:{gameScore:700,onePro:40,twoPro:40,threePro:20,fourPro:0,nedStartRuler:!1},1e3:{gameScore:1e3,onePro:40,twoPro:30,threePro:20,fourPro:10,nedStartRuler:!1},1500:{gameScore:1500,onePro:40,twoPro:30,threePro:20,fourPro:10,nedStartRuler:!1},2e3:{gameScore:2e3,onePro:40,twoPro:30,threePro:20,fourPro:10,nedStartRuler:!1},2001:{gameScore:999999999,onePro:40,twoPro:30,threePro:20,fourPro:10,nedStartRuler:!1}}};for(var t=0;t<=46;t++)35!=t&&45!=t&&46!=t&&31!=t&&35!=t&&45!=t&&46!=t&&31!=t&&(9==cfg.const.gameRowNum&&31==t||this["cubeType_index_"+app.map.getMapData(t).cubeType].push(t))},t.prototype.getCubeStackAIRuler=function(t,e,o){var a=[];this.nowScore=e,this.isNeedStartRuler=o;var i={1:{200:{gameScore:200,onePro:30,twoPro:30,threePro:30,fourPro:10,nedStartRuler:!0},500:{gameScore:500,onePro:30,twoPro:30,threePro:20,fourPro:20,nedStartRuler:!0},700:{gameScore:700,onePro:20,twoPro:30,threePro:30,fourPro:20,nedStartRuler:!1},1e3:{gameScore:1e3,onePro:20,twoPro:20,threePro:30,fourPro:30,nedStartRuler:!1},1500:{gameScore:1500,onePro:20,twoPro:20,threePro:30,fourPro:30,nedStartRuler:!1},1501:{gameScore:999999999,onePro:20,twoPro:20,threePro:30,fourPro:30,nedStartRuler:!1}},2:{200:{gameScore:200,onePro:30,twoPro:40,threePro:20,fourPro:10,nedStartRuler:!0},500:{gameScore:500,onePro:30,twoPro:30,threePro:30,fourPro:10,nedStartRuler:!0},700:{gameScore:700,onePro:30,twoPro:30,threePro:20,fourPro:20,nedStartRuler:!1},1e3:{gameScore:1e3,onePro:20,twoPro:30,threePro:30,fourPro:20,nedStartRuler:!1},1500:{gameScore:1500,onePro:20,twoPro:20,threePro:30,fourPro:30,nedStartRuler:!1},1501:{gameScore:999999999,onePro:20,twoPro:20,threePro:30,fourPro:30,nedStartRuler:!1}},3:{200:{gameScore:200,onePro:40,twoPro:30,threePro:20,fourPro:10,nedStartRuler:!0},500:{gameScore:500,onePro:40,twoPro:30,threePro:20,fourPro:10,nedStartRuler:!0},700:{gameScore:700,onePro:30,twoPro:30,threePro:30,fourPro:10,nedStartRuler:!0},1e3:{gameScore:1e3,onePro:30,twoPro:30,threePro:30,fourPro:10,nedStartRuler:!0},1500:{gameScore:1500,onePro:20,twoPro:30,threePro:30,fourPro:20,nedStartRuler:!0},1501:{gameScore:999999999,onePro:20,twoPro:20,threePro:30,fourPro:30,nedStartRuler:!1}}};9==cfg.const.gameRowNum&&(i={1:{200:{gameScore:200,onePro:50,twoPro:50,threePro:0,fourPro:0,nedStartRuler:!0},500:{gameScore:500,onePro:40,twoPro:50,threePro:10,fourPro:0,nedStartRuler:!0},700:{gameScore:700,onePro:40,twoPro:40,threePro:20,fourPro:0,nedStartRuler:!1},1e3:{gameScore:1e3,onePro:40,twoPro:30,threePro:20,fourPro:10,nedStartRuler:!1},1500:{gameScore:1500,onePro:40,twoPro:30,threePro:20,fourPro:10,nedStartRuler:!1},1501:{gameScore:999999999,onePro:40,twoPro:30,threePro:20,fourPro:10,nedStartRuler:!1}},2:{200:{gameScore:200,onePro:60,twoPro:40,threePro:0,fourPro:0,nedStartRuler:!0},500:{gameScore:500,onePro:50,twoPro:45,threePro:5,fourPro:0,nedStartRuler:!0},700:{gameScore:700,onePro:40,twoPro:50,threePro:10,fourPro:0,nedStartRuler:!1},1e3:{gameScore:1e3,onePro:40,twoPro:40,threePro:20,fourPro:0,nedStartRuler:!1},1500:{gameScore:1500,onePro:40,twoPro:30,threePro:20,fourPro:10,nedStartRuler:!1},1501:{gameScore:999999999,onePro:40,twoPro:30,threePro:20,fourPro:10,nedStartRuler:!1}},3:{200:{gameScore:200,onePro:70,twoPro:30,threePro:0,fourPro:0,nedStartRuler:!0},500:{gameScore:500,onePro:60,twoPro:35,threePro:5,fourPro:0,nedStartRuler:!0},700:{gameScore:700,onePro:50,twoPro:40,threePro:10,fourPro:0,nedStartRuler:!0},1e3:{gameScore:1e3,onePro:40,twoPro:40,threePro:20,fourPro:0,nedStartRuler:!0},1500:{gameScore:1500,onePro:40,twoPro:35,threePro:20,fourPro:5,nedStartRuler:!0},1501:{gameScore:999999999,onePro:40,twoPro:30,threePro:20,fourPro:10,nedStartRuler:!1}}});var n=null;for(var c in n=i[t],t>3&&(n=this.game_difficulty[cfg.const.game_diff]),n)if(this.nowScore<n[c].gameScore){var r=n[c],s=r.nedStartRuler;return this.isNeedStartRuler||(s=!1),this.getAllRandomCubeStack(r.onePro,r.twoPro,r.threePro,s)}return a},t.prototype.getAllRandomCubeStack=function(t,e,o,a){void 0===a&&(a=!1);for(var i=[0,0,0];i[0]==i[1]||i[0]==i[2]||i[1]==i[2];){i=[];for(var n=0;n<3;n++){var c=app.Utils.random(0,99),r=t,s=e,l=o;a&&(r=t,s=100-t);var u=0;if(c<r){var h=app.Utils.random(0,this.cubeType_index_1.length-1);u=this.cubeType_index_1[h],i.push(u)}else c<r+s?(h=app.Utils.random(0,this.cubeType_index_2.length-1),u=this.cubeType_index_2[h],i.push(u)):c<r+s+l?(h=app.Utils.random(0,this.cubeType_index_3.length-1),u=this.cubeType_index_3[h],i.push(u)):(h=app.Utils.random(0,this.cubeType_index_4.length-1),u=this.cubeType_index_4[h],i.push(u))}}return i},t}();o.default=a,cc._RF.pop()},{}],BlockPuzzleCubeStackTools:[function(t,e,o){"use strict";cc._RF.push(e,"247b8/afKdHuLcpQypcF7B3","BlockPuzzleCubeStackTools"),Object.defineProperty(o,"__esModule",{value:!0});var a=t("../prefabs/CubeStack"),i=t("./BlockPuzzleRulerTools"),n=t("./newBlockStyleAITools"),c=function(){function t(){this.lastGameRemoveCubeStack=[],this.cubeStackNum=0,this.saveAllCubeStack=null,this.blockRulerTools=null,this.saveCubeStack=null,this.nextCubeStack=null,this._allCubeStack=null,this.allCubeStackId=new Array}return Object.defineProperty(t.prototype,"allCubeStack",{get:function(){return this._allCubeStack},set:function(t){this._allCubeStack=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_lastGameRemoveCubeStack",{get:function(){return this.lastGameRemoveCubeStack||(this.lastGameRemoveCubeStack=[]),this.lastGameRemoveCubeStack},set:function(t){this.lastGameRemoveCubeStack=t},enumerable:!1,configurable:!0}),t.prototype.cleanData=function(){delete this.lastGameRemoveCubeStack,delete this.saveAllCubeStack},t.prototype.restartGame=function(){this.lastGameRemoveCubeStack=new Array,this.loadJonsByAllThreeArr=new Array,this.randomCubeStack(null,!1),this.hasSaveCubeStack=!1},t.prototype.initLastGameCubeStack=function(t){this.lastGameRemoveCubeStack=t.removeCubeStackArr;var e=t.fileData;this.loadJonsByAllThreeArr=e,this.lastGameRemoveCubeStack||(this.lastGameRemoveCubeStack=[]),this.randomCubeStack(null,!0)},t.prototype.initSaveCubeStackData=function(t){t.removeAllChildren();var e=app.res.loadPrefab(cfg.res.prefabs.cubeStack),o=cc.instantiate(e),i=o.getComponent(a.default);o.parent=t,i.node.active=!1,o.x=0,o.y=0,this.saveCubeStackData=i,this.hasSaveCubeStack=!1},t.prototype.updateSaveCubeStack=function(t,e){if(!this.hasSaveCubeStack){this.saveCubeStackData.hideAll(),this.saveCubeStackData.init(t,!1,e),this.saveCubeStackData.setActive(!0),this.saveCubeStackData.canClick=!0,this.saveCubeStackData.node.active=!0,this.hasSaveCubeStack=!0;var o={id:this.saveCubeStackData.cubeStack_id,spriteFrame:this.saveCubeStackData.spriteFrame};this.saveTempCubeStackData=o}},t.prototype.removeSaveCubeStack=function(){this.saveCubeStackData.setActive(!1),this.saveCubeStackData.canClick=!1,this.hasSaveCubeStack=!1},t.prototype.saveCubeStackDataByIdAndSpr=function(){var t={hasSaveCubeStack:this.hasSaveCubeStack,id:0,spriteFrame:null};this.hasSaveCubeStack&&(t={hasSaveCubeStack:this.hasSaveCubeStack,id:this.saveCubeStackData.cubeStack_id,spriteFrame:this.saveCubeStackData.spriteFrame},this.saveCubeStackData.isRotateState&&(t={hasSaveCubeStack:this.hasSaveCubeStack,id:this.saveTempCubeStackData.id,spriteFrame:this.saveTempCubeStackData.spriteFrame})),window.app.Utils.saveStringToLocal("saveCubeStackData",JSON.stringify(t))},t.prototype.randomCubeStack=function(t,e){void 0===t&&(t=null),void 0===e&&(e=!1),this.cubeStackNum=cfg.const.createNum,this.saveAllCubeStack=new Array;var o=["block_0","block_1","block_2","block_3","block_4","block_5"];if(!t){var a=app.Utils.getStringFromLocal("nowGameCount");a=a&&""!=a?parseInt(a):1,this.blockAiTools=new n.default,this.blockAiTools.initCubeStackType(),t=this.blockAiTools.getCubeStackAIRuler(1,0)}for(var i=0;i<cfg.const.createNum;i++){this._allCubeStack[i].hideAll();var c=t[i];if(e&&this.loadJonsByAllThreeArr&&this.loadJonsByAllThreeArr.length)c=this.loadJonsByAllThreeArr[i].id,this._allCubeStack[i].init(c,!1,this.loadJonsByAllThreeArr[i].spriteFrame),this._allCubeStack[i].setActive(!0),this._allCubeStack[i].canClick=!0;else{var r=o[app.Utils.random(0,o.length-1)];this._allCubeStack[i].init(c,!1,r),this._allCubeStack[i].setActive(!0),this._allCubeStack[i].canClick=!0,o.splice(o.indexOf(r),1)}this._allCubeStack[i].setCubeStackIndex(i);var s={id:c,spriteFrame:this._allCubeStack[i].spriteFrame,index:i};for(var l in this.saveAllCubeStack.push(s),this.lastGameRemoveCubeStack)this.lastGameRemoveCubeStack[l]==i&&(this.cubeStackNum--,this._allCubeStack[i].setActive(!1),this._allCubeStack[i].setDeath(),this._allCubeStack[i].canClick=!1)}app.event.dispatch(cfg.event.CHECK_GAME_OVER,!0)},t.prototype.hasLongCubeStack=function(){for(var t=!1,e=0;e<this.allCubeStackId.length;e++)33!=this.allCubeStackId[e]&&34!=this.allCubeStackId[e]&&3!=this.allCubeStackId[e]&&4!=this.allCubeStackId[e]||(t=!0);return t},t.prototype.getTrtruthCubeId=function(){for(var t=[],e=this.hasLongCubeStack(),o=0;o<=46;o++){var a=!0;35!=o&&45!=o&&46!=o&&31!=o&&35!=o&&45!=o&&46!=o||(a=!1),e&&(3!=o&&4!=o&&33!=o&&34!=o||(a=!1)),a&&t.push(o)}return t[app.Utils.random(0,t.length-1)]},t.prototype.getNextCubeStack=function(t,e){void 0===t&&(t=-1),void 0===e&&(e=null);var o=this.getTrtruthCubeId();e&&-1!=t?(o=t,this.nextCubeStack.init(t,!1,e)):this.nextCubeStack.init(o),this.nextCubeStack.setActive(!0),this.nextCubeStack.canClick=!1,this.nextCubeStack.node.x=0,this.nextCubeStack.node.y=0,this.nextCubeStack.node.scale=.8,this.saveNextCubeStack_id=o,this.saveNextCubeStack_spriteFrame=this.nextCubeStack.spriteFrame,3!=o&&4!=o&&33!=o&&34!=o||(this.nextCubeStack.node.scale=.6)},t.prototype.getItemCubeStack=function(t,e){var o=this.getTrtruthCubeId();e&&(o=e);var a=this.getOtherSpriteFrame();return t.init(o,!1,a),t.setActive(!0),t.canClick=!1,t.node.x=0,t.node.y=0,t.node.scale=.8,this.temp_id=o,this.temp_spriteFrame=t.spriteFrame,3!=o&&4!=o&&33!=o&&34!=o||(t.node.scale=.6),t},t.prototype.getOtherSpriteFrame=function(){for(var t=[],e=0;e<=4;e++){var o="block_"+e;o!=this.allSpriteFrameArr[0]&&o!=this.allSpriteFrameArr[1]&&o!=this.allSpriteFrameArr[2]&&o!=this.allSpriteFrameArr[3]&&t.push(o)}return t[app.Utils.random(0,t.length-1)]},t.prototype.moveCubeStackAction=function(t,e){var o=this,a=this._allCubeStack[1].node.x,i=this._allCubeStack[2].node.x,n=this._allCubeStack[1].cubeStack_id,c=this._allCubeStack[2].cubeStack_id,r=this._allCubeStack[1].spriteFrame,s=this._allCubeStack[2].spriteFrame;this.allSpriteFrameArr=[],this.allSpriteFrameArr.push(this._allCubeStack[0].spriteFrame),this.allSpriteFrameArr.push(this._allCubeStack[1].spriteFrame),this.allSpriteFrameArr.push(this._allCubeStack[2].spriteFrame),this.allSpriteFrameArr.push(this.saveNextCubeStack_spriteFrame),this.allCubeStackId=[],this.allCubeStackId.push(this._allCubeStack[0].cubeStack_id),this.allCubeStackId.push(this._allCubeStack[1].cubeStack_id),this.allCubeStackId.push(this._allCubeStack[2].cubeStack_id),this.allCubeStackId.push(this.saveNextCubeStack_id);var l=this._allCubeStack[1].canClick,u=this._allCubeStack[2].canClick;0==t?(this._allCubeStack[1].node.stopAllActions(),cc.tween(this._allCubeStack[1].node).by(.1,{x:-160}).call(function(){o._allCubeStack[1].node.x=a,o._allCubeStack[0].init(n,!1,r),o._allCubeStack[0].setActive(!0),o._allCubeStack[0].canClick=l,o._allCubeStack[0].changeAlpha(l)}).start(),this._allCubeStack[2].node.stopAllActions(),cc.tween(this._allCubeStack[2].node).by(.1,{x:-160}).call(function(){o._allCubeStack[2].node.x=i,o._allCubeStack[1].init(c,!1,s),o._allCubeStack[1].setActive(!0),o._allCubeStack[1].canClick=u,o._allCubeStack[1].changeAlpha(u)}).start()):1==t&&(this._allCubeStack[2].node.stopAllActions(),cc.tween(this._allCubeStack[2].node).by(.1,{x:-160}).call(function(){o._allCubeStack[2].node.x=i,o._allCubeStack[1].init(c,!1,s),o._allCubeStack[1].setActive(!0),o._allCubeStack[1].canClick=u,o._allCubeStack[1].changeAlpha(u)}).start());var h=this.nextCubeStack.node.x-160;cc.tween(this.nextCubeStack.node).to(.1,{x:h,scale:.8}).call(function(){o.nextCubeStack.node.x=1100,o.nextCubeStack.node.y=0,o._allCubeStack[2].init(o.saveNextCubeStack_id,!1,o.saveNextCubeStack_spriteFrame),o._allCubeStack[2].setActive(!0),o._allCubeStack[2].canClick=!0,o._allCubeStack[2].node.x=i}).start(),this.getItemCubeStack(this.temp_CubeStack,e),this.temp_CubeStack.node.x=300,this.temp_CubeStack.node.y=-200,cc.tween(this.temp_CubeStack.node).by(.1,{x:-300,y:200}).delay(.1).call(function(){o.nextCubeStack.node.x=0,o.nextCubeStack.node.y=0,o.temp_CubeStack.node.x=300,o.temp_CubeStack.node.y=-200,o.getNextCubeStack(o.temp_id,o.temp_spriteFrame),o.saveAllCubeStackBySprite(),app.event.dispatch(cfg.event.CHECK_GAME_OVER)}).start()},t.prototype.updateCubeStack=function(){this.saveAllCubeStack=[];for(var t=0;t<cfg.const.createNum;t++){this._allCubeStack[t].hideAll(),this._allCubeStack[t].init(0,!1,this._allCubeStack[t].spriteFrame),this._allCubeStack[t].setActive(!0),this._allCubeStack[t].changeAlpha(!0),this._allCubeStack[t].setCubeStackIndex(t),this._allCubeStack[t].isAlive=!0;var e={id:0,spriteFrame:this._allCubeStack[t].spriteFrame,index:t};this.saveAllCubeStack.push(e)}},t.prototype.saveAllCubeStackBySprite=function(){this.saveAllCubeStack=new Array;for(var t=0;t<cfg.const.createNum;t++){var e={id:this._allCubeStack[t].cubeStack_id,spriteFrame:this._allCubeStack[t].spriteFrame,index:t};this.saveAllCubeStack.push(e)}this.hasSaveCubeStack&&(e={id:this.saveCubeStackData.cubeStack_id,spriteFrame:this.saveCubeStackData.spriteFrame},this.saveTempCubeStackData=e)},t.prototype.getAllCubeStackActiveNums=function(){for(var t=0,e=0;e<cfg.const.createNum;e++)this._allCubeStack[e].node.active&&t++;return t},t.prototype.initCubeStack=function(t){void 0===t&&(t=null);for(var e=0;e<cfg.const.createNum;e++){var o=t[e];this._allCubeStack[e].init(o),this._allCubeStack[e].setActive(!0),this._allCubeStack[e].canClick=!0,this._allCubeStack[e].hideAll()}},t.prototype.getAllCubeStackIdArr=function(){for(var t=[],e=0;e<cfg.const.createNum;e++)t.push(this._allCubeStack[e].cubeStack_id);return t},t.prototype.showBtnRotate=function(t){for(var e=0;e<cfg.const.createNum;e++)this._allCubeStack[e].setBtnRotateVisible(t);this.hasSaveCubeStack&&this.saveCubeStackData.setBtnRotateVisible(t)},t.prototype.hasRotateCubeStack=function(t){return this.saveAllCubeStack[t].id!=this._allCubeStack[t].cubeStack_id},t.prototype.hasRotateCubeStackBySaveCube=function(){return this.saveTempCubeStackData.id!=this.saveCubeStackData.cubeStack_id},t.prototype.resetCubeStack=function(){for(var t=0;t<cfg.const.createNum;t++)this._allCubeStack[t].node.active&&this.saveAllCubeStack[t].id!=this._allCubeStack[t].cubeStack_id&&(this._allCubeStack[t].init(this.saveAllCubeStack[t].id,!1,this.saveAllCubeStack[t].spriteFrame),this._allCubeStack[t].setActive(!0),this._allCubeStack[t].canClick=!0);this.hasSaveCubeStack&&(this.saveCubeStackData.init(this.saveTempCubeStackData.id,!1,this.saveTempCubeStackData.spriteFrame),this.saveCubeStackData.setActive(!0),this.saveCubeStackData.canClick=!0)},t.prototype.hideAllEffCycle=function(){for(var t=0;t<cfg.const.createNum;t++)this._allCubeStack[t].hideEff_Cycle()},t.prototype.getNowGrayCubeIsByRotate=function(t,e,o,a){var n;this.blockRulerTools=new i.default;for(var c=a.rotateId,r=0;r<3;r++){if(this.saveCubeStack.init(c),n=this.saveCubeStack,this.blockRulerTools.initData(t,e,o),1==this.blockRulerTools.checkGame(n))return{time:r+1,id:n.cubeStack_id};c=n.rotateId}return null},t.prototype.getAllGrayCubeIsByRotate=function(t,e,o,a){var n;this.blockRulerTools=new i.default;for(var c=a.rotateId,r=[],s=0;s<3;s++)this.saveCubeStack.init(c),n=this.saveCubeStack,this.blockRulerTools.initData(t,e,o),1==this.blockRulerTools.checkGame(n)?(n.cubeStack_id,r.push(n.cubeStack_id)):c=n.rotateId;return r},t}();o.default=c,cc._RF.pop()},{"../prefabs/CubeStack":"CubeStack","./BlockPuzzleRulerTools":"BlockPuzzleRulerTools","./newBlockStyleAITools":"newBlockStyleAITools"}],BlockPuzzleEffTools:[function(t,e,o){"use strict";cc._RF.push(e,"b52ddBAaJlEw4XaAhB45vi/","BlockPuzzleEffTools"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function t(){this.effAction=null,this.saveSprite=[],this.eff_HighAction=null,this.effAction||(this.effAction=this.getEffPrebAction())}return t.prototype.getEffNode=function(t,e,o,a,i){void 0===a&&(a=0),void 0===i&&(i=0);var n=this.effAction.getChildByName(t).getChildByName(e);if(n){var c=cc.instantiate(n),r=c.getComponent(cc.ParticleSystem);return o.addChild(c),c.setPosition(cc.v2(a,i)),r.node.active=!1,r}},t.prototype.getEff_ImgNode=function(t,e){var o=this.effAction.getChildByName(t).getChildByName(e);if(o)return cc.instantiate(o)},t.prototype.hideEffNode=function(t){t&&(t.stopSystem(),t.node.active=!1)},t.prototype.showEffNode=function(t){t.node.active=!0,t.resetSystem()},t.prototype.showRemoveEffNode=function(t,e,o){t.node.active=!0,t.node.setPosition(cc.v2(e,o)),t.resetSystem()},t.prototype.getEffPrebAction=function(){var t=app.res.loadPrefab(cfg.res.prefabs.effAction);return cc.instantiate(t)},t.prototype.actionByHighScore=function(t){var e=this.getEffNode("Eff_action","New Best",t,0,70);this.showEffNode(e)},t.prototype.startEff_Beautiful=function(t,e){1==t?this.onShowEff_Two(e,"Img_Combo"):this.onShowEff_Other(e,t+1)},t.prototype.startEff_Contine=function(t,e){2==t?this.onShowEff_Two(e,"Img_Streak"):this.onShowEff_Other(e,t)},t.prototype.onShowEff_Two=function(t,e){var o=this.getEff_ImgNode("newEff_action","Img_Nice");o.parent=t,o.y=100,o.x=60,this.showEff_StarCircle(o);var a=e,i=this.getEff_ImgNode("newEff_action",a);i.parent=t,i.y=-100,i.x=50,"Img_Streak"==e&&(i.x=0),this.showEff_StarCircle(i),i.getChildByName("label").getChildByName("LabelAtlas_1").getComponent(cc.Label).string=1,cc.tween(t).delay(2.5).call(function(){o&&o.removeFromParent(),i&&i.removeFromParent()}).start(),cc.tween(i).to(.2,{scale:1.2}).to(.2,{scale:.8}).to(.2,{scale:1}).start(),cc.tween(o).to(.2,{scale:1.2}).to(.2,{scale:.8}).to(.2,{scale:1}).start()},t.prototype.onShowEff_Other=function(t,e){var o=this.getEff_ImgNode("newEff_action","Img_Great");o.parent=t,o.y=100,o.x=50,this.showEff_StarCircle(o);var a=this.getEff_ImgNode("newEff_action","Img_Streak");a.parent=t,a.y=-100,a.x=0,this.showEff_StarCircle(a),a.getChildByName("label").getChildByName("LabelAtlas_1").getComponent(cc.Label).string=e-1,cc.tween(t).delay(2.5).call(function(){o&&o.removeFromParent(),a&&a.removeFromParent()}).start(),cc.tween(a).to(.2,{scale:1.2}).to(.2,{scale:.8}).to(.2,{scale:1}).start(),cc.tween(o).to(.2,{scale:1.2}).to(.2,{scale:.8}).to(.2,{scale:1}).start()},t.prototype.showEff_StarAction=function(t){this.eff_StarAction=this.getEffNode("newEff_action","N2Eff_Star",t,0,0),this.showEffNode(this.eff_StarAction)},t.prototype.hideEff_StarAction=function(){this.eff_StarAction&&(this.hideEffNode(this.eff_StarAction),this.eff_StarAction.node.removeFromParent())},t.prototype.showEff_StarCircle=function(t){this.eff_StarCircle=this.getEffNode("newEff_action","N2Eff_StarCircle",t,0,0),this.showEffNode(this.eff_StarCircle)},t.prototype.hideEff_StarCircle=function(){this.eff_StarCircle&&(this.hideEffNode(this.eff_StarCircle),this.eff_StarCircle.node.removeFromParent())},t.prototype.showHighLightByRemove=function(t){this.eff_showHighLight=this.getEffNode("eff_highLight","Eff_jewelHighLight",t,0,0),this.showEffNode(this.eff_showHighLight)},t.prototype.hideHighLightByRemove=function(){this.eff_showHighLight&&(this.hideEffNode(this.eff_showHighLight),this.eff_showHighLight.node.removeFromParent())},t.prototype.showEff_DailyAction=function(t){this.eff_WinAction=this.getEffNode("Eff_daily","Eff_hint_calendar",t,-23,-23),this.showEffNode(this.eff_WinAction)},t.prototype.hideEff_DailyAction=function(){this.eff_WinAction&&(this.hideEffNode(this.eff_WinAction),this.eff_WinAction.node.removeFromParent())},t.prototype.showEff_DailyClickAction=function(t,e){return this.eff_DailyClickAction=this.getEffNode("Eff_daily",e,t,0,0),this.showEffNode(this.eff_DailyClickAction),this.eff_DailyClickAction},t.prototype.hideEff_DailyClickAction=function(){this.eff_DailyClickAction&&(this.hideEffNode(this.eff_DailyClickAction),this.eff_DailyClickAction.node.removeFromParent(),this.eff_DailyClickAction=null)},t.prototype.showEff_HighAction=function(t){var e=new cc.Node,o=app.res.loadAtlas(cfg.res.atlas.cube_ui);this.eff_HighAction=e.addComponent(cc.Sprite),this.eff_HighAction.node.scale=.9,this.eff_HighAction.node.opacity=150;var a="img_cycle2";2==cfg.const.typeUi&&(a="img_cycle"),this.eff_HighAction.spriteFrame=o.getSpriteFrame(a),e.parent=t;var i=cc.rotateBy(.6,90);cc.tween(this.eff_HighAction.node).repeatForever(i).start()},t.prototype.changeHighActionSprite=function(){if(this.eff_HighAction){var t=app.res.loadAtlas(cfg.res.atlas.cube_ui),e="img_cycle2";2==cfg.const.typeUi&&(e="img_cycle"),this.eff_HighAction.spriteFrame=t.getSpriteFrame(e)}},t.prototype.getIsHighAction=function(){return!!this.eff_HighAction},t.prototype.hideEff_HighAction=function(){this.eff_HighAction&&(this.eff_HighAction.node.removeFromParent(),this.eff_HighAction=null)},t}();o.default=a,cc._RF.pop()},{}],BlockPuzzleLogEvent:[function(t,e,o){"use strict";cc._RF.push(e,"6d10fdifVdN0bhIn888t0SM","BlockPuzzleLogEvent"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function t(){}return t.prototype.showLogWithFirstGameComplete=function(){app.LogEvent.showLogEventWithName("Tutorial_Complete")},t.prototype.showLogWithTutorialSkip=function(){app.LogEvent.showLogEventWithName("Tutorial_Skip"),cfg.const.isFirstOpenTutotial=!1},t.prototype.showLogWithStepNum=function(t){for(var e=[5,10,15,20,15,30,35],o=0;o<e.length;o++)e[o]==t&&app.LogEvent.showLogEventWithName("BlockSet_"+t)},t.prototype.showLogWithNewGameClick=function(){app.Utils.saveStringToLocal("Random_diamand_woodokuMap",""),app.Utils.saveStringToLocal("score_woodokuMap","");var t=app.Utils.getStringFromLocal("nowGameCount");1==(t=t&&""!=t?parseInt(t):1)?(app.LogEvent.showLogEventWithName("First_New_Game_Click"),app.LogEvent.showLogEventWithName("Second_Game_Start")):2==t?(app.LogEvent.showLogEventWithName("Second_New_Game_Click"),app.LogEvent.showLogEventWithName("Third_Game_Start")):3==t&&app.LogEvent.showLogEventWithName("Third_New_Game_Click"),t++,app.Utils.saveStringToLocal("nowGameCount",t)},t.prototype.showLogWithGameComplete=function(){var t=app.Utils.getStringFromLocal("First_Game_Complete");t&&""!=t?(2==(t=parseInt(t))?app.LogEvent.showLogEventWithName("Second_Game_Complete"):3==t&&app.LogEvent.showLogEventWithName("Third_Game_Complete"),t++):(app.Utils.saveStringToLocal("First_Game_Complete",1),app.LogEvent.showLogEventWithName("First_Game_Complete")),5==t?app.LogEvent.showLogEventWithName("5Games_Complete"):10==t&&app.LogEvent.showLogEventWithName("10Games_Complete"),app.Utils.saveStringToLocal("First_Game_Complete",t)},t.prototype.onEndGameByAllPoint=function(t,e){for(var o=0,a="EndGame_Score_",i=0;i<e.length;i++){var n=e[i];t>=n&&0!=n&&(o=n)}a+=o,app.LogEvent.showLogEventWithName(a+"")},t.prototype.saveScoreByMonth=function(t,e){var o=app.Utils.getStringFromLocal("best_today"),a=app.Utils.getStringFromLocal("best_week"),i=app.Utils.getStringFromLocal("best_month"),n=app.Utils.getStringFromLocal("best_year"),c=new Date,r=c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate();o=o&&""!=o&&0!=o?JSON.parse(o):{score:0,date:r},a=a&&""!=a&&0!=a?JSON.parse(a):{score:0,date:r},i=i&&""!=i&&0!=i?JSON.parse(i):{score:0,date:r},n=n&&""!=n&&0!=n?JSON.parse(n):{score:0,date:r},(this.getIsLastDay(o.date)||t>o.score)&&(o.score=t,app.Utils.saveStringToLocal("best_today",JSON.stringify(o))),(this.getIsLastWeek(a.date)||t>a.score)&&(a.score=t,app.Utils.saveStringToLocal("best_week",JSON.stringify(a))),(this.getIsLastMonth(i.date)||t>i.score)&&(i.score=t,app.Utils.saveStringToLocal("best_month",JSON.stringify(i)));var s=parseInt(app.Utils.getStringFromLocal("best_week"));s>parseInt(app.Utils.getStringFromLocal("best_month"))&&(i.score=s,app.Utils.saveStringToLocal("best_month",JSON.stringify(i))),(this.getIsLasYear(n.date)||t>n.score)&&(n.score=t,app.Utils.saveStringToLocal("best_year",JSON.stringify(n))),t>e&&app.Utils.saveStringToLocal("highScore",t)},t.prototype.getIsLastWeek=function(t){var e=new Date,o=new Date(t),a=e.getDay();0==a&&(a=7);var i=o.getDay();return 0==i&&(i=7),a-i<0||e.getDate()-o.getDate()>=7},t.prototype.getIsLastDay=function(t){var e=new Date,o=new Date(t);return e.getFullYear()-o.getFullYear()>0||e.getMonth()-o.getMonth()>0||e.getDate()-o.getDate()>0},t.prototype.getIsLastMonth=function(t){var e=new Date,o=new Date(t);return e.getFullYear()-o.getFullYear()>0||e.getMonth()-o.getMonth()>0},t.prototype.getIsLasYear=function(t){var e=new Date,o=new Date(t);return e.getFullYear()-o.getFullYear()>0},t.prototype.setNextGameByScore=function(t){var e=app.Utils.getStringFromLocal("lastGame_Score");e&&(e<=200?(cfg.const.game_diff-=2,cfg.const.game_diff<1&&(cfg.const.game_diff=1)):e<=500?(cfg.const.game_diff-=1,cfg.const.game_diff<1&&(cfg.const.game_diff=1)):e<=1500||(e<2500?(cfg.const.game_diff+=1,cfg.const.game_diff>5&&(cfg.const.game_diff=5)):(cfg.const.game_diff+=2,cfg.const.game_diff>5&&(cfg.const.game_diff=5)))),app.Utils.saveStringToLocal("lastGame_Score",t)},t.prototype.getNowViewIsRecordView=function(){if("1"==app.Utils.getStringFromLocal("isRecordView")){cfg.const.resurgenceTime=0;var t=JSON.parse(app.Utils.getStringFromLocal("recordViewData"));app.view.showRecordView(t.score)}if("1"==app.Utils.getStringFromLocal("isRewardedView")){cfg.const.resurgenceTime=0;var e=app.Utils.getStringFromLocal("rewardedViewData"),o=JSON.parse(e);app.view.showRewardedRecordView(o.mapDataArr,o.saveCubeStack,o.score,o.saveRemoveCubeStackArr)}},t.prototype.saveTodayChallengeOver=function(){var t=new Date;app.LogEvent.showLogEventWithName("Game_Challenge_Success"),app.LogEvent.showLogEventWithName("Daily_Complete"),this.onSaveFailedNums(-1);var e=app.Utils.getStringFromLocal("save_PlayTime_Date");e=e&&""!=e?JSON.parse(e):[],-1!=cfg.const.clickDaillyNum&&t.setDate(cfg.const.clickDaillyNum);var o={date:cfg.const.clickDailyMonth+"-"+t.getDate(),isSuccess:!0};e.push(o);var a=t.getFullYear()+"-"+cfg.const.clickDailyMonth;app.Utils.saveStringToLocal("save_time",JSON.stringify(a)),app.Utils.saveStringToLocal("save_PlayTime_Date",JSON.stringify(e))},t.prototype.isFirstGameOver=function(){var t="isFirstGameOver",e=app.Utils.getStringFromLocal(t);e&&""!=e||(app.LogEvent.showLogEventWithName("First_GameComplete"),cfg.const.isFirst_GameOver=!0,app.Utils.saveStringToLocal(t,"1"))},t.prototype.onTutorialClear=function(t){var e=app.Utils.getStringFromLocal("isFirstOpenGame");e&&""!=e&&"yes"!=e||app.LogEvent.showLogEventWithName(["First_Tutorial_Clear","Second_Tutorial_Clear","Third_Tutorial_Clear","Four_Tutorial_Clear"][t])},t.prototype.isFirstReviveRotate=function(){var t=app.Utils.getStringFromLocal("isFirstReviveRotate");t&&""!=t||(app.LogEvent.showLogEventWithName("First_Revive_Rotate"),app.Utils.saveStringToLocal("isFirstReviveRotate","1"))},t.prototype.isFirstReviveRewarded=function(){var t=app.Utils.getStringFromLocal("isFirstReviveRewarded");t&&""!=t?"1"==t&&(app.LogEvent.showLogEventWithName("Second_Revive_Rewarded"),app.Utils.saveStringToLocal("isFirstReviveRewarded","2")):(app.LogEvent.showLogEventWithName("First_Revive_Rewarded"),app.Utils.saveStringToLocal("isFirstReviveRewarded","1"))},t.prototype.onSaveTodayIsOpenTips=function(){var t=new Date;-1!=cfg.const.clickDaillyNum&&t.setDate(cfg.const.clickDaillyNum);var e=app.Utils.getStringFromLocal("today_challenge_IsOpenTips");e=e&&""!=e?JSON.parse(e):[];var o={date:cfg.const.clickDailyMonth+"-"+t.getDate(),isOpenTips:!0};e.push(o);var a=t.getFullYear()+"-"+cfg.const.clickDailyMonth;app.Utils.saveStringToLocal("save_challenge_time",JSON.stringify(a)),app.Utils.saveStringToLocal("today_challenge_IsOpenTips",JSON.stringify(e))},t.prototype.onSaveFailedNums=function(t){var e=app.Utils.getStringFromLocal("save_FailedNums");e=e&&""!=e?JSON.parse(e):[];var o={date:cfg.const.clickDailyMonth+"-"+cfg.const.clickDaillyNum,failedNums:t};e.push(o),app.Utils.saveStringToLocal("save_FailedNums",JSON.stringify(e))},t.prototype.onSaveTodayIsOpenTipsByMapPuzzle=function(t){t?app.Utils.saveStringToLocal("save_todayOpenTips","1"):app.Utils.saveStringToLocal("save_todayOpenTips","0")},t.prototype.initData=function(t,e,o){var a=app.Utils.getStringFromLocal("isFirstGameOver");a&&""!=a&&(cfg.const.isFirst_GameOver=!0),cfg.const.isFirst_GameOver=!0;var i=parseInt(app.Utils.getStringFromLocal("challenge_todayIsOver"))||0;cfg.const.challenge_todayIsOver=0!=i;var n=app.Utils.getStringFromLocal("mainGame_rotateTime");cfg.const.rotateTime=""!=n&&n?parseInt(n):0;var c=app.Utils.getStringFromLocal("mainGame_rotateNum");cfg.const.rotateNum=""!=c&&c?parseInt(c):0,t.getComponent(cc.Label).string=cfg.const.rotateNum;var r=app.Utils.getStringFromLocal("mainGame_randomNum");cfg.const.random_num=""!=r&&r?parseInt(r):0,o.getComponent(cc.Label).string=cfg.const.random_num;var s=app.Utils.getStringFromLocal("mainGame_coinNum");cfg.const.coinNum=""!=s&&s?parseInt(s):0,e.getComponent(cc.Label).string=cfg.const.coinNum;var l=app.Utils.getStringFromLocal("mainGame_resurgenceTime");cfg.const.resurgenceTime=""!=l&&l?parseInt(l):1;var u=app.Utils.getStringFromLocal("maxChallengeNum");cfg.const.maxChallengeNum=""!=u&&u?parseInt(u):0},t.prototype.showEventAnalytics=function(){var t=app.Utils.getStringFromLocal("today"),e=new Date;if(t&&""!=t){var o=JSON.parse(app.Utils.getStringFromLocal("nowTime"));app.Utils.getIsLastDay(o)&&(t=parseInt(t),++t>60&&(t=1),app.Utils.saveStringToLocal("best_today",0),app.Utils.saveStringToLocal("hasPlayOrContinue",0),app.Utils.saveStringToLocal("mapAndBlcokNum",1),app.Utils.saveStringToLocal("today",t),app.Utils.saveStringToLocal("nowTime",JSON.stringify(e)),app.Utils.saveStringToLocal("challenge_todayIsOver","0"),2==t&&app.LogEvent.showLogEventWithName("SecondDay_Open")),app.Utils.getIslastWeek(o)&&app.Utils.saveStringToLocal("best_week",0),app.Utils.getIsLastMonth(o)&&(app.Utils.saveStringToLocal("nowMonthHasDiamand",0),app.Utils.saveStringToLocal("best_month",0)),app.Utils.getIsLasYear(o)&&app.Utils.saveStringToLocal("best_year",0)}else app.Utils.saveStringToLocal("today",1),app.Utils.saveStringToLocal("nowTime",JSON.stringify(e)),app.LogEvent.showLogEventWithName("First_Open");var a=app.Utils.getStringFromLocal("First_Game_Start");if(!a||""==a){app.Utils.saveStringToLocal("First_Game_Start",1),app.LogEvent.showLogEventWithName("First_Game_Start");var i=new Date,n=i.getFullYear()+"-"+(i.getMonth()+1);app.Utils.saveStringToLocal("first_open_time",JSON.stringify(n))}},t.prototype.saveTimePlayMinute=function(t){if(t>=30){var e=new Date;app.Utils.saveStringToLocal("save_Player_PlayGame",JSON.stringify(e)),app.LogEvent.showLogEventWithName("Player_PlayGame_30minute")}else t>=20&&(e=new Date,app.Utils.saveStringToLocal("save_Player_PlayGame",JSON.stringify(e)),app.LogEvent.showLogEventWithName("Player_PlayGame_20minute"))},t.prototype.onSaveGameData=function(t){var e=JSON.stringify(t);app.Utils.saveStringToLocal("mainGame_MapData",e),app.Utils.saveStringToLocal("mainGame_rotateNum",cfg.const.rotateNum),app.Utils.saveStringToLocal("mainGame_coinNum",cfg.const.coinNum),app.Utils.saveStringToLocal("mainGame_randomNum",cfg.const.random_num),app.Utils.saveStringToLocal("maxChallengeNum",cfg.const.maxChallengeNum),app.Utils.saveStringToLocal("mainGame_rotateTime",cfg.const.rotateTime)},t}();o.default=a,cc._RF.pop()},{}],BlockPuzzleMapPushTools:[function(t,e,o){"use strict";cc._RF.push(e,"093b4hKBB1DFKm3gZcdrzNq","BlockPuzzleMapPushTools");var a,i=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,a){var i,n=arguments.length,c=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,a);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,r=c.ccclass,s=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canPutNum=0,e.isCanRemove=!1,e.noPushTime=0,e.nowStepNum=0,e.step_num=0,e.nowScore=0,e.isNeedRuler=!1,e.smallCubeType=new Array,e.mediumCubeType=new Array,e.bigCubeType=new Array,e.allCubeFormTypeArr=new Array,e.tempSaveCubeArr=new Array,e.allCubeFormType=null,e.BigArrByStack=new Array,e.bigCubeStackType=0,e}return i(e,t),e.prototype.initBlockData=function(t,e,o,a){this.rowNum=o,this.columnNum=a,this.allCubeByNums=new Array;var i=app.map.getMapData(t);this.pointBlockArr=this.deepcopy(this.getTruePointArr(e));for(var n=this.deepcopy(this.getTruePointArr(e)),c=!0,r=[],s=[];c;)if(this.curCubeShader=new Array,1==(c=this.onPushCube(i,c))){this.canPutNum++;var l=new Array;l=this.deepcopy(this.getTruePointArr(n));for(var u=0;u<this.curCubeShader.length;u++)this.pointBlockArr[this.curCubeShader[this.curCubeShader.length-1].x][this.curCubeShader[this.curCubeShader.length-1].y]=1,l[this.curCubeShader[u].x][this.curCubeShader[u].y]=1;var h={removeNums:this.canRemoveCube(l),curCubeShader:this.curCubeShader};r.push(h)}for(this.pointBlockArr=this.deepcopy(this.getTruePointArr(e)),c=!0;c;)if(this.curCubeShader=new Array,1==(c=this.onPushCube(i,c))){for(this.canPutNum++,l=new Array,l=this.deepcopy(this.getTruePointArr(n)),u=0;u<this.curCubeShader.length;u++)this.pointBlockArr[this.curCubeShader[0].x][this.curCubeShader[0].y]=1,l[this.curCubeShader[u].x][this.curCubeShader[u].y]=1;h={removeNums:this.canRemoveCube(l),curCubeShader:this.curCubeShader},s.push(h)}r=r.concat(s);var p=[],d=-1;for(u=0;u<r.length;u++)d<=r[u].removeNums&&(d=r[u].removeNums,p=r[u].curCubeShader);return{maxNums:d,cubeShader:p}},e.prototype.hasOverCubeShader=function(){},e.prototype.onPushCube=function(t,e){for(var o=0,a=0,i=t.type,n=t.id,c=t.array,r=c.length,s=null==t.poxSet?0:t.poxSet,l=0,u=0;u<r;u++){var h=c[u].length;h>l&&(l=h)}switch(i){case 0:e=this.checkOneCube();break;case 1:e=this.checkHorizontal(l);break;case 2:e=this.checkVertical(r);break;case 3:e=this.checkSolidSquare(r);break;case 5:11==n&&(o=1),e=this.checkComplexity2(3,1,o);break;case 6:var p=0;17==n&&(p=2,o=1),e=this.checkComplexity2(3,p,o);break;case 9:e=this.checkComplexityByTwo(s);break;case 10:e=this.checkComplexityByTwo2(s);break;case 11:8!=n&&9!=n||(a=1),e=this.checkComplexityByTen(s,a);break;case 12:e=this.checkComplexityByThreeOne(s);break;case 13:e=this.checkComplexityByFourCube(n);break;case 14:23!=n&&24!=n||(a=1),e=this.checkComplexityByXieCube(r,a);break;case 15:27!=n&&28!=n||(a=1),e=this.checkComplexityByOtherCube(s,a);break;case 16:e=this.checkComplexityByFiveCube();break;case 17:e=this.checkComplexityByFiveCube2();break;case 18:e=this.checkComplexityByLastCube(n);break;case 19:41!=n&&43!=n||(a=1),e=this.checkComplexityByOtherCube2(n,s,a);break;case 20:e=this.canPustCheck20(n)}return e},e.prototype.deepcopy=function(t){for(var e=[],o=0,a=t.length;o<a;o++)t[o]instanceof Array?e[o]=this.deepcopy(t[o]):e[o]=t[o];return e},e.prototype.getTruePointArr=function(t){for(var e=new Array,o=0;o<cfg.const.gameRowNum;o++){e[o]=new Array;for(var a=0;a<cfg.const.gameRowNum;a++)e[o][a]=t[o][a]}return e},e.prototype.canRemoveCube=function(t){for(var e=0,o=0;o<cfg.const.gameRowNum;o++){for(var a=0,i=0,n=0;n<cfg.const.gameRowNum;n++)1==t[o][n]&&a++,1==t[n][o]&&i++;a!=cfg.const.gameRowNum&&i!=cfg.const.gameRowNum||e++}if(9==cfg.const.gameRowNum)for(var c=0;c<9;c++){var r=0;for(o=0;o<cfg.const.Sudoku;o++)for(n=0;n<cfg.const.Sudoku;n++){var s=o+Math.floor(c/cfg.const.Sudoku)*cfg.const.Sudoku,l=n+Math.floor(c%cfg.const.Sudoku)*cfg.const.Sudoku;1==t[s][l]&&r++}9==r&&e++}return e},e.prototype.checkOneCube=function(){for(var t=0;t<cfg.const.gameRowNum;t++)for(var e=0;e<cfg.const.gameRowNum;e++)if(this.curCubeShader=new Array,0==this.pointBlockArr[t][e]){var o={x:t,y:e};return this.curCubeShader.push(o),!0}return!1},e.prototype.checkHorizontal=function(t){for(var e=0,o=0,a=cfg.const.gameRowNum-1;a>=0;a--)for(cfg.const.gameRowNum,this.rowNum[a],e=0,o=0,this.curCubeShader=new Array;o<cfg.const.gameColNum;){if(0==this.pointBlockArr[a][o]){++e;var i={x:a,y:o};this.curCubeShader.push(i)}else e=0,this.curCubeShader=new Array;if(e>=t)return!0;++o}return!1},e.prototype.checkVertical=function(t){for(var e=0,o=0,a=cfg.const.gameColNum-1;a>=0;a--)for(cfg.const.gameColNum,this.columnNum[a],e=0,o=0,this.curCubeShader=new Array;o<cfg.const.gameColNum;){if(0==this.pointBlockArr[o][a]){++e;var i={x:o,y:a};this.curCubeShader.push(i)}else e=0,this.curCubeShader=new Array;if(e>=t)return!0;++o}return!1},e.prototype.checkSolidSquare=function(t){for(var e=0;e<cfg.const.gameRowNum-t+1;e++)for(var o=0;o<cfg.const.gameRowNum-t+1;o++){var a=0;this.curCubeShader=new Array;for(var i=0;i<t;i++)for(var n=0;n<t;n++)if(0==this.pointBlockArr[e+i][o+n]){a++;var c={x:e+i,y:o+n};this.curCubeShader.push(c)}if(a==t*t)return!0}return!1},e.prototype.checkComplexity2=function(t,e){for(var o=0;o<cfg.const.gameRowNum-1;o++)for(var a=0;a<cfg.const.gameRowNum-2;a++)if(this.curCubeShader=new Array,0==this.pointBlockArr[o][a]&&0==this.pointBlockArr[o][a+1]&&0==this.pointBlockArr[o][a+2]&&0==this.pointBlockArr[o+1][a+e])return this.curCubeShader.push({x:o,y:a}),this.curCubeShader.push({x:o,y:a+1}),this.curCubeShader.push({x:o,y:a+2}),this.curCubeShader.push({x:o+1,y:a+e}),!0;return!1},e.prototype.checkComplexityByTwo=function(t){for(var e=0;e<cfg.const.gameRowNum-2;e++)for(var o=0;o<cfg.const.gameRowNum-1;o++)if(this.curCubeShader=new Array,0==this.pointBlockArr[e][o]&&0==this.pointBlockArr[e+1][o]&&0==this.pointBlockArr[e+2][o]&&0==this.pointBlockArr[e+t][o+1])return this.curCubeShader.push({x:e,y:o}),this.curCubeShader.push({x:e+1,y:o}),this.curCubeShader.push({x:e+2,y:o}),this.curCubeShader.push({x:e+t,y:o+1}),!0;return!1},e.prototype.checkComplexityByTwo2=function(t){for(var e=0;e<cfg.const.gameRowNum-2;e++)for(var o=0;o<cfg.const.gameRowNum-1;o++)if(this.curCubeShader=new Array,0==this.pointBlockArr[e][o+1]&&0==this.pointBlockArr[e+1][o+1]&&0==this.pointBlockArr[e+2][o+1]&&0==this.pointBlockArr[e+t][o])return this.curCubeShader.push({x:e,y:o+1}),this.curCubeShader.push({x:e+1,y:o+1}),this.curCubeShader.push({x:e+2,y:o+1}),this.curCubeShader.push({x:e+t,y:o}),!0;return!1},e.prototype.checkComplexityByTen=function(t,e){if(1==e){for(var o=0;o<cfg.const.gameRowNum-1;o++)for(var a=0;a<cfg.const.gameRowNum-1;a++)if(this.curCubeShader=new Array,0==this.pointBlockArr[o][a]&&0==this.pointBlockArr[o][a+1]&&0==this.pointBlockArr[o+1][a+t])return this.curCubeShader.push({x:o,y:a}),this.curCubeShader.push({x:o,y:a+1}),this.curCubeShader.push({x:o+1,y:a+t}),!0}else for(o=0;o<cfg.const.gameRowNum-1;o++)for(a=0;a<cfg.const.gameRowNum-1;a++)if(this.curCubeShader=new Array,0==this.pointBlockArr[o+1][a]&&0==this.pointBlockArr[o+1][a+1]&&0==this.pointBlockArr[o][a+t])return this.curCubeShader.push({x:o+1,y:a}),this.curCubeShader.push({x:o+1,y:a+1}),this.curCubeShader.push({x:o,y:a+t}),!0;return!1},e.prototype.checkComplexityByThreeOne=function(t){for(var e=0;e<cfg.const.gameRowNum-1;e++)for(var o=0;o<cfg.const.gameRowNum-2;o++)if(this.curCubeShader=new Array,0==this.pointBlockArr[e+1][o]&&0==this.pointBlockArr[e+1][o+1]&&0==this.pointBlockArr[e+1][o+2]&&0==this.pointBlockArr[e][o+t])return this.curCubeShader.push({x:e+1,y:o}),this.curCubeShader.push({x:e+1,y:o+1}),this.curCubeShader.push({x:e+1,y:o+2}),this.curCubeShader.push({x:e,y:o+t}),!0;return!1},e.prototype.checkComplexityByFourCube=function(t){if(18==t){for(var e=0;e<cfg.const.gameRowNum-1;e++)for(var o=0;o<cfg.const.gameRowNum-2;o++)if(this.curCubeShader=new Array,0==this.pointBlockArr[e][o]&&0==this.pointBlockArr[e][o+1]&&0==this.pointBlockArr[e+1][o+1]&&0==this.pointBlockArr[e+1][o+2])return this.curCubeShader.push({x:e,y:o}),this.curCubeShader.push({x:e,y:o+1}),this.curCubeShader.push({x:e+1,y:o+1}),this.curCubeShader.push({x:e+1,y:o+2}),!0}else if(19==t){for(e=0;e<cfg.const.gameRowNum-1;e++)for(o=0;o<cfg.const.gameRowNum-2;o++)if(this.curCubeShader=new Array,0==this.pointBlockArr[e+1][o]&&0==this.pointBlockArr[e][o+1]&&0==this.pointBlockArr[e+1][o+1]&&0==this.pointBlockArr[e][o+2])return this.curCubeShader.push({x:e+1,y:o}),this.curCubeShader.push({x:e,y:o+1}),this.curCubeShader.push({x:e+1,y:o+1}),this.curCubeShader.push({x:e,y:o+2}),!0}else if(20==t){for(e=0;e<cfg.const.gameRowNum-2;e++)for(o=0;o<cfg.const.gameRowNum-1;o++)if(this.curCubeShader=new Array,0==this.pointBlockArr[e+1][o]&&0==this.pointBlockArr[e+2][o]&&0==this.pointBlockArr[e+1][o+1]&&0==this.pointBlockArr[e][o+1])return this.curCubeShader.push({x:e+1,y:o}),this.curCubeShader.push({x:e+2,y:o}),this.curCubeShader.push({x:e+1,y:o+1}),this.curCubeShader.push({x:e,y:o+1}),!0}else for(e=0;e<cfg.const.gameRowNum-2;e++)for(o=0;o<cfg.const.gameRowNum-1;o++)if(this.curCubeShader=new Array,0==this.pointBlockArr[e][o]&&0==this.pointBlockArr[e+1][o]&&0==this.pointBlockArr[e+1][o+1]&&0==this.pointBlockArr[e+2][o+1])return this.curCubeShader.push({x:e,y:o}),this.curCubeShader.push({x:e+1,y:o}),this.curCubeShader.push({x:e+1,y:o+1}),this.curCubeShader.push({x:e+2,y:o+1}),!0;return!1},e.prototype.checkComplexityByXieCube=function(t,e){if(1==e)for(var o=0;o<cfg.const.gameRowNum-t+1;o++)for(var a=0;a<cfg.const.gameRowNum-t+1;a++){var i=0;this.curCubeShader=new Array;for(var n=0;n<t;n++)0==this.pointBlockArr[o+n][a+n]&&(this.curCubeShader.push({x:o+n,y:a+n}),i++);if(i==t)return!0}else for(o=0;o<cfg.const.gameRowNum-t+1;o++)for(a=0;a<cfg.const.gameRowNum-t+1;a++){i=0;var c=0;for(this.curCubeShader=new Array,n=t-1;n>=0;n--)0==this.pointBlockArr[o+n][a+c]&&(this.curCubeShader.push({x:o+n,y:a+c}),i++),c++;if(i==t)return!0}return!1},e.prototype.checkComplexityByOtherCube=function(t,e){if(1==e){for(var o=0;o<cfg.const.gameRowNum-2;o++)for(var a=0;a<cfg.const.gameRowNum-2;a++)if(this.curCubeShader=new Array,0==this.pointBlockArr[o+2][a]&&0==this.pointBlockArr[o+2][a+1]&&0==this.pointBlockArr[o+2][a+2]&&0==this.pointBlockArr[o][a+t]&&0==this.pointBlockArr[o+1][a+t])return this.curCubeShader.push({x:o+2,y:a}),this.curCubeShader.push({x:o+2,y:a+1}),this.curCubeShader.push({x:o+2,y:a+2}),this.curCubeShader.push({x:o,y:a+t}),this.curCubeShader.push({x:o+1,y:a+t}),!0}else for(o=0;o<cfg.const.gameRowNum-2;o++)for(a=0;a<cfg.const.gameRowNum-2;a++)if(this.curCubeShader=new Array,0==this.pointBlockArr[o][a]&&0==this.pointBlockArr[o][a+1]&&0==this.pointBlockArr[o][a+2]&&0==this.pointBlockArr[o+1][a+t]&&0==this.pointBlockArr[o+2][a+t])return this.curCubeShader.push({x:o,y:a}),this.curCubeShader.push({x:o,y:a+1}),this.curCubeShader.push({x:o,y:a+2}),this.curCubeShader.push({x:o+1,y:a+t}),this.curCubeShader.push({x:o+2,y:a+t}),!0;return!1},e.prototype.checkComplexityByOtherCube2=function(t,e,o){if(1==o){for(var a=0;a<cfg.const.gameRowNum-2;a++)for(var i=0;i<cfg.const.gameRowNum-2;i++)if(this.curCubeShader=new Array,0==this.pointBlockArr[a+2][i+e]&&0==this.pointBlockArr[a+1][i]&&0==this.pointBlockArr[a+1][i+1]&&0==this.pointBlockArr[a+1][i+2]&&0==this.pointBlockArr[a][i+e])return this.curCubeShader.push({x:a+2,y:i+e}),this.curCubeShader.push({x:a+1,y:i}),this.curCubeShader.push({x:a+1,y:i+1}),this.curCubeShader.push({x:a+1,y:i+2}),this.curCubeShader.push({x:a,y:i+e}),!0}else if(44==t){for(a=0;a<cfg.const.gameRowNum-2;a++)for(i=0;i<cfg.const.gameRowNum-2;i++)if(this.curCubeShader=new Array,0==this.pointBlockArr[a][i]&&0==this.pointBlockArr[a][i+1]&&0==this.pointBlockArr[a][i+2]&&0==this.pointBlockArr[a+1][i+1]&&0==this.pointBlockArr[a+2][i+1])return this.curCubeShader.push({x:a,y:i}),this.curCubeShader.push({x:a,y:i+1}),this.curCubeShader.push({x:a,y:i+2}),this.curCubeShader.push({x:a+1,y:i+1}),this.curCubeShader.push({x:a+2,y:i+1}),!0}else for(a=0;a<cfg.const.gameRowNum-2;a++)for(i=0;i<cfg.const.gameRowNum-2;i++)if(this.curCubeShader=new Array,0==this.pointBlockArr[a][i+1]&&0==this.pointBlockArr[a+1][i+1]&&0==this.pointBlockArr[a+2][i]&&0==this.pointBlockArr[a+2][i+1]&&0==this.pointBlockArr[a+2][i+2])return this.curCubeShader.push({x:a,y:i+1}),this.curCubeShader.push({x:a+1,y:i+1}),this.curCubeShader.push({x:a+2,y:i}),this.curCubeShader.push({x:a+2,y:i+1}),this.curCubeShader.push({x:a+2,y:i+2}),!0;return!1},e.prototype.checkComplexityByFiveCube=function(){for(var t=0;t<cfg.const.gameRowNum-2;t++)for(var e=0;e<cfg.const.gameRowNum-2;e++)if(this.curCubeShader=new Array,0==this.pointBlockArr[t][e]&&0==this.pointBlockArr[t+2][e]&&0==this.pointBlockArr[t][e+2]&&0==this.pointBlockArr[t+1][e+1]&&0==this.pointBlockArr[t+2][e+2])return this.curCubeShader.push({x:t,y:e}),this.curCubeShader.push({x:t+2,y:e}),this.curCubeShader.push({x:t,y:e+2}),this.curCubeShader.push({x:t+1,y:e+1}),this.curCubeShader.push({x:t+2,y:e+2}),!0;return!1},e.prototype.checkComplexityByFiveCube2=function(){for(var t=0;t<cfg.const.gameRowNum-2;t++)for(var e=0;e<cfg.const.gameRowNum-2;e++)if(this.curCubeShader=new Array,0==this.pointBlockArr[t+1][e]&&0==this.pointBlockArr[t][e+1]&&0==this.pointBlockArr[t+1][e+1]&&0==this.pointBlockArr[t+2][e+1]&&0==this.pointBlockArr[t+1][e+2])return this.curCubeShader.push({x:t+1,y:e}),this.curCubeShader.push({x:t,y:e+1}),this.curCubeShader.push({x:t+1,y:e+1}),this.curCubeShader.push({x:t+2,y:e+1}),this.curCubeShader.push({x:t+1,y:e+2}),!0;return!1},e.prototype.checkComplexityByLastCube=function(t){if(37==t){for(var e=0;e<cfg.const.gameRowNum-2;e++)for(var o=0;o<cfg.const.gameRowNum-1;o++)if(this.curCubeShader=new Array,0==this.pointBlockArr[e][o]&&0==this.pointBlockArr[e][o+1]&&0==this.pointBlockArr[e+1][o]&&0==this.pointBlockArr[e+2][o]&&0==this.pointBlockArr[e+2][o+1])return this.curCubeShader.push({x:e,y:o}),this.curCubeShader.push({x:e,y:o+1}),this.curCubeShader.push({x:e+1,y:o}),this.curCubeShader.push({x:e+2,y:o}),this.curCubeShader.push({x:e+2,y:o+1}),!0}else if(38==t){for(e=0;e<cfg.const.gameRowNum-1;e++)for(o=0;o<cfg.const.gameRowNum-2;o++)if(this.curCubeShader=new Array,0==this.pointBlockArr[e][o]&&0==this.pointBlockArr[e][o+2]&&0==this.pointBlockArr[e+1][o]&&0==this.pointBlockArr[e+1][o+1]&&0==this.pointBlockArr[e+1][o+2])return this.curCubeShader.push({x:e,y:o}),this.curCubeShader.push({x:e,y:o+2}),this.curCubeShader.push({x:e+1,y:o}),this.curCubeShader.push({x:e+1,y:o+1}),this.curCubeShader.push({x:e+1,y:o+2}),!0}else if(39==t){for(e=0;e<cfg.const.gameRowNum-2;e++)for(o=0;o<cfg.const.gameRowNum-1;o++)if(this.curCubeShader=new Array,0==this.pointBlockArr[e][o]&&0==this.pointBlockArr[e][o+1]&&0==this.pointBlockArr[e+1][o+1]&&0==this.pointBlockArr[e+2][o]&&0==this.pointBlockArr[e+2][o+1])return this.curCubeShader.push({x:e,y:o}),this.curCubeShader.push({x:e,y:o+1}),this.curCubeShader.push({x:e+1,y:o+1}),this.curCubeShader.push({x:e+2,y:o}),this.curCubeShader.push({x:e+2,y:o+1}),!0}else for(e=0;e<cfg.const.gameRowNum-1;e++)for(o=0;o<cfg.const.gameRowNum-2;o++)if(this.curCubeShader=new Array,0==this.pointBlockArr[e][o]&&0==this.pointBlockArr[e][o+1]&&0==this.pointBlockArr[e][o+2]&&0==this.pointBlockArr[e+1][o]&&0==this.pointBlockArr[e+1][o+2])return this.curCubeShader.push({x:e,y:o}),this.curCubeShader.push({x:e,y:o+1}),this.curCubeShader.push({x:e,y:o+2}),this.curCubeShader.push({x:e+1,y:o}),this.curCubeShader.push({x:e+1,y:o+2}),!0;return!1},e.prototype.canPustCheck20=function(t){if(50==t){for(var e=0;e<cfg.const.gameRowNum-2;e++)for(var o=0;o<cfg.const.gameRowNum-2;o++)if(0==this.pointBlockArr[e][o]&&0==this.pointBlockArr[e][o+1]&&0==this.pointBlockArr[e][o+2]&&0==this.pointBlockArr[e+1][o+1]&&0==this.pointBlockArr[e+2][o]&&0==this.pointBlockArr[e+2][o+1]&&0==this.pointBlockArr[e+2][o+2])return this.curCubeShader.push({x:e,y:o}),this.curCubeShader.push({x:e,y:o+1}),this.curCubeShader.push({x:e,y:o+2}),this.curCubeShader.push({x:e+1,y:o+1}),this.curCubeShader.push({x:e+2,y:o}),this.curCubeShader.push({x:e+2,y:o+1}),this.curCubeShader.push({x:e+2,y:o+2}),!0}else for(e=0;e<cfg.const.gameRowNum-2;e++)for(o=0;o<cfg.const.gameRowNum-2;o++)if(0==this.pointBlockArr[e][o]&&0==this.pointBlockArr[e][o+2]&&0==this.pointBlockArr[e+1][o]&&0==this.pointBlockArr[e+1][o+1]&&0==this.pointBlockArr[e+1][o+2]&&0==this.pointBlockArr[e+2][o]&&0==this.pointBlockArr[e+2][o+2])return this.curCubeShader.push({x:e,y:o}),this.curCubeShader.push({x:e,y:o+2}),this.curCubeShader.push({x:e+1,y:o}),this.curCubeShader.push({x:e+1,y:o+1}),this.curCubeShader.push({x:e+1,y:o+2}),this.curCubeShader.push({x:e+2,y:o}),this.curCubeShader.push({x:e+2,y:o+2}),!0;return!1},n([r],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],BlockPuzzleMapTools:[function(t,e,o){"use strict";cc._RF.push(e,"3a5cfGU5b5EOaNZANXIzeFq","BlockPuzzleMapTools"),Object.defineProperty(o,"__esModule",{value:!0});var a=t("../prefabs/Cube"),i=t("../prefabs/CubeStack"),n=t("./BlockPuzzleEffTools"),c=function(){function t(){this.pointBlockArr=null,this.allCubes=null,this.gameEffModel=null,this.rowNum=null,this.columnNum=null,this._curCubeStack=null,this.curCubeShader=null,this.cubeChange=null,this.curPoint=null,this.gameEffModel||(this.gameEffModel=new n.default)}return Object.defineProperty(t.prototype,"curCubeStack",{get:function(){return this._curCubeStack},set:function(t){this._curCubeStack=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_curPoint",{get:function(){return this.curPoint},set:function(t){this.curPoint=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_allCubes",{get:function(){return this.allCubes},set:function(t){this.allCubes=t},enumerable:!1,configurable:!0}),t.prototype.cleanData=function(){delete this.rowNum,delete this.columnNum,delete this.pointBlockArr,delete this.allCubes,delete this._curCubeStack,delete this.curCubeShader},t.prototype.initCurCubeStack=function(t){var e=app.res.loadPrefab(cfg.res.prefabs.cubeStack),o=cc.instantiate(e);this._curCubeStack=o.getComponent(i.default),o.parent=t,this._curCubeStack.active=!0},t.prototype.restartGame=function(){this.curCubeShader=[],this._curCubeStack.setActive(!1),this.curPoint=cc.v2(0,0);for(var t=0;t<cfg.const.gameRowNum;t++)for(var e=0;e<cfg.const.gameColNum;e++)this.allCubes[e][t].hideCube(),this.pointBlockArr[t][e]=0;this.initCubeNum()},t.prototype.initCubeNum=function(){this.cubeChange=new Array,this.rowNum=new Array(cfg.const.gameRowNum),this.columnNum=new Array(cfg.const.gameColNum);for(var t=0;t<cfg.const.gameRowNum;t++)this.rowNum[t]=0,this.columnNum[t]=0},t.prototype.getAllPointAndSpriteFrame=function(){this.saveAllMapData=[];for(var t=0;t<cfg.const.gameRowNum;t++){this.saveAllMapData[t]=[];for(var e=0;e<cfg.const.gameColNum;e++){var o={point:this.pointBlockArr[this.allCubes[e][t].getPoint().x][this.allCubes[e][t].getPoint().y],spriteFrame:this.allCubes[e][t].spriteFrame};this.saveAllMapData[t][e]=o}}var a=[].concat(this.rowNum),i=[].concat(this.columnNum);return{cubeData:this.saveAllMapData,rowNum:a,columnNum:i}},t.prototype.initCubeMapData=function(t){var e,o=app.res.loadPrefab(cfg.res.prefabs.cube);this.rowNum=[],this.columnNum=[],this.pointBlockArr=[],this.allCubes=[],t.removeAllChildren();for(var i=0;i<cfg.const.gameRowNum;i++){this.pointBlockArr[i]=[],e=[];for(var n=0;n<cfg.const.gameColNum;n++){var c=cc.instantiate(o),r=c.getComponent(a.default);e[n]=r,this.pointBlockArr[i][n]=0,c.parent=t,c.x=(i-4)*cfg.const.cubeSpriteWidth,c.y=(n-4)*cfg.const.cubeSpriteWidth,r.onLoadData(n,i),r.node.active=!1,9==cfg.const.gameRowNum&&(c.x=(i-4)*cfg.const.cubeSpriteWidth,c.y=(n-4)*cfg.const.cubeSpriteWidth)}this.allCubes[i]=e,this.rowNum.push(0),this.columnNum.push(0)}},t.prototype.initAllCubes=function(){for(var t=[],e=0;e<cfg.const.gameRowNum;e++){t[e]=[];for(var o=0;o<cfg.const.gameColNum;o++)t[e][o]=this.allCubes[o][e]}this.allCubes=t},t.prototype.initLastMapData=function(t){for(var e=t.cubeData,o=[],a=[],i=0;i<cfg.const.gameRowNum;i++){for(var n=0,c=0,r=0;r<cfg.const.gameColNum;r++){if(this.pointBlockArr[i][r]=0,this.allCubes[r][i].hideCube(),0!=e[i][r].point){var s=this.allCubes[r][i];this.pointBlockArr[i][r]=1,s.showShader(e[i][r].spriteFrame),s.showInGrid(),c++}0!=e[r][i].point&&n++}o.push(n),a.push(c)}this.columnNum=[].concat(a),this.rowNum=[].concat(o)},t.prototype.hideShader=function(){if(this._curCubeStack.setAllNormalSprite(),this.curCubeShader.length>0){for(var t=0;t<this.curCubeShader.length;t++)this.curCubeShader[t].hideShader();this.curCubeShader=new Array}},t.prototype.CubeColorNormal=function(){if(this.cubeChange.length>0){for(var t=0;t<this.cubeChange.length;t++)this.cubeChange[t].setNormalSprite();this.curCubeStack.setAllNormalSprite(),this.cubeChange=new Array}},t.prototype.onSetMoveUpData=function(){this.rowNum=[].concat(this.cubeRow),this.columnNum=[].concat(this.cubeColumn);for(var t=0,e=0,o=0;o<this.curCubeShader.length;o++)this.curCubeShader[o].showInGrid(),this.pointBlockArr[this.curCubeShader[o].getPoint().x][this.curCubeShader[o].getPoint().y]=1,t+=this.curCubeShader[o].getWorldPosition().x,e+=this.curCubeShader[o].getWorldPosition().y;for(this.addScoreNodePosition=cc.v2(1*t/this.curCubeShader.length,1*e/this.curCubeShader.length),o=0;o<this.cubeChange.length;o++)this.cubeChange[o].setShaderSprite(this.spriteFrame);this.curCubeStack.setActive(!1),this.tempCurCubeShaderArr=this.curCubeShader,this.curCubeShader=new Array,this.tempCurCubeShader=new Array},t.prototype.deepcopy=function(t){for(var e=[],o=0,a=t.length;o<a;o++)t[o]instanceof Array?e[o]=this.deepcopy(t[o]):e[o]=t[o];return e},t.prototype.canRemoveCube=function(t,e,o){var a=this,i=t.length,n=0,c=0,r=!1,s=0,l=this.hasAllRemove(t),u=e,h=o;if(9==cfg.const.gameRowNum)for(var p=0;p<9;p++){for(var d=0,g=0;g<cfg.const.Sudoku;g++)for(var f=0;f<cfg.const.Sudoku;f++){var b=g+Math.floor(p/cfg.const.Sudoku)*cfg.const.Sudoku,m=f+Math.floor(p%cfg.const.Sudoku)*cfg.const.Sudoku;1==this.pointBlockArr[b][m]&&d++}if(9==d){var S=1+Math.floor(p/cfg.const.Sudoku)*cfg.const.Sudoku,y=1+Math.floor(p%cfg.const.Sudoku)*cfg.const.Sudoku;for(this.scoreNodePosition=this.allCubes[y][S].getWorldPosition(),r=!0,s=1,this.onAddTempContinue(s),g=0;g<cfg.const.Sudoku;g++){var v=function(t){var e=g+Math.floor(p/cfg.const.Sudoku)*cfg.const.Sudoku,o=t+Math.floor(p%cfg.const.Sudoku)*cfg.const.Sudoku;_.allCubes[o][e].isRemove||n++;var a=_.allCubes[o][e].removeCube(_.temp_continNum,l),i=_.allCubes[o][e];cc.tween(i.node).delay(.04*t).to(.2,{scale:1.2,opacity:0}).call(function(){i.setActive(!1);var e=i.getWorldPosition();u.showNewAction(e,t),a||(i.setActive(!0),i.node.scale=1,i.node.opacity=255)}).start(),a?_.pointBlockArr[e][o]=0:(_.pointBlockArr[e][o]=1,_.columnNum[e]++,_.rowNum[o]++),_.columnNum[e]--,_.rowNum[o]--,_.rowNum[t]<0&&(_.rowNum[t]=0),_.columnNum[t]<0&&(_.columnNum[t]=0)},_=this;for(f=0;f<cfg.const.Sudoku;f++)v(f)}c++}}if(i>0){var C=0;for(g=0;g<i;g++)if((C=t[g])>=cfg.const.gameRowNum){C-=cfg.const.gameRowNum,this.scoreNodePosition=this.allCubes[4][C].getWorldPosition(),u.actionByNode();var k=0;r=!0,s=2;var A=function(t){w.allCubes[t][C].isRemove||(n++,w.rowNum[t]--),w.onAddTempContinue(s);var e=w.allCubes[t][C].removeCube(w.temp_continNum,l,t),o=w.allCubes[t][C];cc.tween(o.node).delay(.02*t).to(.2,{scale:1.2,opacity:0}).call(function(){o.setActive(!1);var a=o.getWorldPosition();u.showNewAction(a,t),e||(o.setActive(!0),o.node.scale=1,o.node.opacity=255)}).start(),e?w.pointBlockArr[w.allCubes[t][C].getPoint().x][w.allCubes[t][C].getPoint().y]=0:(w.rowNum[t]++,k++),w.rowNum[t]<0&&(w.rowNum[t]=0)},w=this;for(f=0;f<cfg.const.gameRowNum;f++)A(f);this.curRemovePoint=cc.v2(C,this.curRemovePoint.y),this.columnNum[C]=k,c++}else{this.scoreNodePosition=this.allCubes[C][4].getWorldPosition(),u.actionByNode(),r=!0,s=3,k=0;var N=function(t){M.allCubes[C][t].isRemove||(n++,M.columnNum[t]--),M.onAddTempContinue(s);var e=M.allCubes[C][t].removeCube(M.temp_continNum,l,t),o=M.allCubes[C][t];cc.tween(o.node).delay(.02*(cfg.const.gameColNum-t-1)).to(.2,{scale:1.2,opacity:0}).call(function(){o.setActive(!1);var a=o.getWorldPosition();u.showNewAction(a,t),e||(o.setActive(!0),o.node.scale=1,o.node.opacity=255)}).start(),e?M.pointBlockArr[M.allCubes[C][t].getPoint().x][M.allCubes[C][t].getPoint().y]=0:(M.columnNum[t]++,k++),M.columnNum[t]<0&&(M.columnNum[t]=0)},M=this;for(f=cfg.const.gameColNum-1;f>=0;f--)N(f);this.curRemovePoint=cc.v2(this.curRemovePoint.x,C),this.rowNum[C]=k,c++}}if(this.isShowBeautiful=!1,r){this.continNum++;var R=function(t){var e=T.tempCurCubeShaderArr[t];cc.tween(e.node).call(function(){a.gameEffModel.showHighLightByRemove(e.node)}).delay(1).call(function(){a.gameEffModel.hideHighLightByRemove()}).start()},T=this;for(g=0;g<this.tempCurCubeShaderArr.length;g++)R(g);this.removeType=s,app.audio.playSound("clear"),n>cfg.const.gameRowNum?(this.removeType=0,this.temp_continNum=0,this.all_continNum++,1==this.continNum&&(this.isShowBeautiful=!0,u.startEff_Beautiful())):this.all_continNum=0}else this.continNum=0,this.removeType=0,this.temp_continNum=0,this.all_continNum=0;return h>0&&window.app.event.dispatch(window.cfg.event.CHECK_GAME_OVER),0!=c&&(u.addScore(c,n),!0)},t.prototype.hasAllRemove=function(t){var e=t.length,o=0;if(9==cfg.const.gameRowNum)for(var a=0;a<9;a++){for(var i=0,n=0;n<cfg.const.Sudoku;n++)for(var c=0;c<cfg.const.Sudoku;c++){var r=n+Math.floor(a/cfg.const.Sudoku)*cfg.const.Sudoku,s=c+Math.floor(a%cfg.const.Sudoku)*cfg.const.Sudoku;1==this.pointBlockArr[r][s]&&i++}9==i&&o++}if(e>0)for(n=0;n<e;n++)t[n],cfg.const.gameRowNum,o++;return o>=2},t.prototype.onAddTempContinue=function(t){0==this.temp_continNum?this.temp_continNum++:this.removeType==t?this.temp_continNum++:this.temp_continNum=1},t.prototype.cubeInGrid=function(){if(!(this.curPoint.x<0||this.curPoint.y<0||this.curPoint.x>=cfg.const.gameRowNum||this.curPoint.y>=cfg.const.gameColNum)&&(this.CubeColorNormal(),this.tempCurCubeShader=new Array,this._saveCubeStackArr=new Array,this.curPoint.y>=this.curCubeStack.myRow-1&&cfg.const.gameColNum-this.curPoint.x>=this.curCubeStack.myColumn)){for(var t=0,e=this.curCubeStack.myCubeData,o=this.curPoint.y;o>=this.curPoint.y-this.curCubeStack.myRow+1;o--)for(var a=this.curPoint.x;a<this.curPoint.x+this.curCubeStack.myColumn;a++)if(1==e[this.curPoint.y-o][a-this.curPoint.x]){if(0!=this.allCubes[a][o].model.cubeIsPutIn)return this.tempCurCubeShader=new Array,void(this.curCubeShader=new Array);this.curCubeShader[t]=this.allCubes[a][o],t++;var i={x:this.curPoint.y-o,posX:o,y:a-this.curPoint.x,posY:a};this._saveCubeStackArr.push(i)}this.cubeRow=[].concat(this.rowNum),this.cubeColumn=[].concat(this.columnNum);var n=void 0;t=0;var c=this.deepcopy(this.pointBlockArr);for(this.removeArr=new Array,this.curRemovePoint=cc.v2(-1,-1),o=0;o<this.curCubeShader.length;o++)this.curCubeShader[o].showShader(this.spriteFrame),n=this.curCubeShader[o].point,++this.cubeRow[n.y],++this.cubeColumn[n.x],c[n.x][n.y]=1,this.cubeRow[n.y]>=cfg.const.gameRowNum&&(this.curRemovePoint.y<0&&(this.curRemovePoint=cc.v2(this.curRemovePoint.x,n.x)),this.removeArr[t]=n.y,++t),this.cubeColumn[n.x]>=cfg.const.gameColNum&&(this.curRemovePoint.x<0&&(this.curRemovePoint=cc.v2(n.y,this.curRemovePoint.y)),this.removeArr[t]=n.x+cfg.const.gameRowNum,++t);this.canRemoveShaderCube(this.removeArr,c)}},t.prototype.canRemoveShaderCube=function(t,e){if(this.curCubeStack.setAllNormalSprite(),this._saveShaderArr=new Array,t.length>0)for(var o=0,a=0;a<t.length;a++)if((o=t[a])>=cfg.const.gameRowNum){o-=cfg.const.gameRowNum;for(var i=0;i<cfg.const.gameColNum;i++){this.cubeChange.push(this.allCubes[i][o]),this.allCubes[i][o].setShaderSprite(this.spriteFrame);var n={x:i,y:o};this._saveShaderArr.push(n)}}else for(i=0;i<cfg.const.gameRowNum;i++)this.cubeChange.push(this.allCubes[o][i]),this.allCubes[o][i].setShaderSprite(this.spriteFrame),n={x:o,y:i},this._saveShaderArr.push(n);if(9==cfg.const.gameRowNum)for(var c=0;c<9;c++){var r=0;for(a=0;a<cfg.const.Sudoku;a++)for(i=0;i<cfg.const.Sudoku;i++){var s=a+Math.floor(c/cfg.const.Sudoku)*cfg.const.Sudoku,l=i+Math.floor(c%cfg.const.Sudoku)*cfg.const.Sudoku;1==e[s][l]&&r++}if(9==r)for(a=0;a<cfg.const.Sudoku;a++)for(i=0;i<cfg.const.Sudoku;i++)s=a+Math.floor(c/cfg.const.Sudoku)*cfg.const.Sudoku,l=i+Math.floor(c%cfg.const.Sudoku)*cfg.const.Sudoku,this.cubeChange.push(this.allCubes[l][s]),this.allCubes[l][s].setShaderSprite(this.spriteFrame),n={x:l,y:s},this._saveShaderArr.push(n)}this.hideAllCubeShader(),this.setAllCurCubeStack()},t.prototype.hideAllCubeShader=function(){for(var t=0;t<this.curCubeShader.length;t++)this.curCubeShader[t].setNormalSprite()},t.prototype.setAllCurCubeStack=function(){for(var t=0;t<this._saveShaderArr.length;t++)for(var e=0;e<this._saveCubeStackArr.length;e++)if(this._saveShaderArr[t].x==this._saveCubeStackArr[e].posY&&this._saveShaderArr[t].y==this._saveCubeStackArr[e].posX){var o=this._saveCubeStackArr[e].x,a=this._saveCubeStackArr[e].y;this.curCubeStack.setCubeShaderByIndex(o,a)}if(0==this._saveShaderArr.length)for(t=0;t<this.curCubeShader.length;t++)this.curCubeShader[t].setNormalSprite()},t.prototype.getIsNullCubeStackNum=function(t){for(var e=0,o=0;o<cfg.const.gameColNum;o++)for(var a=0;a<cfg.const.gameRowNum;a++)0==this.pointBlockArr[o][a]&&e++;return e<t*cfg.const.gameColNum*cfg.const.gameRowNum},t.prototype.onResuseAllCube=function(){for(var t=0;t<cfg.const.gameRowNum;t++)for(var e=0;e<cfg.const.gameColNum;e++)this.allCubes[e][t].onResuseCube()},t.prototype.onRemoveCube=function(){this.cubeRow=[].concat(this.rowNum),this.cubeColumn=[].concat(this.columnNum);for(var t=0;t<cfg.const.gameRowNum;t++)for(var e=0;e<cfg.const.gameColNum;e++)this.allCubes[e][t].onResuseCube(),t>=2&&t<cfg.const.gameRowNum-2&&e>=2&&e<cfg.const.gameColNum-2&&1==this.pointBlockArr[this.allCubes[e][t].getPoint().x][this.allCubes[e][t].getPoint().y]&&(this.allCubes[e][t].removeCube(this.temp_continNum,!1),this.pointBlockArr[this.allCubes[e][t].getPoint().x][this.allCubes[e][t].getPoint().y]=0,this.rowNum[e]--,this.rowNum[e]<0&&(this.rowNum[e]=0),this.columnNum[t]--,this.columnNum[t]<0&&(this.columnNum[t]=0))},t.prototype.setHighLighSpriteFrame=function(){if(this.cubeShaderArr)for(var t=0;t<this.cubeShaderArr.length;t++)this.cubeShaderArr[t].setCubeSpriteHighLigh()},t.prototype.showHighAction=function(t){if(t){this.cubeShaderArr=[],this.gameEffModel||(this.gameEffModel=new n.default);for(var e=0;e<t.length;e++)this.allCubes[t[e].y][t[e].x].onShowHighLight(),this.cubeShaderArr.push(this.allCubes[t[e].y][t[e].x])}},t.prototype.hideHighAction=function(){if(this.cubeShaderArr)for(var t=0;t<this.cubeShaderArr.length;t++)this.cubeShaderArr[t].onHideLighLightAction();this.cubeShaderArr=[]},t.prototype.resetHighAction=function(){if(this.cubeShaderArr)for(var t=0;t<this.cubeShaderArr.length;t++)this.cubeShaderArr[t].onShowHighLight()},t}();o.default=c,cc._RF.pop()},{"../prefabs/Cube":"Cube","../prefabs/CubeStack":"CubeStack","./BlockPuzzleEffTools":"BlockPuzzleEffTools"}],BlockPuzzleNewAITools:[function(t,e,o){"use strict";cc._RF.push(e,"2ec1fwDjatDEY3FQeYVDZ2I","BlockPuzzleNewAITools");var a,i=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,a){var i,n=arguments.length,c=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,a);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,r=c.ccclass,s=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canPutNum=0,e.isCanRemove=!1,e.noPushTime=0,e.nowStepNum=0,e.step_num=0,e.smallCubeType=new Array,e.mediumCubeType=new Array,e.bigCubeType=new Array,e.allCubeFormTypeArr=new Array,e.tempSaveCubeArr=new Array,e.allCubeFormType=null,e.BigArrByStack=new Array,e.bigCubeStackType=0,e}return i(e,t),e.prototype.randomPushArr=function(){var t=[[0,1,2],[0,2,1],[1,0,2],[1,2,0],[2,1,0],[2,0,1]];return t[app.Utils.random(0,t.length-1)]},e.prototype.initBlockData=function(t,e,o,a){this.rowNum=e,this.columnNum=o,this.allCubeByNums=new Array,this.allComboArr=new Array;for(var i=0;i<47;i++)if(35!=i&&45!=i&&46!=i&&31!=i){var n=app.map.getMapData(i);this.pointBlockArr=this.deepcopy(this.getTruePointArr(t));for(var c=!0,r=!1;c;){c=this.onPushCube(n,c);var s=this.deepcopy(this.getTruePointArr(this.pointBlockArr));if(1==c){for(var l=0;l<this.curCubeShader.length;l++)this.pointBlockArr[this.curCubeShader[l].x][this.curCubeShader[l].y]=1,s[this.curCubeShader[l].x][this.curCubeShader[l].y]=1;r=this.canRemoveCube(s);var u=this.curCubeShader;if(r)this.allComboArr.push(i);else{var h=this.randomPushArr(),p=new Array;p.push(a[h[0]]),p.push(a[h[1]]),p.push(a[h[2]]),this.getCubeStackByNowArr(p,s)&&this.allComboArr.push(i),this.pointBlockArr=this.deepcopy(this.getTruePointArr(s))}this.pointBlockArr=this.deepcopy(this.getTruePointArr(s)),this.pointBlockArr[u[0].x][u[0].y]=1}}}var d=app.Utils.random(0,this.allComboArr.length-1);return this.allComboArr[d]},e.prototype.getCubeStackByNowArr=function(t,e){var o=t[0],a=app.map.getMapData(o);this.pointBlockArr=this.deepcopy(this.getTruePointArr(e));for(var i=!0;i;){i=this.onPushCube(a,i);var n=this.deepcopy(this.getTruePointArr(this.pointBlockArr));if(1==i){for(var c=0;c<this.curCubeShader.length;c++)this.pointBlockArr[this.curCubeShader[c].x][this.curCubeShader[c].y]=1,n[this.curCubeShader[c].x][this.curCubeShader[c].y]=1;var r=this.curCubeShader;if(!this.canRemoveCube(n)){var s=t[1],l=app.map.getMapData(s);this.pointBlockArr=this.deepcopy(this.getTruePointArr(n));for(var u=!0;u;){u=this.onPushCube(l,u);var h=this.deepcopy(this.getTruePointArr(this.pointBlockArr));if(1==u){for(c=0;c<this.curCubeShader.length;c++)this.pointBlockArr[this.curCubeShader[c].x][this.curCubeShader[c].y]=1,n[this.curCubeShader[c].x][this.curCubeShader[c].y]=1;var p=this.curCubeShader;if(this.canRemoveCube(h))return!0;var d=t[2],g=app.map.getMapData(d);this.pointBlockArr=this.deepcopy(this.getTruePointArr(h));for(var f=!0;f;){f=this.onPushCube(g,f);var b=this.deepcopy(this.getTruePointArr(this.pointBlockArr));if(1==f){for(c=0;c<this.curCubeShader.length;c++)this.pointBlockArr[this.curCubeShader[c].x][this.curCubeShader[c].y]=1,b[this.curCubeShader[c].x][this.curCubeShader[c].y]=1;if(this.canRemoveCube(b))return!0}}this.pointBlockArr=this.deepcopy(this.getTruePointArr(h)),this.pointBlockArr[p[0].x][p[0].y]=1}}}this.pointBlockArr=this.deepcopy(this.getTruePointArr(n)),this.pointBlockArr[r[0].x][r[0].y]=1}}return!1},e.prototype.getCanRemoveId=function(){var t=[];for(var e in this.allCubeByNums)this.allCubeByNums[e].hasRemoveType&&t.push(this.allCubeByNums[e].id);return 0==t.length?this.getCanPushId():t[app.Utils.random(0,t.length-1)]},e.prototype.getCanPushId=function(){var t=[],e=0;for(var o in this.allCubeByNums)this.allCubeByNums[o].hasRemoveType||0==this.allCubeByNums[o].canPutNum||t.push(this.allCubeByNums[o].id);return 0!=t.length&&(e=t[app.Utils.random(0,t.length-1)]),e},e.prototype.onPushCube=function(t,e){for(var o=0,a=0,i=t.type,n=t.id,c=t.array,r=c.length,s=null==t.poxSet?0:t.poxSet,l=0,u=0;u<r;u++){var h=c[u].length;h>l&&(l=h)}switch(i){case 0:e=this.checkOneCube();break;case 1:e=this.checkHorizontal(l);break;case 2:e=this.checkVertical(r);break;case 3:e=this.checkSolidSquare(r);break;case 5:11==n&&(o=1),e=this.checkComplexity2(3,1,o);break;case 6:var p=0;17==n&&(p=2,o=1),e=this.checkComplexity2(3,p,o);break;case 9:e=this.checkComplexityByTwo(s);break;case 10:e=this.checkComplexityByTwo2(s);break;case 11:8!=n&&9!=n||(a=1),e=this.checkComplexityByTen(s,a);break;case 12:e=this.checkComplexityByThreeOne(s);break;case 13:e=this.checkComplexityByFourCube(n);break;case 14:23!=n&&24!=n||(a=1),e=this.checkComplexityByXieCube(r,a);break;case 15:27!=n&&28!=n||(a=1),e=this.checkComplexityByOtherCube(s,a);break;case 16:e=this.checkComplexityByFiveCube();break;case 17:e=this.checkComplexityByFiveCube2();break;case 18:e=this.checkComplexityByLastCube(n);break;case 19:41!=n&&43!=n||(a=1),e=this.checkComplexityByOtherCube2(n,s,a);break;case 20:e=this.canPustCheck20(n)}return e},e.prototype.deepcopy=function(t){for(var e=[],o=0,a=t.length;o<a;o++)t[o]instanceof Array?e[o]=this.deepcopy(t[o]):e[o]=t[o];return e},e.prototype.getTruePointArr=function(t){for(var e=new Array,o=0;o<cfg.const.gameRowNum;o++){e[o]=new Array;for(var a=0;a<cfg.const.gameRowNum;a++)e[o][a]=t[a][o]}return e},e.prototype.canRemoveCube=function(t){for(var e=0;e<9;e++){for(var o=0,a=0;a<cfg.const.JiuGongGeNun;a++)for(var i=0;i<cfg.const.JiuGongGeNun;i++){var n=a+Math.floor(e/cfg.const.JiuGongGeNun)*cfg.const.JiuGongGeNun,c=i+Math.floor(e%cfg.const.JiuGongGeNun)*cfg.const.JiuGongGeNun;1==t[n][c]&&o++}if(9==o)return!0}for(a=0;a<9;a++){var r=0,s=0;for(i=0;i<9;i++)1==t[a][i]&&r++,1==t[i][a]&&s++;if(9==r||9==s)return!0}return!1},e.prototype.checkOneCube=function(){for(var t=0;t<cfg.const.gameRowNum;t++)for(var e=0;e<cfg.const.gameRowNum;e++)if(this.curCubeShader=new Array,0==this.pointBlockArr[t][e]){var o={x:t,y:e};return this.curCubeShader.push(o),!0}return!1},e.prototype.checkHorizontal=function(t){for(var e=0,o=0,a=cfg.const.gameRowNum-1;a>=0;a--)if(cfg.const.gameRowNum-this.rowNum[a]>=t)for(e=0,o=0,this.curCubeShader=new Array;o<cfg.const.gameColNum;){if(0==this.pointBlockArr[a][o]){++e;var i={x:a,y:o};this.curCubeShader.push(i)}else e=0,this.curCubeShader=new Array;if(e>=t)return!0;++o}return!1},e.prototype.checkVertical=function(t){for(var e=0,o=0,a=cfg.const.gameColNum-1;a>=0;a--)if(cfg.const.gameColNum-this.columnNum[a]>=t)for(e=0,o=0,this.curCubeShader=new Array;o<cfg.const.gameColNum;){if(0==this.pointBlockArr[o][a]){++e;var i={x:o,y:a};this.curCubeShader.push(i)}else e=0,this.curCubeShader=new Array;if(e>=t)return!0;++o}return!1},e.prototype.checkSolidSquare=function(t){for(var e=0;e<cfg.const.gameRowNum-t+1;e++)for(var o=0;o<cfg.const.gameRowNum-t+1;o++){var a=0;this.curCubeShader=new Array;for(var i=0;i<t;i++)for(var n=0;n<t;n++)if(0==this.pointBlockArr[e+i][o+n]){a++;var c={x:e+i,y:o+i};this.curCubeShader.push(c)}if(a==t*t)return!0}return!1},e.prototype.checkComplexity2=function(t,e){for(var o=0;o<cfg.const.gameRowNum-1;o++)for(var a=0;a<cfg.const.gameRowNum-2;a++)if(this.curCubeShader=new Array,0==this.pointBlockArr[o][a]&&0==this.pointBlockArr[o][a+1]&&0==this.pointBlockArr[o][a+2]&&0==this.pointBlockArr[o+1][a+e])return this.curCubeShader.push({x:o,y:a}),this.curCubeShader.push({x:o,y:a+1}),this.curCubeShader.push({x:o,y:a+2}),this.curCubeShader.push({x:o+1,y:a+e}),!0;return!1},e.prototype.checkComplexityByTwo=function(t){for(var e=0;e<cfg.const.gameRowNum-2;e++)for(var o=0;o<cfg.const.gameRowNum-1;o++)if(this.curCubeShader=new Array,0==this.pointBlockArr[e][o]&&0==this.pointBlockArr[e+1][o]&&0==this.pointBlockArr[e+2][o]&&0==this.pointBlockArr[e+t][o+1])return this.curCubeShader.push({x:e,y:o}),this.curCubeShader.push({x:e+1,y:o}),this.curCubeShader.push({x:e+2,y:o}),this.curCubeShader.push({x:e+t,y:o+1}),!0;return!1},e.prototype.checkComplexityByTwo2=function(t){for(var e=0;e<cfg.const.gameRowNum-2;e++)for(var o=0;o<cfg.const.gameRowNum-1;o++)if(this.curCubeShader=new Array,0==this.pointBlockArr[e][o+1]&&0==this.pointBlockArr[e+1][o+1]&&0==this.pointBlockArr[e+2][o+1]&&0==this.pointBlockArr[e+t][o])return this.curCubeShader.push({x:e,y:o+1}),this.curCubeShader.push({x:e+1,y:o+1}),this.curCubeShader.push({x:e+2,y:o+1}),this.curCubeShader.push({x:e+t,y:o}),!0;return!1},e.prototype.checkComplexityByTen=function(t,e){if(1==e){for(var o=0;o<cfg.const.gameRowNum-1;o++)for(var a=0;a<cfg.const.gameRowNum-1;a++)if(this.curCubeShader=new Array,0==this.pointBlockArr[o][a]&&0==this.pointBlockArr[o][a+1]&&0==this.pointBlockArr[o+1][a+t])return this.curCubeShader.push({x:o,y:a}),this.curCubeShader.push({x:o,y:a+1}),this.curCubeShader.push({x:o+1,y:a+t}),!0}else for(o=0;o<cfg.const.gameRowNum-1;o++)for(a=0;a<cfg.const.gameRowNum-1;a++)if(this.curCubeShader=new Array,0==this.pointBlockArr[o+1][a]&&0==this.pointBlockArr[o+1][a+1]&&0==this.pointBlockArr[o][a+t])return this.curCubeShader.push({x:o+1,y:a}),this.curCubeShader.push({x:o+1,y:a+1}),this.curCubeShader.push({x:o,y:a+t}),!0;return!1},e.prototype.checkComplexityByThreeOne=function(t){for(var e=0;e<cfg.const.gameRowNum-1;e++)for(var o=0;o<cfg.const.gameRowNum-2;o++)if(this.curCubeShader=new Array,0==this.pointBlockArr[e+1][o]&&0==this.pointBlockArr[e+1][o+1]&&0==this.pointBlockArr[e+1][o+2]&&0==this.pointBlockArr[e][o+t])return this.curCubeShader.push({x:e+1,y:o}),this.curCubeShader.push({x:e+1,y:o+1}),this.curCubeShader.push({x:e+1,y:o+2}),this.curCubeShader.push({x:e,y:o+t}),!0;return!1},e.prototype.checkComplexityByFourCube=function(t){if(18==t){for(var e=0;e<cfg.const.gameRowNum-1;e++)for(var o=0;o<cfg.const.gameRowNum-2;o++)if(this.curCubeShader=new Array,0==this.pointBlockArr[e][o]&&0==this.pointBlockArr[e][o+1]&&0==this.pointBlockArr[e+1][o+1]&&0==this.pointBlockArr[e+1][o+2])return this.curCubeShader.push({x:e,y:o}),this.curCubeShader.push({x:e,y:o+1}),this.curCubeShader.push({x:e+1,y:o+1}),this.curCubeShader.push({x:e+1,y:o+2}),!0}else if(19==t){for(e=0;e<cfg.const.gameRowNum-1;e++)for(o=0;o<cfg.const.gameRowNum-2;o++)if(this.curCubeShader=new Array,0==this.pointBlockArr[e+1][o]&&0==this.pointBlockArr[e][o+1]&&0==this.pointBlockArr[e+1][o+1]&&0==this.pointBlockArr[e][o+2])return this.curCubeShader.push({x:e+1,y:o}),this.curCubeShader.push({x:e,y:o+1}),this.curCubeShader.push({x:e+1,y:o+1}),this.curCubeShader.push({x:e,y:o+2}),!0}else if(20==t){for(e=0;e<cfg.const.gameRowNum-2;e++)for(o=0;o<cfg.const.gameRowNum-1;o++)if(this.curCubeShader=new Array,0==this.pointBlockArr[e+1][o]&&0==this.pointBlockArr[e+2][o]&&0==this.pointBlockArr[e+1][o+1]&&0==this.pointBlockArr[e][o+1])return this.curCubeShader.push({x:e+1,y:o}),this.curCubeShader.push({x:e+2,y:o}),this.curCubeShader.push({x:e+1,y:o+1}),this.curCubeShader.push({x:e,y:o+1}),!0}else for(e=0;e<cfg.const.gameRowNum-2;e++)for(o=0;o<cfg.const.gameRowNum-1;o++)if(this.curCubeShader=new Array,0==this.pointBlockArr[e][o]&&0==this.pointBlockArr[e+1][o]&&0==this.pointBlockArr[e+1][o+1]&&0==this.pointBlockArr[e+2][o+1])return this.curCubeShader.push({x:e,y:o}),this.curCubeShader.push({x:e+1,y:o}),this.curCubeShader.push({x:e+1,y:o+1}),this.curCubeShader.push({x:e+2,y:o+1}),!0;return!1},e.prototype.checkComplexityByXieCube=function(t,e){if(1==e)for(var o=0;o<cfg.const.gameRowNum-t+1;o++)for(var a=0;a<cfg.const.gameRowNum-t+1;a++){var i=0;this.curCubeShader=new Array;for(var n=0;n<t;n++)0==this.pointBlockArr[o+n][a+n]&&(this.curCubeShader.push({x:o+n,y:a+n}),i++);if(i==t)return!0}else for(o=0;o<cfg.const.gameRowNum-t+1;o++)for(a=0;a<cfg.const.gameRowNum-t+1;a++){i=0;var c=0;for(this.curCubeShader=new Array,n=t-1;n>=0;n--)0==this.pointBlockArr[o+n][a+c]&&(this.curCubeShader.push({x:o+n,y:a+c}),i++),c++;if(i==t)return!0}return!1},e.prototype.checkComplexityByOtherCube=function(t,e){if(1==e){for(var o=0;o<cfg.const.gameRowNum-2;o++)for(var a=0;a<cfg.const.gameRowNum-2;a++)if(this.curCubeShader=new Array,0==this.pointBlockArr[o+2][a]&&0==this.pointBlockArr[o+2][a+1]&&0==this.pointBlockArr[o+2][a+2]&&0==this.pointBlockArr[o][a+t]&&0==this.pointBlockArr[o+1][a+t])return this.curCubeShader.push({x:o+2,y:a}),this.curCubeShader.push({x:o+2,y:a+1}),this.curCubeShader.push({x:o+2,y:a+2}),this.curCubeShader.push({x:o,y:a+t}),this.curCubeShader.push({x:o+1,y:a+t}),!0}else for(o=0;o<cfg.const.gameRowNum-2;o++)for(a=0;a<cfg.const.gameRowNum-2;a++)if(this.curCubeShader=new Array,0==this.pointBlockArr[o][a]&&0==this.pointBlockArr[o][a+1]&&0==this.pointBlockArr[o][a+2]&&0==this.pointBlockArr[o+1][a+t]&&0==this.pointBlockArr[o+2][a+t])return this.curCubeShader.push({x:o,y:a}),this.curCubeShader.push({x:o,y:a+1}),this.curCubeShader.push({x:o,y:a+2}),this.curCubeShader.push({x:o+1,y:a+t}),this.curCubeShader.push({x:o+2,y:a+t}),!0;return!1},e.prototype.checkComplexityByOtherCube2=function(t,e,o){if(1==o){for(var a=0;a<cfg.const.gameRowNum-2;a++)for(var i=0;i<cfg.const.gameRowNum-2;i++)if(this.curCubeShader=new Array,0==this.pointBlockArr[a+2][i+e]&&0==this.pointBlockArr[a+1][i]&&0==this.pointBlockArr[a+1][i+1]&&0==this.pointBlockArr[a+1][i+2]&&0==this.pointBlockArr[a][i+e])return this.curCubeShader.push({x:a+2,y:i+e}),this.curCubeShader.push({x:a+1,y:i}),this.curCubeShader.push({x:a+1,y:i+1}),this.curCubeShader.push({x:a+1,y:i+2}),this.curCubeShader.push({x:a,y:i+e}),!0}else if(44==t){for(a=0;a<cfg.const.gameRowNum-2;a++)for(i=0;i<cfg.const.gameRowNum-2;i++)if(this.curCubeShader=new Array,0==this.pointBlockArr[a][i]&&0==this.pointBlockArr[a][i+1]&&0==this.pointBlockArr[a][i+2]&&0==this.pointBlockArr[a+1][i+1]&&0==this.pointBlockArr[a+2][i+1])return this.curCubeShader.push({x:a,y:i}),this.curCubeShader.push({x:a,y:i+1}),this.curCubeShader.push({x:a,y:i+2}),this.curCubeShader.push({x:a+1,y:i+1}),this.curCubeShader.push({x:a+2,y:i+1}),!0}else for(a=0;a<cfg.const.gameRowNum-2;a++)for(i=0;i<cfg.const.gameRowNum-2;i++)if(this.curCubeShader=new Array,0==this.pointBlockArr[a][i+1]&&0==this.pointBlockArr[a+1][i+1]&&0==this.pointBlockArr[a+2][i]&&0==this.pointBlockArr[a+2][i+1]&&0==this.pointBlockArr[a+2][i+2])return this.curCubeShader.push({x:a,y:i+1}),this.curCubeShader.push({x:a+1,y:i+1}),this.curCubeShader.push({x:a+2,y:i}),this.curCubeShader.push({x:a+2,y:i+1}),this.curCubeShader.push({x:a+2,y:i+2}),!0;return!1},e.prototype.checkComplexityByFiveCube=function(){for(var t=0;t<cfg.const.gameRowNum-2;t++)for(var e=0;e<cfg.const.gameRowNum-2;e++)if(this.curCubeShader=new Array,0==this.pointBlockArr[t][e]&&0==this.pointBlockArr[t+2][e]&&0==this.pointBlockArr[t][e+2]&&0==this.pointBlockArr[t+1][e+1]&&0==this.pointBlockArr[t+2][e+2])return this.curCubeShader.push({x:t,y:e}),this.curCubeShader.push({x:t+2,y:e}),this.curCubeShader.push({x:t,y:e+2}),this.curCubeShader.push({x:t+1,y:e+1}),this.curCubeShader.push({x:t+2,y:e+2}),!0;return!1},e.prototype.checkComplexityByFiveCube2=function(){for(var t=0;t<cfg.const.gameRowNum-2;t++)for(var e=0;e<cfg.const.gameRowNum-2;e++)if(this.curCubeShader=new Array,0==this.pointBlockArr[t+1][e]&&0==this.pointBlockArr[t][e+1]&&0==this.pointBlockArr[t+1][e+1]&&0==this.pointBlockArr[t+2][e+1]&&0==this.pointBlockArr[t+1][e+2])return this.curCubeShader.push({x:t+1,y:e}),this.curCubeShader.push({x:t,y:e+1}),this.curCubeShader.push({x:t+1,y:e+1}),this.curCubeShader.push({x:t+2,y:e+1}),this.curCubeShader.push({x:t+1,y:e+2}),!0;return!1},e.prototype.checkComplexityByLastCube=function(t){if(37==t){for(var e=0;e<cfg.const.gameRowNum-2;e++)for(var o=0;o<cfg.const.gameRowNum-1;o++)if(this.curCubeShader=new Array,0==this.pointBlockArr[e][o]&&0==this.pointBlockArr[e][o+1]&&0==this.pointBlockArr[e+1][o]&&0==this.pointBlockArr[e+2][o]&&0==this.pointBlockArr[e+2][o+1])return this.curCubeShader.push({x:e,y:o}),this.curCubeShader.push({x:e,y:o+1}),this.curCubeShader.push({x:e+1,y:o}),this.curCubeShader.push({x:e+2,y:o}),this.curCubeShader.push({x:e+2,y:o+1}),!0}else if(38==t){for(e=0;e<cfg.const.gameRowNum-1;e++)for(o=0;o<cfg.const.gameRowNum-2;o++)if(this.curCubeShader=new Array,0==this.pointBlockArr[e][o]&&0==this.pointBlockArr[e][o+2]&&0==this.pointBlockArr[e+1][o]&&0==this.pointBlockArr[e+1][o+1]&&0==this.pointBlockArr[e+1][o+2])return this.curCubeShader.push({x:e,y:o}),this.curCubeShader.push({x:e,y:o+2}),this.curCubeShader.push({x:e+1,y:o}),this.curCubeShader.push({x:e+1,y:o+1}),this.curCubeShader.push({x:e+1,y:o+2}),!0}else if(39==t){for(e=0;e<cfg.const.gameRowNum-2;e++)for(o=0;o<cfg.const.gameRowNum-1;o++)if(this.curCubeShader=new Array,0==this.pointBlockArr[e][o]&&0==this.pointBlockArr[e][o+1]&&0==this.pointBlockArr[e+1][o+1]&&0==this.pointBlockArr[e+2][o]&&0==this.pointBlockArr[e+2][o+1])return this.curCubeShader.push({x:e,y:o}),this.curCubeShader.push({x:e,y:o+1}),this.curCubeShader.push({x:e+1,y:o+1}),this.curCubeShader.push({x:e+2,y:o}),this.curCubeShader.push({x:e+2,y:o+1}),!0}else for(e=0;e<cfg.const.gameRowNum-1;e++)for(o=0;o<cfg.const.gameRowNum-2;o++)if(this.curCubeShader=new Array,0==this.pointBlockArr[e][o]&&0==this.pointBlockArr[e][o+1]&&0==this.pointBlockArr[e][o+2]&&0==this.pointBlockArr[e+1][o]&&0==this.pointBlockArr[e+1][o+2])return this.curCubeShader.push({x:e,y:o}),this.curCubeShader.push({x:e,y:o+1}),this.curCubeShader.push({x:e,y:o+2}),this.curCubeShader.push({x:e+1,y:o}),this.curCubeShader.push({x:e+1,y:o+2}),!0;return!1},e.prototype.canPustCheck20=function(t){if(50==t){for(var e=0;e<cfg.const.gameRowNum-2;e++)for(var o=0;o<cfg.const.gameRowNum-2;o++)if(0==this.pointBlockArr[e][o]&&0==this.pointBlockArr[e][o+1]&&0==this.pointBlockArr[e][o+2]&&0==this.pointBlockArr[e+1][o+1]&&0==this.pointBlockArr[e+2][o]&&0==this.pointBlockArr[e+2][o+1]&&0==this.pointBlockArr[e+2][o+2])return this.curCubeShader.push({x:e,y:o}),this.curCubeShader.push({x:e,y:o+1}),this.curCubeShader.push({x:e,y:o+2}),this.curCubeShader.push({x:e+1,y:o+1}),this.curCubeShader.push({x:e+2,y:o}),this.curCubeShader.push({x:e+2,y:o+1}),this.curCubeShader.push({x:e+2,y:o+2}),!0}else for(e=0;e<cfg.const.gameRowNum-2;e++)for(o=0;o<cfg.const.gameRowNum-2;o++)if(0==this.pointBlockArr[e][o]&&0==this.pointBlockArr[e][o+2]&&0==this.pointBlockArr[e+1][o]&&0==this.pointBlockArr[e+1][o+1]&&0==this.pointBlockArr[e+1][o+2]&&0==this.pointBlockArr[e+2][o]&&0==this.pointBlockArr[e+2][o+2])return this.curCubeShader.push({x:e,y:o}),this.curCubeShader.push({x:e,y:o+2}),this.curCubeShader.push({x:e+1,y:o}),this.curCubeShader.push({x:e+1,y:o+1}),this.curCubeShader.push({x:e+1,y:o+2}),this.curCubeShader.push({x:e+2,y:o}),this.curCubeShader.push({x:e+2,y:o+2}),!0;return!1},n([r],e)}(cc.Component));o.default=s,cc._RF.pop()},{}],BlockPuzzleRulerTools:[function(t,e,o){"use strict";cc._RF.push(e,"928995MFwlDErnTwVZH/rSI","BlockPuzzleRulerTools"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function t(){}return t.prototype.initData=function(t,e,o){this.rowNum=t,this.columnNum=e,this.allCubes=o},t.prototype.checkGame=function(t,e){var o=!1,a=0;if(t.isAlive||e){switch(t.pType){case 0:o=!0;break;case 1:o=this.checkHorizontal(t.myColumn);break;case 2:o=this.checkVertical(t.myRow);break;case 3:o=this.checkSolidSquare(t.myRow);break;case 4:o=this.checkComplexity1(2);break;case 5:o=this.checkComplexityByThreeOneOther(1);break;case 6:o=this.checkComplexityByThreeOneOther(0);break;case 9:o=this.checkComplexityByTwo(t.poxSet);break;case 10:o=this.checkComplexityByTwo2(t.poxSet);break;case 11:a=8==t.cubeId||9==t.cubeId?1:0,o=this.checkComplexityByTen(t.poxSet,a);break;case 12:o=this.checkComplexityByThreeOne(t.poxSet);break;case 13:o=this.checkComplexityByFourCube(t.cubeId);break;case 14:a=23==t.cubeId||24==t.cubeId?1:0,o=this.checkComplexityByXieCube(t.myRow,a);break;case 15:a=27==t.cubeId||28==t.cubeId?1:0,o=this.checkComplexityByOtherCube(t.poxSet,a);break;case 16:o=this.checkComplexityByFiveCube();break;case 17:o=this.checkComplexityByFiveCube2();break;case 18:o=this.checkComplexityByLastCube(t.cubeId);break;case 19:a=41==t.cubeId||43==t.cubeId?1:0,o=this.checkComplexityByOtherCube2(t.cubeId,t.poxSet,a);break;case 20:o=this.canPustCheck20(t.cubeId)}return o}return o},t.prototype.checkHorizontal=function(t){for(var e=0,o=0,a=cfg.const.gameRowNum-1;a>=0;a--){if(0==this.rowNum[a]||this.rowNum[a]<=Math.floor((cfg.const.gameRowNum-t)/t))return!0;if(cfg.const.gameRowNum-this.rowNum[a]>=t)for(e=0,o=0;o<cfg.const.gameColNum;){if(0==this.allCubes[a][o].isPutIn?++e:e=0,e>=t)return!0;++o}}return!1},t.prototype.checkVertical=function(t){for(var e=0,o=0,a=cfg.const.gameColNum-1;a>=0;a--){if(0==this.columnNum[a]||this.columnNum[a]<=Math.floor((cfg.const.gameColNum-t)/t))return!0;if(cfg.const.gameColNum-this.columnNum[a]>=t)for(e=0,o=0;o<cfg.const.gameColNum;){if(0==this.allCubes[o][a].isPutIn?++e:e=0,e>=t)return!0;++o}}return!1},t.prototype.checkSolidSquare=function(t){for(var e=0;e<cfg.const.gameRowNum-t+1;e++)for(var o=0;o<cfg.const.gameRowNum-t+1;o++){for(var a=0,i=0;i<t;i++)for(var n=0;n<t;n++)0==this.allCubes[e+i][o+n].isPutIn&&a++;if(a==t*t)return!0}return!1},t.prototype.checkComplexity1=function(t){for(var e=0,o=cfg.const.gameRowNum-1;o>=0;o--)if(0==this.rowNum[o]||this.rowNum[o]<=Math.floor((cfg.const.gameRowNum-t)/t)){if(++e>=t)return!0}else e=0;for(o=cfg.const.gameRowNum-1;o>0;o--)if(cfg.const.gameColNum-this.rowNum[o]>=t)for(var a=0,i=!0;a<cfg.const.gameColNum-1;){i=!0;for(var n=0;n<t;n++)if(1==this.allCubes[o][n+a].isPutIn){a=n+a,i=!1;break}if(i&&0==this.allCubes[o-1][a].isPutIn)return!0;++a}return!1},t.prototype.checkComplexityByTwo=function(t){for(var e=0;e<cfg.const.gameRowNum-2;e++)for(var o=0;o<cfg.const.gameRowNum-1;o++)if(0==this.allCubes[e][o].isPutIn&&0==this.allCubes[e+1][o].isPutIn&&0==this.allCubes[e+2][o].isPutIn&&0==this.allCubes[e+t][o+1].isPutIn)return!0;return!1},t.prototype.checkComplexityByTwo2=function(t){for(var e=0;e<cfg.const.gameRowNum-2;e++)for(var o=0;o<cfg.const.gameRowNum-1;o++)if(0==this.allCubes[e][o+1].isPutIn&&0==this.allCubes[e+1][o+1].isPutIn&&0==this.allCubes[e+2][o+1].isPutIn&&0==this.allCubes[e+t][o].isPutIn)return!0;return!1},t.prototype.checkComplexityByTen=function(t,e){if(1==e){for(var o=0;o<cfg.const.gameRowNum-1;o++)for(var a=0;a<cfg.const.gameRowNum-1;a++)if(0==this.allCubes[o][a].isPutIn&&0==this.allCubes[o][a+1].isPutIn&&0==this.allCubes[o+1][a+t].isPutIn)return!0}else for(o=0;o<cfg.const.gameRowNum-1;o++)for(a=0;a<cfg.const.gameRowNum-1;a++)if(0==this.allCubes[o+1][a].isPutIn&&0==this.allCubes[o+1][a+1].isPutIn&&0==this.allCubes[o][a+t].isPutIn)return!0;return!1},t.prototype.checkComplexityByThreeOneOther=function(t){for(var e=0;e<cfg.const.gameRowNum-1;e++)for(var o=0;o<cfg.const.gameRowNum-2;o++)if(0==this.allCubes[e][o].isPutIn&&0==this.allCubes[e][o+1].isPutIn&&0==this.allCubes[e][o+2].isPutIn&&0==this.allCubes[e+1][o+t].isPutIn)return!0;return!1},t.prototype.checkComplexityByThreeOne=function(t){for(var e=0;e<cfg.const.gameRowNum-1;e++)for(var o=0;o<cfg.const.gameRowNum-2;o++)if(0==this.allCubes[e+1][o].isPutIn&&0==this.allCubes[e+1][o+1].isPutIn&&0==this.allCubes[e+1][o+2].isPutIn&&0==this.allCubes[e][o+t].isPutIn)return!0;return!1},t.prototype.checkComplexityByFourCube=function(t){if(18==t){for(var e=0;e<cfg.const.gameRowNum-1;e++)for(var o=0;o<cfg.const.gameRowNum-2;o++)if(0==this.allCubes[e][o].isPutIn&&0==this.allCubes[e][o+1].isPutIn&&0==this.allCubes[e+1][o+1].isPutIn&&0==this.allCubes[e+1][o+2].isPutIn)return!0}else if(19==t){for(e=0;e<cfg.const.gameRowNum-1;e++)for(o=0;o<cfg.const.gameRowNum-2;o++)if(0==this.allCubes[e+1][o].isPutIn&&0==this.allCubes[e][o+1].isPutIn&&0==this.allCubes[e+1][o+1].isPutIn&&0==this.allCubes[e][o+2].isPutIn)return!0}else if(20==t){for(e=0;e<cfg.const.gameRowNum-2;e++)for(o=0;o<cfg.const.gameRowNum-1;o++)if(0==this.allCubes[e+1][o].isPutIn&&0==this.allCubes[e+2][o].isPutIn&&0==this.allCubes[e+1][o+1].isPutIn&&0==this.allCubes[e][o+1].isPutIn)return!0}else if(21==t)for(e=0;e<cfg.const.gameRowNum-2;e++)for(o=0;o<cfg.const.gameRowNum-1;o++)if(0==this.allCubes[e][o].isPutIn&&0==this.allCubes[e+1][o].isPutIn&&0==this.allCubes[e+1][o+1].isPutIn&&0==this.allCubes[e+2][o+1].isPutIn)return!0;return!1},t.prototype.checkComplexityByXieCube=function(t,e){if(1==e)for(var o=0;o<cfg.const.gameRowNum-t+1;o++)for(var a=0;a<cfg.const.gameRowNum-t+1;a++){for(var i=0,n=0;n<t;n++)0==this.allCubes[o+n][a+n].isPutIn&&i++;if(i==t)return!0}else for(o=0;o<cfg.const.gameRowNum-t+1;o++)for(a=0;a<cfg.const.gameRowNum-t+1;a++){i=0;var c=0;for(n=t-1;n>=0;n--)0==this.allCubes[o+n][a+c].isPutIn&&i++,c++;if(i==t)return!0}return!1},t.prototype.checkComplexityByOtherCube=function(t,e){if(1==e){for(var o=0;o<cfg.const.gameRowNum-2;o++)for(var a=0;a<cfg.const.gameRowNum-2;a++)if(0==this.allCubes[o+2][a].isPutIn&&0==this.allCubes[o+2][a+1].isPutIn&&0==this.allCubes[o+2][a+2].isPutIn&&0==this.allCubes[o][a+t].isPutIn&&0==this.allCubes[o+1][a+t].isPutIn)return!0}else for(o=0;o<cfg.const.gameRowNum-2;o++)for(a=0;a<cfg.const.gameRowNum-2;a++)if(0==this.allCubes[o][a].isPutIn&&0==this.allCubes[o][a+1].isPutIn&&0==this.allCubes[o][a+2].isPutIn&&0==this.allCubes[o+1][a+t].isPutIn&&0==this.allCubes[o+2][a+t].isPutIn)return!0;return!1},t.prototype.checkComplexityByOtherCube2=function(t,e,o){if(1==o){for(var a=0;a<cfg.const.gameRowNum-2;a++)for(var i=0;i<cfg.const.gameRowNum-2;i++)if(0==this.allCubes[a+2][i+e].isPutIn&&0==this.allCubes[a+1][i].isPutIn&&0==this.allCubes[a+1][i+1].isPutIn&&0==this.allCubes[a+1][i+2].isPutIn&&0==this.allCubes[a][i+e].isPutIn)return!0}else if(44==t){for(a=0;a<cfg.const.gameRowNum-2;a++)for(i=0;i<cfg.const.gameRowNum-2;i++)if(0==this.allCubes[a][i].isPutIn&&0==this.allCubes[a][i+1].isPutIn&&0==this.allCubes[a][i+2].isPutIn&&0==this.allCubes[a+1][i+1].isPutIn&&0==this.allCubes[a+2][i+1].isPutIn)return!0}else for(a=0;a<cfg.const.gameRowNum-2;a++)for(i=0;i<cfg.const.gameRowNum-2;i++)if(0==this.allCubes[a][i+1].isPutIn&&0==this.allCubes[a+1][i+1].isPutIn&&0==this.allCubes[a+2][i].isPutIn&&0==this.allCubes[a+2][i+1].isPutIn&&0==this.allCubes[a+2][i+2].isPutIn)return!0;return!1},t.prototype.checkComplexityByFiveCube=function(){for(var t=0;t<cfg.const.gameRowNum-2;t++)for(var e=0;e<cfg.const.gameRowNum-2;e++)if(0==this.allCubes[t][e].isPutIn&&0==this.allCubes[t+2][e].isPutIn&&0==this.allCubes[t][e+2].isPutIn&&0==this.allCubes[t+1][e+1].isPutIn&&0==this.allCubes[t+2][e+2].isPutIn)return!0;return!1},t.prototype.checkComplexityByFiveCube2=function(){for(var t=0;t<cfg.const.gameRowNum-2;t++)for(var e=0;e<cfg.const.gameRowNum-2;e++)if(0==this.allCubes[t+1][e].isPutIn&&0==this.allCubes[t][e+1].isPutIn&&0==this.allCubes[t+1][e+1].isPutIn&&0==this.allCubes[t+2][e+1].isPutIn&&0==this.allCubes[t+1][e+2].isPutIn)return!0;return!1},t.prototype.checkComplexityByLastCube=function(t){if(37==t){for(var e=0;e<cfg.const.gameRowNum-2;e++)for(var o=0;o<cfg.const.gameRowNum-1;o++)if(0==this.allCubes[e][o].isPutIn&&0==this.allCubes[e][o+1].isPutIn&&0==this.allCubes[e+1][o].isPutIn&&0==this.allCubes[e+2][o].isPutIn&&0==this.allCubes[e+2][o+1].isPutIn)return!0}else if(38==t){for(e=0;e<cfg.const.gameRowNum-1;e++)for(o=0;o<cfg.const.gameRowNum-2;o++)if(0==this.allCubes[e][o].isPutIn&&0==this.allCubes[e][o+2].isPutIn&&0==this.allCubes[e+1][o].isPutIn&&0==this.allCubes[e+1][o+1].isPutIn&&0==this.allCubes[e+1][o+2].isPutIn)return!0}else if(39==t){for(e=0;e<cfg.const.gameRowNum-2;e++)for(o=0;o<cfg.const.gameRowNum-1;o++)if(0==this.allCubes[e][o].isPutIn&&0==this.allCubes[e][o+1].isPutIn&&0==this.allCubes[e+1][o+1].isPutIn&&0==this.allCubes[e+2][o].isPutIn&&0==this.allCubes[e+2][o+1].isPutIn)return!0}else for(e=0;e<cfg.const.gameRowNum-1;e++)for(o=0;o<cfg.const.gameRowNum-2;o++)if(0==this.allCubes[e][o].isPutIn&&0==this.allCubes[e][o+1].isPutIn&&0==this.allCubes[e][o+2].isPutIn&&0==this.allCubes[e+1][o].isPutIn&&0==this.allCubes[e+1][o+2].isPutIn)return!0;return!1},t.prototype.canPustCheck20=function(t){if(50==t){for(var e=0;e<cfg.const.gameRowNum-2;e++)for(var o=0;o<cfg.const.gameRowNum-2;o++)if(0==this.allCubes[e][o].isPutIn&&0==this.allCubes[e][o+1].isPutIn&&0==this.allCubes[e][o+2].isPutIn&&0==this.allCubes[e+1][o+1].isPutIn&&0==this.allCubes[e+2][o].isPutIn&&0==this.allCubes[e+2][o+1].isPutIn&&0==this.allCubes[e+2][o+2].isPutIn)return!0}else for(e=0;e<cfg.const.gameRowNum-2;e++)for(o=0;o<cfg.const.gameRowNum-2;o++)if(0==this.allCubes[e][o].isPutIn&&0==this.allCubes[e][o+2].isPutIn&&0==this.allCubes[e+1][o].isPutIn&&0==this.allCubes[e+1][o+1].isPutIn&&0==this.allCubes[e+1][o+2].isPutIn&&0==this.allCubes[e+2][o].isPutIn&&0==this.allCubes[e+2][o+2].isPutIn)return!0;return!1},t}();o.default=a,cc._RF.pop()},{}],ChallengeRecordView:[function(t,e,o){"use strict";cc._RF.push(e,"24fe7g4HVRMrrc106+o2VdJ","ChallengeRecordView");var a,i=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,a){var i,n=arguments.length,c=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,a);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../utils/AdManageTools"),r=t("../utils/BlockPuzzleLogEvent"),s=cc._decorator,l=s.ccclass,u=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.action_node=null,e.bgMask=null,e.score_text=null,e.score_text1=null,e.btn_home=null,e.btn_replay=null,e.btn_back=null,e.score_Node=null,e.success_node=null,e.failed_node=null,e.logEventModel=null,e.tranLabel=new Array,e.curDR=null,e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.logEventModel=new r.default,app.event.on(cfg.event.CHANGE_LANGUAGE,this.onChangeLanguage,this),this.bgMask.on(cc.Node.EventType.TOUCH_END,function(){cc.log("TOUCH_END1")}),this.AdManageTools=new c.default,cc.view.setResizeCallback(function(){return t.resize()}),this.resize(),app.Utils.onViewAction(this.action_node)},e.prototype.resize=function(){var t=cc.find("Canvas").getComponent(cc.Canvas);this.curDR||(this.curDR=t.designResolution);var e=this.curDR,o=cc.view.getFrameSize(),a=o.width,i=o.height,n=a,c=i;a/i>e.width/e.height?n=(c=e.height)*a/i:c=i/a*(n=e.width),t.designResolution=cc.size(n,c),t.node.width=n,t.node.height=c,t.node.emit("resize"),this.bgMask.width=n,this.bgMask.height=c,this.bgMask.emit("resize")},e.prototype.onBackClick=function(){this.node.removeFromParent(),app.event.dispatch(cfg.event.GOTO_CHALLENGEVIEW),app.event.dispatch(cfg.event.CHALLENGE_BACK),this.AdManageTools.showInterstitialAd(),app.LogEvent.showLogEventWithName("Challenge_Back_Click")},e.prototype.onHomeClick=function(){this.node.removeFromParent(),app.event.dispatch(cfg.event.BACK_HOME),this.AdManageTools.showInterstitialAd(),app.LogEvent.showLogEventWithName("Challenge_Back_Click")},e.prototype.initRecordViewData=function(t,e){this.hasChageIntener=!1,this.btn_back.node.active=!0,this.success_node.active=!1,this.failed_node.active=!1,t?(this.btn_replay.node.active=!1,this.score_Node.active=!0,this.success_node.active=!0,this.btn_home.node.active=!0,cfg.const.maxChallengeNum++,5==cfg.const.maxChallengeNum?cfg.const.coinNum=cfg.const.coinNum+50:15==cfg.const.maxChallengeNum?cfg.const.coinNum=cfg.const.coinNum+150:20==cfg.const.maxChallengeNum?cfg.const.coinNum=cfg.const.coinNum+200:30==cfg.const.maxChallengeNum&&(cfg.const.coinNum=cfg.const.coinNum+300),app.Utils.saveStringToLocal("maxChallengeNum",cfg.const.maxChallengeNum),cfg.const.coinNum=cfg.const.coinNum+150,app.event.dispatch(cfg.event.CHANGE_ROTATENUM),app.Utils.saveStringToLocal("mainGame_coinNum",cfg.const.coinNum)):(this.btn_replay.node.active=!0,this.score_Node.active=!1,this.failed_node.active=!0,this.btn_home.node.active=!1),this.score_text.string=e+"/500",this.score_text1.string=e+"/500",this.onChangeLanguage(t)},e.prototype.onReplayClick=function(){app.audio.playSound("button"),this.node.removeFromParent(),this.logEventModel.saveScoreByMonth(cfg.const.nowScore,cfg.const.myHighScore),app.event.dispatch(cfg.event.NEW_GAME_START),app.event.dispatch(cfg.event.SHOW_BANNER),this.AdManageTools.showInterstitialAd(),app.LogEvent.showLogEventWithName("Challenge_Replay_Click")},e.prototype.onChangeLanguage=function(t){var e=["UI-Daily_2","UI-Daily_3","UI_2"];t||(e=["UI-new4","UI-Daily_3","UI_2"]);for(var o=0;o<this.tranLabel.length;o++){var a=app.tranLanguage.loadStrByKey(e[o]);a&&(this.tranLabel[o].getComponent(cc.Label).string=a)}},n([u(cc.Node)],e.prototype,"action_node",void 0),n([u(cc.Node)],e.prototype,"bgMask",void 0),n([u(cc.Label)],e.prototype,"score_text",void 0),n([u(cc.Label)],e.prototype,"score_text1",void 0),n([u(cc.Button)],e.prototype,"btn_home",void 0),n([u(cc.Button)],e.prototype,"btn_replay",void 0),n([u(cc.Button)],e.prototype,"btn_back",void 0),n([u(cc.Node)],e.prototype,"score_Node",void 0),n([u(cc.Node)],e.prototype,"success_node",void 0),n([u(cc.Node)],e.prototype,"failed_node",void 0),n([u([cc.Label])],e.prototype,"tranLabel",void 0),n([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../utils/AdManageTools":"AdManageTools","../utils/BlockPuzzleLogEvent":"BlockPuzzleLogEvent"}],ChallengeView:[function(t,e,o){"use strict";cc._RF.push(e,"ce3fcJEEa5P8ZnDXTnLFo61","ChallengeView");var a,i=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,a){var i,n=arguments.length,c=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,a);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../utils/BlockPuzzleCubeStackTools"),r=t("../utils/BlockPuzzleLogEvent"),s=t("../utils/BlockPuzzleEffTools"),l=t("../utils/BlockPuzzleMapTools"),u=t("./CubeStack"),h=t("../utils/AdManageTools"),p=t("../utils/BlockPuzzleRulerTools"),d=t("../utils/newBlockStyleAITools"),g=cc._decorator,f=g.ccclass,b=g.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameBgNode=null,e.AdManageTools=null,e.cubeStackBgNode=null,e.bgMask=null,e.next_node=null,e.save_node=null,e.scoreNode=null,e.scoreTxt=null,e.addScoreText=null,e.maxScore_text=null,e.btn_rotate=null,e.blockAiTools=null,e.addScoreNode=null,e.addScore_text=null,e.rotate_num=null,e.random_num=null,e.target_node=null,e.stepNums=0,e.tranLabel=new Array,e.failedNums=0,e.arrAlpha=new Array,e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.blockMapModel=new l.default,this.cubeStackModel=new c.default,this.AdManageTools=new h.default,this.gameEffModel=new s.default,this.logEventModel=new r.default,this.blockRulerTools=new p.default,this.blockAiTools=new d.default,app.event.on(cfg.event.EXIT_VIEW,this.onExitView,this),app.event.on(cfg.event.CHANGE_LANGUAGE,this.onChangeLanguage,this),app.event.on(cfg.event.SHOW_BANNER,this.onShowBanner,this),app.event.on(cfg.event.NEW_GAME_START,this.onStartNewGame,this),app.event.on(cfg.event.SHOW_EXITGAME,this.onBtnBackClick,this),app.event.on(cfg.event.GOTO_CHALLENGEVIEW,this.onGotoChallengeView,this),app.event.on(cfg.event.CHALLENGE_BACK,this.onBtnBackClick,this),app.event.on(cfg.event.BACK_HOME,this.onGotoHomeClick,this),app.event.on(cfg.event.CHECK_GAME_OVER,this.onCheckGameOver,this),app.event.on(cfg.event.SHOW_GOTOMAINVIEW,this.onGotoHomeClick,this),app.event.on(cfg.event.CHANGE_ROTATENUM,this.onChangeRotateNum,this),this.onLoadEvent();var e=app.Utils.getStringFromLocal("today_challenge_IsOpenTips");e=e&&""!=e?JSON.parse(e):[],this.btn_atlas=app.res.loadAtlas(cfg.res.atlas.block_btn),this.saveDataArr=e,this.target_node.active=!1,this.onStartNewGame(),cc.view.setResizeCallback(function(){return t.resize()}),this.resize(),this.setSpriteFrameByAction(),this.onChangeLanguage(),this.scoreTxt.string="0",this.myScore=0,this.onChangeRotateNum()},e.prototype.onChangeRotateNum=function(){var t=parseInt(cfg.const.rotateNum);this.rotate_num.getComponent(cc.Label).string=t>0?cfg.const.rotateNum:"+";var e=parseInt(cfg.const.random_num);this.random_num.getComponent(cc.Label).string=e>0?cfg.const.random_num:"+";var o=this.blockMapModel.getAllPointAndSpriteFrame();this.logEventModel.onSaveGameData(o)},e.prototype.onBtnReplayClick=function(){app.audio.playSound("button"),app.LogEvent.showLogEventWithName("Replay_PAUSE"),this.onStartNewGame()},e.prototype.onGotoHomeClick=function(){app.audio.playSound("button"),app.LogEvent.showLogEventWithName("GoTo_Home_Pause"),this.cubeStackBgNode.off(cc.Node.EventType.TOUCH_START),this.cubeStackBgNode.off(cc.Node.EventType.TOUCH_MOVE),this.cubeStackBgNode.off(cc.Node.EventType.TOUCH_END),this.cubeStackBgNode.off(cc.Node.EventType.TOUCH_CANCEL),app.event.off(cfg.event.EXIT_VIEW),app.event.off(cfg.event.SHOW_REWARDFAIED),app.event.off(cfg.event.SHOW_TIPS_CHALLENGE),app.event.off(cfg.event.CHANGE_LANGUAGE),app.event.off(cfg.event.SHOW_BANNER),app.event.off(cfg.event.NEW_GAME_START),app.event.off(cfg.event.SHOW_EXITGAME),app.event.off(cfg.event.GOTO_CHALLENGEVIEW),app.event.off(cfg.event.CHALLENGE_BACK),app.event.off(cfg.event.BACK_HOME),app.event.off(cfg.event.CHECK_GAME_OVER),app.event.off(cfg.event.SHOW_GOTOMAINVIEW),app.event.off(cfg.event.CHANGE_ROTATENUM),this.node.removeFromParent(),cc.director.loadScene("mainScene"),this.AdManageTools.hideBanner(),app.LogEvent.showLogEventWithName("Game_Back_Click")},e.prototype.onGotoChallengeView=function(){app.event.on(cfg.event.SHOW_EXITGAME,this.onBtnBackClick,this)},e.prototype.onShowBanner=function(){this.AdManageTools.initBanner()},e.prototype.onExitView=function(){this.cubeStackBgNode.off(cc.Node.EventType.TOUCH_START),this.cubeStackBgNode.off(cc.Node.EventType.TOUCH_MOVE),this.cubeStackBgNode.off(cc.Node.EventType.TOUCH_END),this.cubeStackBgNode.off(cc.Node.EventType.TOUCH_CANCEL),app.event.off(cfg.event.EXIT_VIEW),app.event.off(cfg.event.SHOW_REWARDFAIED),app.event.off(cfg.event.SHOW_TIPS_CHALLENGE),app.event.off(cfg.event.CHANGE_LANGUAGE),app.event.off(cfg.event.SHOW_BANNER),app.event.off(cfg.event.NEW_GAME_START),app.event.off(cfg.event.SHOW_EXITGAME),app.event.off(cfg.event.GOTO_CHALLENGEVIEW),app.event.off(cfg.event.CHALLENGE_BACK),app.event.off(cfg.event.BACK_HOME),app.event.off(cfg.event.CHECK_GAME_OVER),app.event.off(cfg.event.SHOW_GOTOMAINVIEW),app.event.off(cfg.event.CHANGE_ROTATENUM),this.node.removeFromParent(),app.event.dispatch(cfg.event.SHOW_BANNER)},e.prototype.setSpriteFrameByAction=function(){this.allSpriteFrameByAction=[{spriteFrame:"block_0",action:"darkblue"},{spriteFrame:"block_1",action:"green"},{spriteFrame:"block_2",action:"pink"},{spriteFrame:"block_3",action:"purple"},{spriteFrame:"block_4",action:"red"},{spriteFrame:"block_5",action:"yellow"}]},e.prototype.resize=function(){var t=cc.find("Canvas").getComponent(cc.Canvas);this.curDR||(this.curDR=t.designResolution);var e=this.curDR,o=cc.view.getFrameSize(),a=o.width,i=o.height,n=a,c=i;a/i>e.width/e.height?n=(c=e.height)*a/i:c=i/a*(n=e.width),t.designResolution=cc.size(n,c),t.node.width=n,t.node.height=c,t.node.emit("resize"),this.bgMask.width=n,this.bgMask.height=c,this.bgMask.emit("resize")},e.prototype.onRefuseCubeStack=function(){if(app.audio.playSound("button"),cfg.const.random_num<=0)return cc.log("============\u5f53\u524d\u6b21\u6570\u5df2\u7528\u5c3d============="),void app.view.showStoreView();this.resertCubeStack(),cfg.const.random_num--,this.onChangeRotateNum()},e.prototype.rotateCubeStack=function(){if(!cfg.const.isRotateTime){if(app.audio.playSound("button"),cfg.const.rotateNum<=0)return cc.log("============\u5f53\u524d\u6b21\u6570\u5df2\u7528\u5c3d============="),void app.view.showStoreView();this.isRotate=!this.isRotate,1==this.isRotate?(this.btn_rotate.normalSprite=this.btn_atlas.getSpriteFrame("bt_rotate_off"),this.btn_rotate.pressedSprite=this.btn_atlas.getSpriteFrame("bt_rotate_off"),this.btn_rotate.hoverSprite=this.btn_atlas.getSpriteFrame("bt_rotate_off"),this.btn_rotate.disabledSprite=this.btn_atlas.getSpriteFrame("bt_rotate_off")):(this.btn_rotate.normalSprite=this.btn_atlas.getSpriteFrame("bt_rotate_on"),this.btn_rotate.pressedSprite=this.btn_atlas.getSpriteFrame("bt_rotate_on"),this.btn_rotate.hoverSprite=this.btn_atlas.getSpriteFrame("bt_rotate_on"),this.btn_rotate.disabledSprite=this.btn_atlas.getSpriteFrame("bt_rotate_on")),this.cubeStackModel.showBtnRotate(this.isRotate),this.isRotate||(this.cubeStackModel.resetCubeStack(),this.onCheckGameOver()),this.isRotate&&(this.cubeStackModel.hideAllEffCycle(),this.resetAllCubeStack(),this.gameEffModel.hideEff_HighAction())}},e.prototype.onLoadEvent=function(){this.cubeStackBgNode.on(cc.Node.EventType.TOUCH_START,function(t){this.onMouseDown(t)},this),this.cubeStackBgNode.on(cc.Node.EventType.TOUCH_MOVE,function(t){this.onMouseMove(t)},this),this.cubeStackBgNode.on(cc.Node.EventType.TOUCH_END,function(t){this.onMouseUp(t)},this),this.cubeStackBgNode.on(cc.Node.EventType.TOUCH_CANCEL,function(t){this.onMouseUp(t)},this),this.bgMask.on(cc.Node.EventType.TOUCH_END,function(){},this)},e.prototype.restartGame=function(){this.blockMapModel.restartGame(),this.isTouching=!1},e.prototype.setCubeStack=function(t){for(var e=0;e<cfg.const.createNum;e++){this.allCubeStack[e].hideAll();var o=t[e];this.allCubeStack[e].init(o,!1,null),this.allCubeStack[e].setActive(!0),this.allCubeStack[e].canClick=!0}},e.prototype.initCubeStack=function(){this.allCubeStack=[],this.cubeStackBgNode.removeAllChildren();for(var t=app.res.loadPrefab(cfg.res.prefabs.cubeStack),e=0;e<cfg.const.createNum;e++){var o=cc.instantiate(t),a=o.getComponent(u.default);o.parent=this.cubeStackBgNode,o.x=260*e-380,o.y=2,a.node.active=!0,this.allCubeStack.push(a)}this.cubeStackModel._allCubeStack=this.allCubeStack;var i=cc.instantiate(t).getComponent(u.default);this.cubeStackModel.saveCubeStack=i,this.cubeStackModel.initSaveCubeStackData(this.save_node)},e.prototype.initNextCubeStack=function(){this.next_node.removeAllChildren();var t=app.res.loadPrefab(cfg.res.prefabs.cubeStack),e=cc.instantiate(t),o=e.getComponent(u.default);e.parent=this.next_node,o.node.active=!0,e.x=0,e.y=0,this.cubeStackModel.nextCubeStack=o;var a=cc.instantiate(t),i=a.getComponent(u.default);a.parent=this.next_node,o.node.active=!0,a.x=300,a.y=0,this.cubeStackModel.temp_CubeStack=i},e.prototype.getMapDataByRandom=function(){var t=app.dailyTools.generateScoreMap(cfg.const.randomNum);if(t){for(var e=t.score,o=t.map,a=[],i=[],n=0;n<cfg.const.gameRowNum;n++){for(var c=0,r=0,s=0;s<cfg.const.gameColNum;s++){if(this.blockMapModel.pointBlockArr[n][s]=0,this.blockMapModel.allCubes[s][n].hideCube(),o[n]&&null!=o[n][s]){var l=this.blockMapModel.allCubes[s][n];this.blockMapModel.pointBlockArr[n][s]=1;var u=this.getRandomSpriteFrame();l.showShader(u),l.showInGrid(),r++,o[n][s]._ice&&l.onSetDeathTimes(2)}o[s]&&null!=o[s][n]&&c++}i.push(c),a.push(r)}this.stepNums=0,this.blockMapModel.columnNum=[].concat(a),this.blockMapModel.rowNum=[].concat(i),this.maxScore_text.string=e}},e.prototype.getRandomSpriteFrame=function(){return"block_"+app.Utils.random(0,5)},e.prototype.onTargetAction=function(){this.target_node.active=!0,this.target_node.opacity=255,cc.tween(this.target_node).delay(1.5).to(.8,{opacity:0}).delay(.8).start()},e.prototype.onStartNewGame=function(t){void 0===t&&(t=!1),this.initCubeStack(),this.blockMapModel.initCurCubeStack(this.node),this.blockMapModel.initCubeMapData(this.gameBgNode.node),this.buttomY=this.blockMapModel._allCubes[0][0].getWorldPosition().y,this.leftX=this.blockMapModel._allCubes[0][0].getWorldPosition().x,this.cubeStackModel.allCubeStack=this.allCubeStack,this.restartGame(),this.onTargetAction(),this.getMapDataByRandom(),this.initCubeStackData(),this.onCheckGameOver()},e.prototype.getRandomId=function(){for(var t=[],e=0;e<=46&&35!=e&&45!=e&&46!=e&&31!=e;e++)t.push(e);return app.dailyTools.random(0,t.length)-1},e.prototype.initCubeStackData=function(){app.dailyTools.seed=cfg.const.randomNum,this.blockAiTools.initCubeStackType(),this.cubeStackModel.cubeStackNum=3;var t=this.setFairbaseAIConfig();this.cubeStackModel.randomCubeStack(t)},e.prototype.getPositionByCubeArr=function(t){var e={x:0,y:0};for(var o in t)e.x+=t[o].getWorldPosition().x,e.y+=t[o].getWorldPosition().y;return e.x=e.x/t.length+20,e.y=e.y/t.length+20,e},e.prototype.actionRotate=function(t){var e=this,o=null;(o=-1==t?this.cubeStackModel.saveCubeStackData:this.cubeStackModel._allCubeStack[t]).node.active&&(o.node.stopAllActions(),this.cubeStackModel.showBtnRotate(!0),cc.tween(o.node).to(.15,{angle:-90}).call(function(){o.node.angle=0,o.rotateByCubeStack(),e.onCheckGame(),e.cubeStackModel.showBtnRotate(!0),o.hideEff_Cycle()}).start())},e.prototype.rotateByIndex=function(t){this.cubeStackModel.showBtnRotate(!1);var e=!1;if(-1==t?this.cubeStackModel.hasRotateCubeStackBySaveCube()&&(e=!0):this.cubeStackModel.hasRotateCubeStack(t)&&(e=!0),e)if(cfg.const.rotateTime++,this.isRotate=!1,cfg.const.isRotateTime=!1,cfg.const.isNeedSubRotateNum){cfg.const.rotateNum--;var o=parseInt(cfg.const.rotateNum);this.rotate_num.getComponent(cc.Label).string=o>0?o+"":"+",this.btn_rotate.normalSprite=this.btn_atlas.getSpriteFrame("bt_rotate_on"),this.btn_rotate.pressedSprite=this.btn_atlas.getSpriteFrame("bt_rotate_on"),this.btn_rotate.hoverSprite=this.btn_atlas.getSpriteFrame("bt_rotate_on"),this.btn_rotate.disabledSprite=this.btn_atlas.getSpriteFrame("bt_rotate_on")}else cfg.const.isNeedSubRotateNum=!0},e.prototype.onMouseStartClick=function(t,e,o){var a=this;void 0===o&&(o=!0);var i=-1,n=null;o?(i=this.allCubeStack[t].cubeStack_id,n=this.allCubeStack[t].spriteFrame):(i=this.cubeStackModel.saveCubeStackData.cubeStack_id,n=this.cubeStackModel.saveCubeStackData.spriteFrame),this.blockMapModel.spriteFrame=n,e?this.isCanRotate=!0:(this.isCanRotate=!1,this.blockMapModel.curCubeStack.init(i,!0,n),this.blockMapModel._curPoint=this.getGridIdx(this.blockMapModel.curCubeStack.getFirstPos()),o?this.blockMapModel.curCubeStack.touchAction(this.node.convertToNodeSpaceAR(this.touchPos),!1,this.allCubeStack,t,3,!0):this.blockMapModel.curCubeStack.touchActionBySaveCubeStack(this.node.convertToNodeSpaceAR(this.touchPos),!1,this.cubeStackModel.saveCubeStackData,t,3,!0),cc.tween(this.node).delay(.03).call(function(){a.blockMapModel.curCubeStack.setCubeStackScalenormal()}).start(),app.audio.playSound("select"),this.blockMapModel.curCubeStack.node.active=!0)},e.prototype.onMouseDown=function(t){if(!this.isTouching&&!this.isAnimationTime){this.touchPos=t.getLocation(),this.isTouchMuch=!1,this.savePos=this.node.convertToNodeSpaceAR(this.touchPos);for(var e=0;e<cfg.const.createNum;e++){var o=this.allCubeStack[e].canClick,a=this.allCubeStack[e].node.active,i=this.allCubeStack[e].cubeStack_isActive;this.isRotate&&(i=!0,o=!0);var n=this.allCubeStack[e].pointInCollider(this.touchPos);!this.cubeStackModel.hasSaveCubeStack&&0==o&&1==a&&n&&(o=!0,a=!0,i=!0,this.isClickGrayBlock=!0),o&&a&&i&&n&&(this.isTouching=!0,this.curMoveIdx=e,this.onMouseStartClick(e,this.allCubeStack[e].isRotateState,!0),this.cubeStackModel.hideAllEffCycle(),this.resetAllCubeStack())}this.clickSaveCubeStack=!1,window.cfg.const.hasOpenSaveCubeStack&&this.cubeStackModel.hasSaveCubeStack&&this.cubeStackModel.saveCubeStackData.pointInCollider(this.touchPos)&&(this.isTouching=!0,this.onMouseStartClick(-1,this.cubeStackModel.saveCubeStackData.isRotateState,!1),this.tempCubeShader=null,this.cubeStackModel.hideAllEffCycle(),this.curMoveIdx=-1,this.clickSaveCubeStack=!0)}},e.prototype.onMouseMove=function(t){if(this.isTouching){this.touchPos=t.getLocation();var e=this.node.convertToNodeSpaceAR(this.touchPos);if(this.clickSaveCubeStack){if(!this.isTouchMuch&&this.cubeStackModel.saveCubeStackData.isRotateState){if(Math.abs(e.x-this.savePos.x)<=5||Math.abs(e.y-this.savePos.y)<=5)return;this.onMouseStartClick(-1,!1,!1),this.isTouchMuch=!0}}else if(!this.isTouchMuch&&this.allCubeStack[this.curMoveIdx].isRotateState){if(Math.abs(e.x-this.savePos.x)<=5||Math.abs(e.y-this.savePos.y)<=5)return;this.onMouseStartClick(this.curMoveIdx,!1,!0),this.isTouchMuch=!0}this.blockMapModel.curCubeStack.setPosition(e),this.recordPoint=this.getGridIdx(this.blockMapModel.curCubeStack.getFirstPos()),this.blockMapModel.CubeColorNormal(),this.recordPoint!=this.blockMapModel._curPoint&&(this.blockMapModel.hideShader(),this.blockMapModel._curPoint=this.recordPoint,this.blockMapModel.cubeInGrid()),this.blockMapModel.curCubeStack.setCubeStackScale()}},e.prototype.onMouseUp=function(){if(1==this.isTouching){this.isTouching=!1,this.curCubeShader=this.blockMapModel.curCubeShader,this.blockMapModel.curCubeStack=this.blockMapModel.curCubeStack;var t=this.node.convertToNodeSpaceAR(this.touchPos);if(this.clickSaveCubeStack){if(this.cubeStackModel.saveCubeStackData.isRotateState&&this.isCanRotate&&(Math.abs(t.x-this.savePos.x)<=5||Math.abs(t.y-this.savePos.y)<=5))return this.cubeStackModel.saveCubeStackData.node.active=!0,void this.actionRotate(-1)}else if(this.allCubeStack[this.curMoveIdx].isRotateState&&this.isCanRotate&&(Math.abs(t.x-this.savePos.x)<=5||Math.abs(t.y-this.savePos.y)<=5))return void this.actionRotate(this.curMoveIdx);if(this.curCubeShader.length>0){this.blockMapModel.curCubeStack.setActive(!1),cfg.const.hasOpenSaveCubeStack&&this.clickSaveCubeStack?(this.cubeStackModel.removeSaveCubeStack(),this.isRotate&&this.cubeStackModel.saveCubeStackData.isRotateState&&this.rotateByIndex(-1)):(this.allCubeStack[this.curMoveIdx].setDeath(),this.cubeStackModel._lastGameRemoveCubeStack.push(this.curMoveIdx),this.isRotate&&this.allCubeStack[this.curMoveIdx].isRotateState&&this.rotateByIndex(this.curMoveIdx),--this.cubeStackModel.cubeStackNum),this.blockMapModel.onSetMoveUpData(),this.pushArrLength=this.curCubeShader.length,this.myScore+=this.pushArrLength,this.showScore(),this.isTouchMuch=!1,this.curCubeShader=new Array,app.audio.playSound("place"),this.stepNums++;var e=parseInt(this.maxScore_text.string);this.blockMapModel.canRemoveCube(this.blockMapModel.removeArr,this,this.cubeStackModel.cubeStackNum)||(this.myScore+=this.pushArrLength,this.showScore(),this.onPushCubeAddScore(this.pushArrLength)),this.stepNums=0,this.myScore>=e&&(app.view.showChallengeRecordView(!0,this.myScore),this.scheduleOnce(function(){this.logEventModel.saveTodayChallengeOver();var t=new Date;if(t.getDate()==cfg.const.clickDaillyNum&&t.getMonth()+1==cfg.const.clickDailyMonth){cfg.const.challenge_todayIsOver=!0;var e=cfg.const.challenge_todayIsOver?"1":"0";app.Utils.saveStringToLocal("challenge_todayIsOver",e)}},1.5)),this.cubeStackModel.cubeStackNum<=0&&this.resertCubeStack()}else{var o=!1;window.cfg.const.hasOpenSaveCubeStack&&(this.getIsPushCubeStack()&&(this.cubeStackModel.hasSaveCubeStack?this.cubeStackModel.saveCubeStackData.setActive(!0):(this.cubeStackModel.updateSaveCubeStack(this.allCubeStack[this.curMoveIdx].cubeStack_id,this.allCubeStack[this.curMoveIdx].spriteFrame),--this.cubeStackModel.cubeStackNum,this.allCubeStack[this.curMoveIdx].setDeath(),this.blockMapModel.curCubeStack.setActive(!1),this.cubeStackModel._lastGameRemoveCubeStack.push(this.curMoveIdx),o=!0,this.cubeStackModel.cubeStackNum<=0&&this.resertCubeStack())),this.clickSaveCubeStack&&this.cubeStackModel.saveCubeStackData.setActive(!0));var a=null;this.clickSaveCubeStack?(a=this.cubeStackModel.saveCubeStackData.node.parent.convertToWorldSpaceAR(this.cubeStackModel.saveCubeStackData.node.position),a=this.node.convertToNodeSpaceAR(a)):(a=this.allCubeStack[this.curMoveIdx].node.parent.convertToWorldSpaceAR(this.allCubeStack[this.curMoveIdx].node.position),a=this.node.convertToNodeSpaceAR(a)),o||this.blockMapModel.curCubeStack.touchAction(a,!0,this.allCubeStack),this.isRotate||this.onCheckGameOver()}}},e.prototype.getIsPushCubeStack=function(){var t=this.save_node.convertToWorldSpaceAR(cc.Vec2.ZERO),e=this.blockMapModel.curCubeStack.node.convertToWorldSpaceAR(cc.Vec2.ZERO),o=this.save_node.getContentSize(),a=cfg.const.bigSpriteWidth/2;return e.x<=t.x+o.width/2+a&&e.x>=t.x-o.width/2-a&&e.y<=t.y+o.height/2+a&&e.y>=t.y-o.height/2-a},e.prototype.resertCubeStack=function(){var t=this;this.gameEffModel.hideEff_HighAction(),this.cubeStackModel._lastGameRemoveCubeStack=new Array;var e=this.setFairbaseAIConfig();this.cubeStackModel._allCubeStack=this.allCubeStack,this.cubeStackModel.randomCubeStack(e),this.logEventModel.showLogWithStepNum();for(var o=[],a=0;a<this.allCubeStack.length;a++)this.allCubeStack[a].setActive(!1),o[a]=this.allCubeStack[a].node.y,this.allCubeStack[a].node.y-=200;var i=function(e){n.allCubeStack[e].node.stopAllActions(),cc.tween(n.allCubeStack[e].node).call(function(){t.allCubeStack[e].setActive(!0)}).to(.3,{y:o[e]}).start()},n=this;for(a=0;a<this.allCubeStack.length;a++)i(a)},e.prototype.setFairbaseAIConfig=function(){var t="";9==cfg.const.gameRowNum&&(t="_Jiu");var e=app.Utils.getStringFromLocal("nowGameCount"+t);e=e&&""!=e?parseInt(e):1;for(var o,a=!1,i=0;!a;)if(o=this.blockAiTools.getCubeStackAIRuler(e,this.myScore),this.cubeStackModel.initCubeStack(o),a=this.onCheckGame(),20==++i)return o;return o},e.prototype.getAllCubes=function(){for(var t=[],e=0;e<cfg.const.gameRowNum;e++){t[e]=[];for(var o=0;o<cfg.const.gameColNum;o++)t[e][o]=this.blockMapModel._allCubes[o][e]}return t},e.prototype.onCheckGame=function(t){void 0===t&&(t=!1);var e=!1,o=this.getAllCubes();this.arrAlpha=[],this.allCubeStack=this.cubeStackModel._allCubeStack,this.blockRulerTools.initData(this.blockMapModel.columnNum,this.blockMapModel.rowNum,o);for(var a=0;a<cfg.const.createNum;a++){var i=1==this.isTouching&&a==this.curMoveIdx,n=this.blockRulerTools.checkGame(this.allCubeStack[a],i);this.allCubeStack[a].changeAlpha(n),this.arrAlpha.push(n),n&&(e=!0,this.allCubeStack[a].cubeStack_id)}return this.getIsCanPutBySaveCubeStack(),e},e.prototype.getIsCanPutBySaveCubeStack=function(){var t=!1;if(this.cubeStackModel.hasSaveCubeStack){var e=this.cubeStackModel.saveCubeStackData,o=this.blockRulerTools.checkGame(e,!1);e.changeAlpha(o),o&&(t=!0)}return t},e.prototype.getGrayCubeStackNum=function(){for(var t=0,e=0;e<cfg.const.createNum;e++)this.allCubeStack[e].node.active&&this.allCubeStack[e].isAlive&&t++;return t},e.prototype.getIsRealyGameOver=function(t){if(t)return!0;var e=this.getIsCanPutBySaveCubeStack();if(0==t&&this.cubeStackModel.hasSaveCubeStack)return e;var o=this.getGrayCubeStackNum();return 0!=t||this.cubeStackModel.hasSaveCubeStack?void 0:!(o>=2)},e.prototype.onCheckGameOver=function(){var t=this.onCheckGame(!0);0==this.getIsRealyGameOver(t)&&(this.cubeStackModel.hideAllEffCycle(),this.resetAllCubeStack(),this.nowIsGameOver=!1,this.gameOver(),this.allCanRotateNum=!1)},e.prototype.resetAllCubeStack=function(){for(var t=this,e=function(e){o.allCubeStack[e].node.stopAllActions();var a=cc.sequence(cc.rotateTo(0,0),cc.callFunc(function(){t.allCubeStack[e].changeAlpha(t.arrAlpha[e])}));cc.tween(o.allCubeStack[e].node).then(a).start()},o=this,a=0;a<cfg.const.createNum;a++)e(a)},e.prototype.gameOver=function(){this.scheduleOnce(function(){this.showCubeDeath()},.5)},e.prototype.showCubeDeath=function(){for(var t=app.Utils.random(2,4),e=app.Utils.random(2,4),o=0,a=0,i=cc.color(153,153,153),n=0;n<cfg.const.gameRowNum;n++)for(var c=0;c<cfg.const.gameColNum;c++)1==this.blockMapModel.allCubes[c][n].isPutIn&&((o=(Math.abs(c-t)+Math.abs(n-e))*cfg.const.dieDelay)>a&&(a=o),this.blockMapModel.allCubes[c][n].die(i,o));this.scheduleOnce(function(){this.showDeath()},.2+a)},e.prototype.showDeath=function(){this.AdManageTools.hideBanner(),this.blockMapModel.getAllPointAndSpriteFrame(),app.event.off(cfg.event.SHOW_EXITGAME),app.view.showChallengeRecordView(!1,this.myScore),this.scheduleOnce(function(){this.blockMapModel.getAllPointAndSpriteFrame(),this.failedNums++,this.logEventModel.onSaveFailedNums(this.failedNums)},.5)},e.prototype.onPushCubeAddScore=function(t){this.addScore_text.string=t.toString();var e=this.addScoreNode;e.active=!0,e.position=this.node.convertToNodeSpaceAR(this.blockMapModel.addScoreNodePosition),e.x<=-cfg.const.finalW/2?e.x=-cfg.const.finalW/2+10:e.x>=cfg.const.finalW/2&&(e.x=cfg.const.finalW/2),e.stopAllActions(),e.stopAllActions(),cc.tween(e).to(.6,{scale:.8,position:new cc.Vec3(e.position.x,e.position.y+60,100)}).call(function(){e.active=!1}).start()},e.prototype.showScore=function(t){void 0===t&&(t=!0);var e=null;if(null==e){var o=cc.scaleTo(.15,1.5,1.5),a=cc.scaleTo(.08,1,1);e=cc.sequence(o,a)}this.myScore>0&&t&&cc.tween(this.scoreTxt.node).then(e).start(),this.scoreTxt.string=this.myScore.toString()},e.prototype.onHomeClick=function(){app.audio.playSound("button"),cc.director.loadScene("mainScene"),this.AdManageTools.showInterstitialAd()},e.prototype.onConfirmClick=function(){app.audio.playSound("button"),this.onExitView(),app.view.showDailyView(),this.AdManageTools.showInterstitialAd()},e.prototype.hasOtherCube=function(){for(var t=0;t<cfg.const.gameRowNum;t++)for(var e=0;e<cfg.const.gameColNum;e++)if(1==this.blockMapModel.pointBlockArr[t][e])return!0;return!1},e.prototype.getIsTruthPosition=function(){for(var t=0;t<this.curCubeShader.length;t++)if(!this.curCubeShader[t].isHighLight)return!1;return!0},e.prototype.startEff_Beautiful=function(){var t=this;this.scoreNode.position=this.gameBgNode.node.position,this.gameEffModel.startEff_Beautiful(this.blockMapModel.all_continNum,this.scoreNode),this.scoreNode.active=!0,this.scoreNode.x=this.gameBgNode.node.x,this.scoreNode.y=this.gameBgNode.node.y,this.scoreNode.x-=70,this.scoreNode.stopAllActions(),cc.tween(this.scoreNode).to(.2,{scale:1.3}).to(.2,{scale:.8}).to(.2,{scale:1}).delay(.4).call(function(){t.scoreNode.active=!1;var e=t.scoreNode.getComponentsInChildren(cc.Sprite);for(var o in e)e[o].node.removeFromParent()}).start()},e.prototype.addScore=function(t,e){var o=t*(2*e+this.pushArrLength);this.myScore+=o,this.blockMapModel.continNum>=2&&this.gameEffModel.startEff_Contine(this.blockMapModel.continNum,this.scoreNode),this.showAddScore(o)},e.prototype.showAddScore=function(t){var e=this;this.addScoreText.string=t.toString(),this.blockMapModel.isShowBeautiful||(this.scoreNode.active=!0,this.blockMapModel.continNum>=2?(this.scoreNode.x=this.gameBgNode.node.x,this.scoreNode.y=this.gameBgNode.node.y,this.scoreNode.x-=70,this.scoreNode.stopAllActions(),cc.tween(this.scoreNode).to(.2,{scale:1.3}).to(.2,{scale:.8}).to(.2,{scale:1}).delay(.4).call(function(){e.scoreNode.active=!1;var t=e.scoreNode.getComponentsInChildren(cc.Sprite);for(var o in t)t[o].node.removeFromParent()}).start()):(this.scoreNode.position=this.node.convertToNodeSpaceAR(this.blockMapModel.scoreNodePosition),this.scoreNode.x-=30,this.scoreNode.stopAllActions(),cc.tween(this.scoreNode).to(.8,{scale:1,position:new cc.Vec3(this.scoreNode.x,this.scoreNode.y+60,100)}).call(function(){e.scoreNode.active=!1;var t=e.scoreNode.getComponentsInChildren(cc.Sprite);for(var o in t)t[o].node.removeFromParent()}).start()),this.showScore(!0))},e.prototype.getGridIdx=function(t){this.buttomY=this.blockMapModel.allCubes[0][0].getWorldPosition().y,this.leftX=this.blockMapModel.allCubes[0][0].getWorldPosition().x;var e=(t.x-this.leftX)/cfg.const.cubeSpriteWidth,o=(t.y-this.buttomY)/cfg.const.cubeSpriteWidth;return e=Math.round(e),o=Math.round(o),cc.v2(e,o)},e.prototype.showNewAction=function(t){var e=this.node.convertToNodeSpaceAR(t),o="N2Eff_debris_N1_"+this.getColorAction(),a=this.gameEffModel.getEffNode("eff_Node",o,this.node,0,0);this.gameEffModel.showRemoveEffNode(a,e.x,e.y)},e.prototype.showRemoveByJiuAction=function(t){var e=this.node.convertToNodeSpaceAR(t);this.actionByNode();var o="N2Eff_debris_N1vertical_"+this.getColorAction()+"3*3",a=this.gameEffModel.getEffNode("newEff_action",o,this.node,0,0);this.gameEffModel.showRemoveEffNode(a,e.x,e.y)},e.prototype.showRemoveAction=function(t,e){var o=this.node.convertToNodeSpaceAR(e);this.actionByNode();var a=this.getColorAction(),i="N2Eff_debris_N1_"+a;1==t||(i="N2Eff_debris_N1vertical_"+a);var n=this.gameEffModel.getEffNode("newEff_action",i,this.node,0,0);this.gameEffModel.showRemoveEffNode(n,o.x,o.y)},e.prototype.getColorAction=function(){for(var t=0;t<this.allSpriteFrameByAction.length;t++){var e=this.allSpriteFrameByAction[t];if(e.spriteFrame==this.blockMapModel.spriteFrame)return e.action}},e.prototype.actionByNode=function(){var t=this;if(0!=cfg.const.shakeVolume){var e=this.node.x,o=this.node.y,a=cc.repeatForever(cc.sequence(cc.moveTo(.018,cc.v2(e+5,o+5)),cc.moveTo(.018,cc.v2(e+1,o+1))));this.node.stopAllActions(),cc.tween(this.node).then(a).start(),setTimeout(function(){t.node.stopAllActions(),t.node.x=e,t.node.y=o},400)}},e.prototype.onBtnBackClick=function(){var t=(new Date).getTime();t-this.time<=3e3||(this.time=t,app.audio.playSound("button"),this.onExitView(),app.view.showDailyView())},e.prototype.onSetBtnClick=function(){app.audio.playSound("button"),this.AdManageTools.hideBanner(),app.event.off(cfg.event.SHOW_EXITGAME),app.view.showSetView(!1,!1)},e.prototype.onChangeLanguage=function(){for(var t=["UI-Tutorial_5"],e=0;e<this.tranLabel.length;e++){var o=app.tranLanguage.loadStrByKey(t[e]);o&&(this.tranLabel[e].getComponent(cc.Label).string=o)}},n([b(cc.Sprite)],e.prototype,"gameBgNode",void 0),n([b(cc.Node)],e.prototype,"cubeStackBgNode",void 0),n([b(cc.Node)],e.prototype,"bgMask",void 0),n([b(cc.Node)],e.prototype,"next_node",void 0),n([b(cc.Node)],e.prototype,"save_node",void 0),n([b(cc.Node)],e.prototype,"scoreNode",void 0),n([b(cc.Label)],e.prototype,"scoreTxt",void 0),n([b(cc.Label)],e.prototype,"addScoreText",void 0),n([b(cc.Label)],e.prototype,"maxScore_text",void 0),n([b(cc.Button)],e.prototype,"btn_rotate",void 0),n([b(cc.Node)],e.prototype,"addScoreNode",void 0),n([b(cc.Label)],e.prototype,"addScore_text",void 0),n([b(cc.Node)],e.prototype,"rotate_num",void 0),n([b(cc.Node)],e.prototype,"random_num",void 0),n([b(cc.Node)],e.prototype,"target_node",void 0),n([b([cc.Label])],e.prototype,"tranLabel",void 0),n([f],e)}(cc.Component);o.default=m,cc._RF.pop()},{"../utils/AdManageTools":"AdManageTools","../utils/BlockPuzzleCubeStackTools":"BlockPuzzleCubeStackTools","../utils/BlockPuzzleEffTools":"BlockPuzzleEffTools","../utils/BlockPuzzleLogEvent":"BlockPuzzleLogEvent","../utils/BlockPuzzleMapTools":"BlockPuzzleMapTools","../utils/BlockPuzzleRulerTools":"BlockPuzzleRulerTools","../utils/newBlockStyleAITools":"newBlockStyleAITools","./CubeStack":"CubeStack"}],ConstCfg:[function(t,e,o){"use strict";cc._RF.push(e,"cb87eB5BfdNgZCbAnjV3XR6","ConstCfg"),Object.defineProperty(o,"__esModule",{value:!0}),o.default={zIndex:{toast:99,settingView:2,languageView:4,scoreView:4,recordView:4,tutorialsView:4,howToPlayView:4,dailyView:4,challengeView:1},gameRowNum:9,gameColNum:9,createNum:3,Sudoku:3,spriteWidth:55,cubeSpriteWidth:113,record_cubeSpriteWidth:110,bigSpriteWidth:120,game_diff:3,language:"language_en",dieDelay:.08,moveOffsetY:140,apk_name:"",soundVolume:0,musicVolume:0,finalW:540,finalH:960,isFirstOpenTutotial:!1,isNeedSubRotateNum:!0,nowScore:0,myHighScore:0,resurgenceTime:1,rotateTime:0,isConnectIsNomarl:"1",rotateNum:1,shakeVolume:1,isRotateTime:!1,coinNum:0,gameUiAtlas:"",typeUi:"2",hasUseSystemFont:!1,isFirst_GameOver:!1,challenge_createNum:4,challenge_openTips:!1,challenge_todayIsOver:!1,clickDaillyNum:-1,clickDailyMonth:-1,cubeScale:.93,isDailyChallenge:!1,hasNineGame_Daily:!1,isGameBackByAdb:!1,randomNum:0,random_num:0,mapPuzzle_SpriteWidth:108,mapPuzzle_row:0,mapPuzzle_col:0,mapPuzzle_createNum:0,mapPuzzle_MapWidth:55,mapPuzzle_nowGameCount:1,mapPuzzle_nowGameNums:1,mapPuzzle_gameData:{},mapPuzzle_worldPos:{},mapPuzzle_saveAllPos:{},mapPuzzle_OpenTips:!1,mapPuzzle_IsOpenVibrate:!0,mapPuzzle_IsOpenSound:!0,mapPuzzle_MaxLevel:7,mapPuzzle_gameSpriteData:{},hasOpenSaveCubeStack:!0,maxChallengeNum:0},cc._RF.pop()},{}],CubeModel:[function(t,e,o){"use strict";cc._RF.push(e,"4c87dathhlHyrcL1pDxWsAT","CubeModel"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function t(){this._cube_spriteFrame=null,this._cubeShader_spriteFrame=null,this._cubeHigh_spriteFrame=null,this._cubeGray_spriteFrame=null,this._cube_isDeath=!1,this._cube_isPutIn=!1,this._cube_highEff=null,this._cube_deathEff=null}return Object.defineProperty(t.prototype,"cubeSpriteFrame",{get:function(){return this._cube_spriteFrame},set:function(t){this._cube_spriteFrame=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cubeShaderSpriteFrame",{get:function(){return this._cubeShader_spriteFrame},set:function(t){this._cubeShader_spriteFrame=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cubeHighSpriteFrame",{get:function(){return this._cubeHigh_spriteFrame},set:function(t){this._cubeHigh_spriteFrame=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cubeGraySpriteFrame",{get:function(){return this._cubeGray_spriteFrame},set:function(t){this._cubeGray_spriteFrame=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cubeIsDeath",{get:function(){return this._cube_isDeath},set:function(t){this._cube_isDeath=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cubeIsPutIn",{get:function(){return this._cube_isPutIn},set:function(t){this._cube_isPutIn=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cubeHighEff",{get:function(){return this._cube_highEff},set:function(t){this._cube_highEff=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cubeDeathEff",{get:function(){return this._cube_deathEff},set:function(t){this._cube_deathEff=t},enumerable:!1,configurable:!0}),t}();o.default=a,cc._RF.pop()},{}],CubeStackModel:[function(t,e,o){"use strict";cc._RF.push(e,"03d1diETCFNErymvcA8SjTc","CubeStackModel"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function t(){this._isActive=!0,this._cubeStack_id=0,this._cubeStack_data=null,this._cubeStack_isBack=!1}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},set:function(t){this._isActive=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cubeStackId",{get:function(){return this._cubeStack_id},set:function(t){this._cubeStack_id=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cubeStackData",{get:function(){return this._cubeStack_data},set:function(t){this._cubeStack_data=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cubeStackIsBack",{get:function(){return this._cubeStack_isBack},set:function(t){this._cubeStack_isBack=t},enumerable:!1,configurable:!0}),t}();o.default=a,cc._RF.pop()},{}],CubeStack:[function(t,e,o){"use strict";cc._RF.push(e,"8b259mJ3UBN4a03HaSk/XFe","CubeStack");var a,i=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,a){var i,n=arguments.length,c=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,a);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Cube"),r=cc._decorator,s=r.ccclass,l=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._model=null,e.point=new cc.Vec2(0,0),e.cubes=new Array,e.cubeStack_id=0,e.cubeStack_data=null,e.cubeStack_isActive=!0,e.canClick=!0,e.isAlive=!0,e.isRotateState=!1,e.sprite=null,e}return i(e,t),e.prototype.init=function(t,e,o){void 0===e&&(e=!1),this.onLoadData(),this.hideAll(),this.cubeStack_id=t,this.cubeStack_isActive=!0,this.canClick=!1,this.isAlive=!0,this.cubeStack_data=app.map.getMapData(this.cubeStack_id),this.myCubeData=this.cubeStack_data.array,this.cubeStack_data.rotateId&&(this.rotateId=this.cubeStack_data.rotateId),this.myRow=this.myCubeData.length,this.myColumn=0,this.offset=null==this.cubeStack_data.offset?0:this.cubeStack_data.offset,this.rightOrLeft=null==this.cubeStack_data.rightOrLeft?0:this.cubeStack_data.rightOrLeft,this.poxSet=null==this.cubeStack_data.poxSet?0:this.cubeStack_data.poxSet,this.pType=null==this.cubeStack_data.type?0:this.cubeStack_data.type,this.num=null==this.cubeStack_data.num?0:this.cubeStack_data.num,this.cubeId=null==this.cubeStack_data.id?0:this.cubeStack_data.id,this.desc=null==this.cubeStack_data.desc?0:this.cubeStack_data.desc,this.spriteFrame=this.getRandomSpriteFrame(),o&&(this.spriteFrame=o),this.isRotateState=!1,this.btn_rotate=this.node.getChildByName("btn_rotate"),this.btn_rotate.active=!1,this.btn_rotate.off(cc.Node.EventType.TOUCH_END),this.initEff_Cycle(),this.saveCubeIndexByAllData=new Array,e=!1,this.setBodySprite(e)},e.prototype.setCubeStackIndex=function(t){this.cubeStack_index=t},e.prototype.setBtnRotateVisible=function(t){if(this.btn_rotate.active=t,this.isRotateState=t,t){this.btn_rotate.stopAllActions();var e=cc.rotateBy(1,180);cc.tween(this.btn_rotate).repeatForever(e).start()}},e.prototype.rotateByCubeStack=function(){this.rotateId&&this.init(this.rotateId,!1,this.spriteFrame)},e.prototype.getRandomSpriteFrame=function(){return"block_"+app.Utils.random(0,5)},e.prototype.onLoadData=function(){this.cubes=new Array;for(var t=0;t<9;t++)this.cubes[t]=this.node.getChildByName(t.toString()).getComponent(c.default)},Object.defineProperty(e.prototype,"model",{get:function(){return this._model},set:function(t){this._model=t,this.cubeStack_id=this._model.cubeStackId,this.cubeStack_isActive=this._model.isActive,this.cubeStack_data=app.map.getMapData(this.cubeStack_id),this.myRow=this.cubeStack_data.length,this.myColumn=0,this.myCubeData=this.cubeStack_data.array,this.offset=null==this.cubeStack_data.offset?0:this.cubeStack_data.offset,this.rightOrLeft=null==this.cubeStack_data.rightOrLeft?0:this.cubeStack_data.rightOrLeft,this.poxSet=null==this.cubeStack_data.poxSet?0:this.cubeStack_data.poxSet,this.pType=this.cubeStack_data.type,this.num=this.cubeStack_data.num,this.cubeId=this.cubeStack_data.id,this.desc=this.cubeStack_data.desc},enumerable:!1,configurable:!0}),e.prototype.initEff_Cycle=function(){if(!this.sprite){var t=new cc.Node,e=app.res.loadAtlas(cfg.res.atlas.block_img);this.sprite=t.addComponent(cc.Sprite),this.sprite.node.scale=.9,this.sprite.node.opacity=150,this.sprite.spriteFrame=e.getSpriteFrame("img_rotate_prompt"),t.parent=this.node,this.sprite.node.active=!1,this.isShowCycle=!1}},e.prototype.showEff_Cycle=function(){this.sprite.node.active=!0,this.isShowCycle=!0},e.prototype.hideEff_Cycle=function(){this.sprite.node.active=!1,this.isShowCycle=!1},e.prototype.hideAll=function(){for(var t=0;t<this.cubes.length;t++)this.cubes[t].node.active=!1},e.prototype.setAllNormalSprite=function(){for(var t=0;t<this.cubes.length;t++)this.cubes[t].setNormalSprite()},e.prototype.setBodySprite=function(t){this.node.scale=1;var e=0,o=this.cubeStack_data.array,a=o.length,i=.5*(a-1),n=0,c=0,r=cfg.const.spriteWidth;t&&(r=cfg.const.bigSpriteWidth),this.cubeStack_num=0;for(var s=0,l=0;l<a;l++){(c=o[l].length)>n&&(n=c);for(var u=.5*(c-1),h=0;h<c;h++){var p=(h-u)*r,d=-(l-i)*r;this.cubes[e].node.setPosition(cc.v2(p,d)),1==o[l][h]&&(this.cubes[e].node.active=!0,this.cubes[e].onLoadData(),this.cubes[e].setSprite(!0,this.spriteFrame),s++);var g={x:l,y:h,idx:e};this.saveCubeIndexByAllData.push(g),++e}}this.cubeStack_num=s,this.myColumn=n},e.prototype.getAllCubeStackNums=function(){return this.cubeStack_num},e.prototype.setActive=function(t){this.cubeStack_isActive=t,this.node.active=t},e.prototype.setDeath=function(){this.isAlive=!1},e.prototype.setCubeStackPosition=function(){this.node.scale=1;for(var t=0,e=this.cubeStack_data.array,o=e.length,a=.5*(o-1),i=0,n=cfg.const.bigSpriteWidth,c=0;c<o;c++)for(var r=.5*((i=e[c].length)-1),s=0;s<i;s++){var l=(s-r)*n,u=-(c-a)*n;this.cubes[t].node.setPosition(cc.v2(l,u)),++t}},e.prototype.setCubeStackScalenormal=function(){},e.prototype.setCubeStackScale=function(){this.setCubeStackPosition(cfg.const.bigSpriteWidth);for(var t=0;t<this.cubes.length;t++)this.cubes[t].node.scale=2,this.cubes[t].isShaderSprite&&(this.cubes[t].node.scale=2.2)},e.prototype.setCubeShaderByIndex=function(t,e){for(var o=0;o<this.saveCubeIndexByAllData.length;o++)this.saveCubeIndexByAllData[o].x==t&&this.saveCubeIndexByAllData[o].y==e&&this.cubes[this.saveCubeIndexByAllData[o].idx].setShaderSprite(this.spriteFrame,!0)},e.prototype.setPosition=function(t){var e=this.cubeStack_data.array.length,o=t.y+1*cfg.const.moveOffsetY+cfg.const.spriteWidth*(e/2);this.node.setPosition(cc.v2(t.x,o))},e.prototype.touchAction=function(t,e,o,a,i,n){var c=this;void 0===i&&(i=3),void 0===n&&(n=!1),this.setActive(!0),this.node.stopAllActions();var r=this.cubeStack_data.array.length,s=t.y+1*cfg.const.moveOffsetY+cfg.const.spriteWidth*(r/2);if(e||this.node.setPosition(cc.v2(t.x,t.y)),e){var l=cfg.const.cubeScale/2;cc.tween(this.node).to(.05,{position:new cc.Vec3(t.x,t.y,100),scale:l}).delay(.05).call(function(){c.setActive(!1);for(var t=0;t<i;t+=1)o[t].isAlive&&o[t].setActive(!0)}).start()}else n&&(s=t.y+cfg.const.spriteWidth*(r/2)),cc.tween(this.node).to(.05,{position:new cc.Vec3(t.x,s,100),scale:1}).call(function(){for(var t=0;t<i;t+=1)o[t].isAlive&&t!=a?o[t].setActive(!0):o[t].setActive(!1)}).start()},e.prototype.touchActionBySaveCubeStack=function(t,e,o,a,i,n){void 0===i&&(i=3),void 0===n&&(n=!1),this.setActive(!0),this.node.stopAllActions();var c=this.cubeStack_data.array.length,r=t.y+1*cfg.const.moveOffsetY+cfg.const.spriteWidth*(c/2);e||this.node.setPosition(cc.v2(t.x,t.y)),e||(n&&(r=t.y+cfg.const.spriteWidth*(c/2)),cc.tween(this.node).to(.05,{position:new cc.Vec3(t.x,r,100),scale:1}).call(function(){o.setActive(!1)}).start())},e.prototype.getFirstPos=function(){return this.cubes[0].getWorldPosition()},e.prototype.changeAlpha=function(t){for(var e=0;e<this.cubes.length;e++)this.cubes[e].setSprite(t,this.spriteFrame);this.canClick=t},e.prototype.pointInCollider=function(t){var e=this.node.convertToWorldSpaceAR(cc.v2(0,0));return t.x>=e.x-150&&t.x<=e.x+150&&t.y>=e.y-150&&t.y<=e.y+150},e.prototype.touchActionByTutorials=function(t,e,o,a){var i=this;this.setActive(!0),this.node.stopAllActions();var n=this.cubeStack_data.array.length,c=t.y+1*cfg.const.moveOffsetY+cfg.const.spriteWidth*(n/2);e||this.node.setPosition(cc.v2(t.x,c)),e?cc.tween(this.node).to(.05,{position:new cc.Vec3(t.x,t.y,100),scale:.45}).call(function(){i.setActive(!1);for(var t=0;t<3;t+=1)o[t].isAlive&&1==t&&o[t].setActive(!0)}).start():cc.tween(this.node).to(.02,{position:new cc.Vec3(t.x,c,100),scale:1}).call(function(){for(var t=0;t<3;t+=1)o[t].isAlive&&t!=a&&1==t?o[t].setActive(!0):o[t].setActive(!1)}).start()},n([s],e)}(cc.Component));o.default=l,cc._RF.pop()},{"./Cube":"Cube"}],Cube:[function(t,e,o){"use strict";cc._RF.push(e,"578901fND5H1J6d7JL45FjW","Cube");var a,i=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,a){var i,n=arguments.length,c=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,a);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../models/CubeModel"),r=cc._decorator,s=r.ccclass,l=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._model=null,e.cube_isActive=!0,e.atlas=null,e.deathTimes=1,e.img_highLight=null,e.sprite_stone1=null,e.sprite_stone2=null,e}return i(e,t),e.prototype.onLoadData=function(t,e){if(this.node.active=!0,this._model=new c.default,this.atlas=app.res.loadAtlas(cfg.res.atlas.block_cube),this.point=cc.v2(t,e),this.node.scale=cfg.const.cubeScale,!this.sprite_stone1){var o=new cc.Node;this.sprite_stone1=o.addComponent(cc.Sprite),this.sprite_stone1.spriteFrame=this.atlas.getSpriteFrame("block_level_1"),o.parent=this.node,o.y-=31,this.sprite_stone1.node.opacity=230,this.sprite_stone1.node.active=!1}if(!this.sprite_stone2){var a=new cc.Node;this.sprite_stone2=a.addComponent(cc.Sprite),this.sprite_stone2.spriteFrame=this.atlas.getSpriteFrame("block_level_2"),a.parent=this.node,this.sprite_stone2.node.opacity=230,this.sprite_stone2.node.active=!1}this.img_highLight||(a=new cc.Node,this.img_highLight=a.addComponent(cc.Sprite),this.img_highLight.spriteFrame=this.atlas.getSpriteFrame("xuanzhong_efc"),a.parent=this.node,this.node.scale=1,this.img_highLight.node.active=!1)},e.prototype.getPoint=function(){return this.point},Object.defineProperty(e.prototype,"model",{get:function(){return this._model},set:function(t){this._model=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPutIn",{get:function(){return this._model.cubeIsPutIn},set:function(t){this._model.cubeIsPutIn=t},enumerable:!1,configurable:!0}),e.prototype.showInGrid=function(){this.node.active=!0,this._model.cubeIsPutIn=!0,this.node.opacity=255,this.isRemove=!1,this.spriteFrame=this.tempSpriteFrame,this.node.scale=cfg.const.cubeScale,this.isShaderSprite=!1,this.img_highLight&&(this.node.scale=1,this.img_highLight.node.active=!1),this.deathTimes=1,this.isHighLight=!1},e.prototype.showRemoveCube=function(){var t=this;if(cfg.const.isDailyChallenge&&(this.deathTimes--,this.deathTimes>=1))return this.setNormalSprite(),!1;cc.tween(this.node).to(.3,{scale:.79}).call(function(){t.setActive(!0)}).start()},e.prototype.removeCube=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=!1),cfg.const.isDailyChallenge&&(this.deathTimes--,this.deathTimes>=1)?(this.setNormalSprite(),!1):(this._model.cubeIsPutIn=!1,this.spriteFrame=null,this.isRemove=!0,this.isHighLight=!1,!0)},e.prototype.hideCube=function(){this._model.cubeIsPutIn=!1,this.setActive(!1),this.setNormalSprite()},e.prototype.setSprite=function(t,e){this.setActive(!0),this.isShaderSprite=!1,this.node.scale=cfg.const.cubeScale,this.spriteFrame=e,this.atlas=app.res.loadAtlas(cfg.res.atlas.block_cube),this.node.color=cc.color(255,255,255),0==t?this.node.color=cc.color(153,153,153):this.setNormalSprite()},e.prototype.onShowHighLight=function(){this.setActive(!0),this.node.active=!0,this.node.opacity=255,this.node.scale=cfg.const.cubeScale,this.isShaderSprite=!1,this.isHighLight=!0,this.node.getComponent(cc.Sprite).spriteFrame=this.atlas.getSpriteFrame("xuanzhong_efc"),this.node.scale=1.2},e.prototype.onSetDeathTimes=function(t){this.deathTimes=t,this.sprite_stone1&&(this.sprite_stone1.node.active=!1),this.sprite_stone2&&(this.sprite_stone2.node.active=!1),2==t?this.sprite_stone1.node.active=!0:3==this.deathTimes&&(this.sprite_stone2.node.active=!0)},e.prototype.showShader=function(t){this.node.active=!0,this.node.opacity=150,this.setActive(!0),this.isShaderSprite=!1,this.tempSpriteFrame=t,this.node.scale=cfg.const.cubeScale,this.node.getComponent(cc.Sprite).spriteFrame=this.atlas.getSpriteFrame(t)},e.prototype.die=function(t,e,o){this.scheduleOnce(function(){null!=o&&o?this.node.color=this.deathColor:(this.deathColor=this.node.color,this.node.color=t)},e)},e.prototype.onResuseCube=function(){this.node.color=cc.color(255,255,255)},e.prototype.onHideLighLightAction=function(){this.node.stopAllActions(),this.node.active=!1,this.isHighLight=!1},e.prototype.hideShader=function(){this.node.active=!1,this.setActive(!1),this.isShaderSprite=!1,this.img_highLight&&(this.node.scale=1,this.img_highLight.node.active=!1)},e.prototype.setActive=function(t){this.cube_isActive=t,this.enabled=this.cube_isActive},e.prototype.setShaderSprite=function(t,e){void 0===e&&(e=!1),this.node.getComponent(cc.Sprite).spriteFrame=this.atlas.getSpriteFrame(t),this.isShaderSprite=!1,this.img_highLight&&(this.node.scale=1.1,this.img_highLight.node.active=!0,this.img_highLight.node.scale=1.4,e&&(this.node.scale=1.1,this.img_highLight.node.scale=.8,this.isShaderSprite=!0))},e.prototype.setNormalSprite=function(){this.spriteFrame&&(this.node.getComponent(cc.Sprite).spriteFrame=this.atlas.getSpriteFrame(this.spriteFrame)),this.isShaderSprite=!1,this.img_highLight&&(this.node.scale=1,this.img_highLight.node.active=!1),this.sprite_stone1&&(this.sprite_stone1.node.active=!1),this.sprite_stone2&&(this.sprite_stone2.node.active=!1),2==this.deathTimes?this.sprite_stone1.node.active=!0:3==this.deathTimes&&(this.sprite_stone2.node.active=!0)},e.prototype.getWorldPosition=function(){return this.node.convertToWorldSpaceAR(cc.v2(0,0))},n([s],e)}(cc.Component));o.default=l,cc._RF.pop()},{"../../models/CubeModel":"CubeModel"}],DailyChallengeTools:[function(t,e,o){"use strict";cc._RF.push(e,"cbd28UJOZtD/6l3mYOGJn/o","DailyChallengeTools"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function t(){this._seed=0}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},Object.defineProperty(t.prototype,"seed",{set:function(t){this._seed=t},enumerable:!1,configurable:!0}),t.prototype.random=function(t,e){void 0===t&&(t=0),void 0===e&&(e=1),this._seed=(9301*this._seed+49297)%233280;var o=t+this._seed/233280*(e-t);return 0==t&&1==e?o:Math.ceil(o)},t.prototype.generateMap=function(){var t=new Array(9);t.fill([]);for(var e=0;e<t.length;e++){var o=new Array(9);o.fill(null),t[e]=o}return t},t.prototype.generateScoreMap=function(t){this._seed=t;for(var e=this.generateMap(),o=0;o<e.length;o++)for(var a=e[o],n=0;n<5;n++){var c=this.random();if(c<.4){var r=new i;if(r.ice=c<.1,a[n]=r,n<4){var s=new i;s.ice=c<.1,a[8-n]=s}}}return{score:500,map:e}},t.prototype.generateCollectMap=function(t){this._seed=t},t.prototype.generateClearMap=function(t){this._seed=t},t.instance=null,t}();o.default=a;var i=function(){function t(){this._ice=!1,this._star=!1}return Object.defineProperty(t.prototype,"ice",{get:function(){return this._ice},set:function(t){this._ice=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"star",{get:function(){return this._star},set:function(t){this._star=t},enumerable:!1,configurable:!0}),t}();cc._RF.pop()},{}],DailyView:[function(t,e,o){"use strict";cc._RF.push(e,"d00f9k0wctJ+p5p12TmVAPb","DailyView");var a,i=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,a){var i,n=arguments.length,c=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,a);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../utils/AdManageTools"),r=t("../utils/BlockPuzzleEffTools"),s=cc._decorator,l=s.ccclass,u=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.item=null,e.daily_text=null,e.today_time=null,e.now_progress=null,e.btn_left=null,e.btn_right=null,e.btn_play=null,e.btn_disPlay=null,e.tranLabel=new Array,e.curDR=null,e.gameEffModel=null,e.atlas=null,e}return i(e,t),e.prototype.onLoad=function(){this.gameEffModel=new r.default,this.AdManageTools=new c.default;var t=new Date;this.month=t.getMonth(),-1!=cfg.const.clickDailyMonth&&(this.month=cfg.const.clickDailyMonth-1),this.btn_disPlay.node.active=!0,this.btn_play.node.active=!1,this.atlas=app.res.loadAtlas(cfg.res.atlas.block_img),this.atlas_other=app.res.loadAtlas(cfg.res.atlas.new_ui),app.event.on(cfg.event.SHOW_EXITGAME,this.onCloseClick,this);var e=app.Utils.getStringFromLocal("save_PlayTime_Date");e=e&&""!=e?JSON.parse(e):[],this.saveDataArr=e;var o=app.Utils.getStringFromLocal("first_open_time");o=o&&""!=o?JSON.parse(o):t.getFullYear()+"-"+(t.getMonth()+1),this.first_open_time=o,this.onUpdateProgress(),this.onChangeLanguage(),this.onLoadData(this.month)},e.prototype.onUpdateProgress=function(){this.now_progress.progress=0;var t=this.getAllChallengeNum();console.log("========\u5df2\u5b8c\u6210\u6311\u6218\uff1a=========",t);var e=t/30;this.now_progress.progress=e,cfg.const.maxChallengeNum=t},e.prototype.getAllChallengeNum=function(){for(var t=new Date,e=t.getMonth(),o=this.getAllDays(t.getFullYear(),e+1),a=this.month,i=0,n=0;n<o;n+=1)this.nowDayIsSuccess(n+1,a+1)&&i++;var c=this.getAllDays(t.getFullYear(),e),r=e;for(0==e&&(c=this.getAllDays(t.getFullYear()-1,12),r=12),n=0;n<c;n+=1)this.nowDayIsSuccess(n+1,r)&&i++;return i},e.prototype.onLeftClick=function(){this.month--,this.month<=-1?this.month=0:this.onLoadData(this.month)},e.prototype.onRightClick=function(){this.month++,this.month>=12?this.month=12:this.onLoadData(this.month)},e.prototype.onLoadData=function(t){void 0===t&&(t=-1);var e=new Date,o=new Date,a=o.getMonth(),i=e.getMonth();-1!=t&&(e.setMonth(t),o.setMonth(t),i=t),this.btn_right.node.active=!1,this.btn_left.node.active=!1,t==a?this.btn_right.node.active=!0:this.btn_left.node.active=!0;var n=(o=new Date(o.setDate(1))).getDay();0==n&&(n=7),this.content.removeAllChildren();var c=this.getAllDays(e.getFullYear(),i+1),r=e.getDate(),s=this.getStrMonth(i);this.daily_text.getComponent(cc.Label).string=s;for(var l=[],u=0;u<n-1;u++){var h=cc.instantiate(this.item);l[u]=h,l[u].bgItem=h.getChildByName("img_day"),l[u].bgItem.active=!1,l[u].img_diamand=h.getChildByName("img_crown"),l[u].img_diamand.active=!1,l[u].img_isClick=h.getChildByName("img_isClick"),l[u].img_isClick.active=!1,l[u].label=l[u].getChildByName("num"),l[u].label.active=!1,l[u].parent=this.content}var p=cfg.const.clickDailyMonth;-1==cfg.const.clickDailyMonth&&(p=a+1);var d=cfg.const.clickDaillyNum;if(-1==cfg.const.clickDaillyNum&&(d=r),this.clickMonth=t+1,this.clickTag=cfg.const.clickDaillyNum,this.items=[],null!=this.content)for(var g=function(e){var o=cc.instantiate(f.item);f.items[e]=o,f.items[e].tempTag=e+1,f.items[e].bgItem=o.getChildByName("img_day"),f.items[e].canClick=!1,f.items[e].label=o.getChildByName("num").getComponent(cc.Label),f.items[e].label.string=(e+1).toString(),f.items[e].parent=f.content,f.items[e].bgItem.getComponent(cc.Sprite).spriteFrame=f.atlas.getSpriteFrame("img_date_available"),f.items[e].img_diamand=o.getChildByName("img_crown"),f.items[e].img_diamand.getComponent(cc.Sprite).node.active=!1,f.items[e].img_isClick=o.getChildByName("img_isClick"),f.items[e].img_isClick.getComponent(cc.Sprite).node.active=!1;var i=f.nowDayIsSuccess(e+1,t+1);e+1<=r?(f.items[e].label.node.color=cc.color(255,255,255,255),f.items[e].bgItem.getComponent(cc.Sprite).spriteFrame=f.atlas.getSpriteFrame("img_date_available")):(f.items[e].label.node.color=cc.color(102,96,104,255),f.items[e].bgItem.getComponent(cc.Sprite).spriteFrame=f.atlas_other.getSpriteFrame("black_bg")),a>t&&!i&&(f.items[e].label.node.color=cc.color(255,255,255,255),f.items[e].bgItem.getComponent(cc.Sprite).spriteFrame=f.atlas.getSpriteFrame("img_date_available"),f.items[e].bgItem.on(cc.Node.EventType.TOUCH_END,function(){this.btnClick(this.items[e])},f),f.items[e].canClick=!0),d!=e+1||p!=t+1||i||(f.btn_disPlay.node.active=!1,f.btn_play.node.active=!0,f.items[e].canClick=!0,f.items[e].img_diamand.getComponent(cc.Sprite).node.active=!1,f.items[e].bgItem.getComponent(cc.Sprite).spriteFrame=f.atlas.getSpriteFrame("img_date_active"),f.items[e].bgItem.on(cc.Node.EventType.TOUCH_END,function(){this.btnClick(this.items[e])},f)),i?(f.items[e].img_isClick.getComponent(cc.Sprite).node.active=!0,f.items[e].img_diamand.getComponent(cc.Sprite).node.active=!0,f.items[e].bgItem.on(cc.Node.EventType.TOUCH_END,function(){this.btnChallengeClick(this.items[e])},f),d==e+1&&p==t+1&&(f.btn_disPlay.node.active=!0,f.btn_play.node.active=!1)):e+1<=r&&a==t&&(f.items[e].canClick=!0,f.items[e].bgItem.on(cc.Node.EventType.TOUCH_END,function(){this.btnClick(this.items[e])},f))},f=this,b=0;b<c;b+=1)g(b)},e.prototype.btnChallengeClick=function(){app.audio.playSound("button"),this.btn_disPlay.node.active=!0,this.btn_play.node.active=!1;for(var t=0;t<this.items.length;t++)this.items[t].canClick&&(this.items[t].bgItem.getComponent(cc.Sprite).spriteFrame=this.atlas.getSpriteFrame("img_date_available"))},e.prototype.btnClick=function(t){app.audio.playSound("button"),this.btn_disPlay.node.active=!1,this.btn_play.node.active=!0;for(var e=t.tempTag,o=0;o<this.items.length;o++)this.items[o].canClick&&(e==this.items[o].tempTag?this.items[o].bgItem.getComponent(cc.Sprite).spriteFrame=this.atlas.getSpriteFrame("img_date_active"):this.items[o].bgItem.getComponent(cc.Sprite).spriteFrame=this.atlas.getSpriteFrame("img_date_available"),this.clickTag=e)},e.prototype.nowDayIsSuccess=function(t,e){for(var o=this.saveDataArr,a=0;a<o.length;a++)if(o[a]){var i=o[a].date.split("-");if(parseInt(i[1])==t&&e==parseInt(i[0]))return!0}return!1},e.prototype.onPlayClick=function(){app.audio.playSound("button");var t=new Date;cfg.const.isDailyChallenge=!0,app.event.off(cfg.event.SHOW_EXITGAME),cfg.const.clickDaillyNum=-1==this.clickTag?t.getDate():this.clickTag,cfg.const.clickDailyMonth=this.clickMonth,cfg.const.randomNum=this.getRandomNum(cfg.const.clickDaillyNum,cfg.const.clickDailyMonth),app.view.showChallengeView(),this.node.removeFromParent(),app.LogEvent.showLogEventWithName("NewGame_Daily"),this.AdManageTools.showInterstitialAd()},e.prototype.getRandomNum=function(t,e){return 31*e+t},e.prototype.getStrMonth=function(t){return app.tranLanguage.loadStrByKey(["UI_Daily10","UI_Daily11","UI_Daily12","UI_Daily13","UI_Daily14","UI_Daily15","UI_Daily16","UI_Daily17","UI_Daily18","UI_Daily19","UI_Daily20","UI_Daily21"][t])},e.prototype.getAllDays=function(t,e){var o=!1;return(t%400==0||t%4==0&&t%100!=0)&&(o=!0),[31,o?29:28,31,30,31,30,31,31,30,31,30,31][e-1]},e.prototype.onCloseClick=function(){var t=(new Date).getTime();t-this.time<=3e3||(this.time=t,cfg.const.hasNineGame_Daily&&(cfg.const.gameRowNum=9,cfg.const.gameColNum=9,cfg.const.cubeSpriteWidth=76.5,cfg.const.cubeScale=1),app.audio.playSound("button"),this.node.removeFromParent(),app.event.dispatch(cfg.event.GOTO_MAINVIEW))},e.prototype.onChangeLanguage=function(){for(var t=["UI-Menu_1","UI_Daily"+(10+this.month),"UI_Daily22","UI_Daily23","UI_Daily24","UI_Daily25","UI_Daily26","UI_Daily27","UI_Daily28","UI-Menu_3","UI-new6"],e=0;e<this.tranLabel.length;e++){var o=app.tranLanguage.loadStrByKey(t[e]);o&&(this.tranLabel[e].getComponent(cc.Label).string=o)}},n([u(cc.Node)],e.prototype,"content",void 0),n([u(cc.Node)],e.prototype,"item",void 0),n([u(cc.Node)],e.prototype,"daily_text",void 0),n([u(cc.Label)],e.prototype,"today_time",void 0),n([u(cc.ProgressBar)],e.prototype,"now_progress",void 0),n([u(cc.Button)],e.prototype,"btn_left",void 0),n([u(cc.Button)],e.prototype,"btn_right",void 0),n([u(cc.Button)],e.prototype,"btn_play",void 0),n([u(cc.Button)],e.prototype,"btn_disPlay",void 0),n([u([cc.Label])],e.prototype,"tranLabel",void 0),n([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../utils/AdManageTools":"AdManageTools","../utils/BlockPuzzleEffTools":"BlockPuzzleEffTools"}],EventCfg:[function(t,e,o){"use strict";cc._RF.push(e,"d0cc4SBgLJE1appqaENzYH9","EventCfg"),Object.defineProperty(o,"__esModule",{value:!0}),o.default={SORT_TOUCH_START:"SORT_TOUCH_START",CHECK_GAME_OVER:"CHECK_GAME_OVER",CHANGE_LANGUAGE:"CHANGE_LANGUAGE",NEW_GAME_START:"NEW_GAME_START",END_SETTING:"END_SETTING",SHOW_BANNER:"SHOW_BANNER",EXIT_VIEW:"EXIT_VIEW",REMOVE_CUBE:"REMOVE_CUBE",SHOW_EXITGAME:"SHOW_EXITGAME",ROTATE_CUBESTACK:"ROTATE_CUBESTACK",SHOW_REWARDFAIED:"SHOW_REWARDFAIED",SHOW_TIPS_CHALLENGE:"SHOW_TIPS_CHALLENGE",GOTO_MAINVIEW:"GOTO_MAINVIEW",GOTO_SETTING:"GOTO_SETTING",GOTO_CHALLENGEVIEW:"GOTO_CHALLENGEVIEW",SHOW_GOTOMAINVIEW:"SHOW_GOTOMAINVIEW",CHALLENGE_BACK:"CHALLENGE_BACK",UPDATE_STYLE:"UPDATE_STYLE",CHAGE_MAP:"CHAGE_MAP",CLICK_CUBE:"CLICK_CUBE",MAPPUZZLE_REPLAY:"MAPPUZZLE_REPLAY",CLOSER_INTER:"CLOSER_INTER",SHOW_SUCCESS:"SHOW_SUCCESS",CHANGE_ROTATENUM:"CHANGE_ROTATENUM",ROTATE_REPLAY:"ROTATE_REPLAY",BACK_HOME:"BACK_HOME",GET_REWARDED:"GET_REWARDED",EXIT_RECORDVIEW:"EXIT_RECORDVIEW"},cc._RF.pop()},{}],EventCpn:[function(t,e,o){"use strict";cc._RF.push(e,"2b322tOsDNMN4paV7+jH+nJ","EventCpn"),Object.defineProperty(o,"__esModule",{value:!0});var a=t("../views/utils/AdManageTools"),i=function(){function t(){this.eventTarget=null,this.isAdbEvent=!1,this.eventTarget=new cc.EventTarget,this.AdManageTools=new a.default}return t.getInstance=function(){return t.instance||(t.instance=new t,t.instance.initGameEvent()),t.instance},t.prototype.on=function(t,e,o){this.eventTarget.on(t,e,o)},t.prototype.off=function(t,e,o){this.eventTarget.off(t,e,o)},t.prototype.targetOff=function(t){this.eventTarget.targetOff(t)},t.prototype.dispatch=function(t,e,o){void 0===e&&(e={}),void 0===o&&(o=!1);var a=new cc.Event.EventCustom(t,o);a.setUserData(e),this.eventTarget.dispatchEvent(a)},t.prototype.initGameEvent=function(){var t=this;cc.game.on(cc.game.EVENT_HIDE,function(){console.log("\u6e38\u620f\u8fdb\u5165Event\u540e\u53f0"),t.isAdbEvent=cfg.const.isGameBackByAdb},this),cc.game.on(cc.game.EVENT_SHOW,function(){console.log("\u6e38\u620f\u8fdb\u5165Event\u524d\u53f0"),console.log("---------EVENT_SHOW----------",t.isAdbEvent),t.isAdbEvent=!1,cfg.const.isGameBackByAdb=!1},this)},t.prototype.initTotalGameEvent=function(){cc.game.on(cc.game.EVENT_HIDE,function(){console.log("\u6e38\u620f\u8fdb\u5165TotalGameEvent\u540e\u53f0")},this),cc.game.on(cc.game.EVENT_SHOW,function(){console.log("\u6e38\u620f\u8fdb\u5165TotalGameEvent\u524d\u53f0"),cc.game.off(cc.game.EVENT_SHOW),cc.game.off(cc.game.EVENT_HIDE),app.event.initGameEvent()},this)},t.instance=null,t}();o.default=i,cc._RF.pop()},{"../views/utils/AdManageTools":"AdManageTools"}],FacebookCpn:[function(t,e,o){"use strict";cc._RF.push(e,"c32a8KuBKpGoYvWUEptPT3d","FacebookCpn");var a=this&&this.__decorate||function(t,e,o,a){var i,n=arguments.length,c=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,a);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../views/utils/SDKTools"),n=cc._decorator,c=n.ccclass,r=(n.property,function(){function t(){this.fbi=null,this.tag="FACEBOOK_TAG",this.bannerAdId="589653475391269_589654508724499",this.interstitialAdId="589653475391269_589654672057816",this.rewardedVideoAdId="589653475391269_589654835391133",this.interstitialAd=null,this.rewardedVideoAd=null,this._hasInterstitialAd=!1,this._hasRewardedVideoAd=!1,this.platformName="Unknow",this.rewarded_tag="",this.fbi=window.FBInstant,console.log(this.fbi),this.init()}var e;return e=t,t.getInstance=function(){return this.instance||(this.instance=new e),this.instance},t.prototype.init=function(){this.fbi&&(console.log(this.tag,"init"),this.fbi.getPlatform()&&(this.platformName=this.fbi.getPlatform()),"WEB"==this.platformName&&(this.bannerAdId="589653475391269_757104315312850",this.interstitialAdId="589653475391269_757104438646171",this.rewardedVideoAdId="589653475391269_757105921979356"),this.initInterstitialAd(),this.initRewardedVideoAd(),i.default.getNowLocalLanguage(this.getLocale()))},t.prototype.isFbi=function(){return null!=this.fbi},t.prototype.quit=function(){this.fbi&&this.fbi.quit()},t.prototype.initBannerAd=function(){var t=this;this.fbi&&(window.setInterval(function(){t.loadBannerAd()},45e3),this.loadBannerAd())},t.prototype.loadBannerAd=function(){var t=this;this.fbi&&(console.log(this.tag,"loadBannerAd"),this.fbi.loadBannerAdAsync(this.bannerAdId).then(function(){console.log(t.tag,"banner ad load success")}).catch(function(e){console.log(t.tag,e)}))},t.prototype.hideBannerAd=function(){this.fbi&&(console.log("hideBannerAd"),this.fbi.hideBannerAdAsync())},t.prototype.initInterstitialAd=function(){var t=this;this.fbi.getInterstitialAdAsync(this.interstitialAdId).then(function(e){t.interstitialAd=e,t.loadInterstitialAd()})},t.prototype.initRewardedVideoAd=function(){var t=this;this.fbi.getRewardedVideoAsync(this.rewardedVideoAdId).then(function(e){t.rewardedVideoAd=e,t.loadRewardedVideoAd()})},t.prototype.loadInterstitialAd=function(){var t=this;this.interstitialAd&&(console.log(this.tag,"loadInterstitialAd"),this.interstitialAd.loadAsync().then(function(){console.log(t.tag,"interstitial ad load success"),t._hasInterstitialAd=!0}).catch(function(e){console.log(t.tag,e),window.setTimeout(function(){t.loadInterstitialAd()},6e4)}))},t.prototype.loadRewardedVideoAd=function(){var t=this;this.rewardedVideoAd&&(console.log(this.tag,this.rewardedVideoAd),this.rewardedVideoAd.loadAsync().then(function(){console.log(t.tag,"rewarded video ad load success"),t._hasRewardedVideoAd=!0,t.rewarded_tag="0"}).catch(function(e){console.log(t.tag,e),window.setTimeout(function(){t.loadRewardedVideoAd()},6e4)}))},t.prototype.showInterstitialAd=function(){var t=this;this.interstitialAd&&(console.log(this.tag,"showInterstitialAd"),this.interstitialAd.showAsync().then(function(){console.log(t.tag,"interstitial ad show success"),t._hasInterstitialAd=!1,t.initInterstitialAd()}).catch(function(e){console.log(t.tag,e),"ADS_NOT_LOADED"==e.code||"RATE_LIMITED"==e.code||(t._hasInterstitialAd=!1,t.loadInterstitialAd())}))},t.prototype.showRewardedVideoAd=function(t){var e=this;this.rewardedVideoAd&&(console.log(this.tag,"showRewardedVideoAd"),this.rewardedVideoAd.showAsync().then(function(){console.log(e.tag,"rewarded video ad show success"),e._hasRewardedVideoAd=!1,e.initRewardedVideoAd(),e.rewarded_tag="3",e.rewardedTag(t)}).catch(function(o){console.log(e.tag,o),e.rewarded_tag="1","ADS_NOT_LOADED"==o.code||("RATE_LIMITED"==o.code?e.rewarded_tag="2":"USER_INPUT"==o.code?(e._hasRewardedVideoAd=!1,e.initRewardedVideoAd()):(e._hasRewardedVideoAd=!1,e.loadRewardedVideoAd())),e.rewardedTag(t)}))},t.prototype.rewardedTag=function(t){"rewardedAd"==t?i.default.onRewardedAd(this.rewarded_tag):"challenge_rewardedAd"==t?i.default.onChallengeRewardedAd(this.rewarded_tag):"rotate_rewardedAd"==t&&i.default.onGetRotateRewardedAd(this.rewarded_tag)},t.prototype.hasInterstitialAd=function(){return this._hasInterstitialAd},t.prototype.hasRewardedVideoAd=function(){return this._hasRewardedVideoAd},t.prototype.getLocale=function(){return this.isFbi?this.fbi.getLocale():""},t.instance=null,e=a([c],t)}());o.default=r,cc._RF.pop()},{"../views/utils/SDKTools":"SDKTools"}],GDADMgr:[function(t,e,o){"use strict";cc._RF.push(e,"f45cdVSk+dFWIiXCgCY/njd","GDADMgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.gdAdMgr=void 0;var a=function(){function t(){this.gdsdk=null,this.canShowBanner=!0}return t.prototype.init=function(){this.gdsdk=window.gdsdk},t.prototype.isGD=function(){return void 0!==this.gdsdk&&"undefined"!==this.gdsdk.showAd},t.prototype.showBanner=function(){},t.prototype.hideBanner=function(){},t.prototype.showRewardAD=function(){console.log("showRewardAD---------------------\x3e"),void 0!==this.gdsdk&&"undefined"!==this.gdsdk.showAd&&this.gdsdk.showAd("rewarded").then(function(){}).catch(function(){})},t.prototype.showInterstitial=function(){console.log("showInterstitial---------------------\x3e"),void 0!==this.gdsdk&&"undefined"!==this.gdsdk.showAd&&this.gdsdk.showAd().then(function(){}).catch(function(){})},t}();o.gdAdMgr=new a,cc._RF.pop()},{}],InitCpn:[function(t,e,o){"use strict";cc._RF.push(e,"e856aJI119Aqq+Jm+iik4bx","InitCpn"),Object.defineProperty(o,"__esModule",{value:!0});var a=t("./ConstCfg"),i=t("../configs/MapTypeCfg"),n=t("../configs/EventCfg"),c=t("../configs/ResCfg"),r=t("./AudioCpn"),s=t("./MapTypeCpn"),l=t("./EventCpn"),u=t("./LogEventCpn"),h=t("./ResCpn"),p=t("./StorageCpn"),d=t("./Utils"),g=t("./ViewCpn"),f=t("./TranLanguageCpn"),b=t("./progressData"),m=t("./DailyChallengeTools"),S=t("./FacebookCpn"),y=t("./TutorialsMapCpn"),v=t("./PlatformCpn"),_=function(){function t(){var t={};window.cfg=t,t.const=a.default,t.event=n.default,t.res=c.default,t.map=i.default;var e={};window.app=e,e.audio=r.default.getInstance(),e.event=l.default.getInstance(),e.res=h.default.getInstance(),e.storage=p.default.getInstance(),e.view=g.default.getInstance(),e.map=s.default.getInstance(),e.Utils=d.default.getInstance(),e.LogEvent=u.default.getInstance(),e.tranLanguage=f.default.getInstance(),e.progressData=b.default.getInstance(),e.facebook=S.default.getInstance(),e.dailyTools=m.default.getInstance(),e.tutorialData=y.default.getInstance(),e.platform=v.default.getInstance()}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.instance=null,t}();o.default=_,cc._RF.pop()},{"../configs/EventCfg":"EventCfg","../configs/MapTypeCfg":"MapTypeCfg","../configs/ResCfg":"ResCfg","./AudioCpn":"AudioCpn","./ConstCfg":"ConstCfg","./DailyChallengeTools":"DailyChallengeTools","./EventCpn":"EventCpn","./FacebookCpn":"FacebookCpn","./LogEventCpn":"LogEventCpn","./MapTypeCpn":"MapTypeCpn","./PlatformCpn":"PlatformCpn","./ResCpn":"ResCpn","./StorageCpn":"StorageCpn","./TranLanguageCpn":"TranLanguageCpn","./TutorialsMapCpn":"TutorialsMapCpn","./Utils":"Utils","./ViewCpn":"ViewCpn","./progressData":"progressData"}],LanguageView:[function(t,e,o){"use strict";cc._RF.push(e,"6d137KZbU9Lx6fWi6EdDRdw","LanguageView");var a,i=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,a){var i,n=arguments.length,c=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,a);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,r=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.action_node=null,e.content=null,e.item=null,e.scrollView=null,e.label_text=null,e.curDR=null,e}return i(e,t),e.prototype.onLoad=function(){this.initLanguageDataList(),app.event.on(cfg.event.SHOW_EXITGAME,this.onCloseClick,this),this.onChangeLanguage(),app.Utils.onViewAction(this.action_node)},e.prototype.onCloseClick=function(){app.audio.playSound("button"),app.event.off(cfg.event.SHOW_EXITGAME),this.node.removeFromParent(),app.event.dispatch(cfg.event.GOTO_SETTING)},e.prototype.initLanguageDataList=function(){this.tempItems=[],this.content.removeAllChildren(),this.atlas=cfg.const.gameUiAtlas;var t=["English","\u7b80\u4e2d","\u7e41\u4e2d","Dansk","Deutsch","Fran\xe7ais","\ud55c\uad6d\uc5b4","Nederlands","Portugu\xeas","\u65e5\u672c\u8a9e","Espa\xf1ol","Italiano","\u0420\u0443\u0441\u0441\u043a\u0438\u0439","Bahasa Indonesia","\u0939\u093f\u0928\u094d\u0926\u0940","T\xfcrk","\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0438\u0439","Filipino","Bahasa Melayu","\u010ce\u0161tina","Sloven\u010dina","Svenska","Polski","\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22","\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac","Ti\u1ebfng Vi\u1ec7t","\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438","Eesti","Latvie\u0161u","Lietuvi\u0173","Shqip","Hrvatski","Bosanski","Suomi","Norsk","Rom\xe2n\u0103","Sloven\u0161\u010dina"],e=app.Utils.getStringFromLocal("savelanguageClick");e&&""!=e||(e=0),this.allNameArr=[],this.clickTag=0;for(var o=0,a=function(a){var n=cc.instantiate(i.item);i.tempItems[a]=n,i.tempItems[a].parent=i.content,o++,i.tempItems[a].tempTag=a,n.getChildByName("text").getComponent(cc.Label).string=t[a];var c=n.getChildByName("img_off");c.active=!0,i.tempItems[a].isNotClick=c;var r=n.getChildByName("img_on");r.active=a==e,r.active&&(c.active=!1),i.tempItems[a].isClick=r,r.on(cc.Node.EventType.TOUCH_END,function(){this.btnClick(this.tempItems[a])},i),n.on(cc.Node.EventType.TOUCH_END,function(){this.btnClick(this.tempItems[a])},i)},i=this,n=0;n<37;n++)a(n);var c=115*o;this.content.setContentSize(cc.size(770,c))},e.prototype.btnClick=function(t){app.audio.playSound("button"),this.clickTag=t.tempTag;for(var e=0;e<this.tempItems.length;e++){var o=t.tempTag==this.tempItems[e].tempTag;this.tempItems[e].isClick.active=o,this.tempItems[e].isNotClick.active=!o}this.onSaveLanguage()},e.prototype.onSaveLanguage=function(){var t=["language_en","language_zh","language_traZh","language_dansk","language_de","language_fr","language_kor","language_neder","language_por","language_jp","language_es","language_ita","language_russ","language_ind","language_hindi","language_turkey","language_ukraine","language_filip","language_Bahasa","language_Cestina","language_Sloven","language_Sven","language_Polski","language_thai","language_gree","language_viet","language_bulgar","language_eston","language_latv","language_lithu","language_alban","language_hrvat","language_serbia","language_suomi","language_norsk","language_romana","language_sloven"][this.clickTag];app.Utils.saveStringToLocal("savelanguageClick",this.clickTag),app.Utils.saveStringToLocal("save_language",t),cfg.const.language=t,this.onChangeLanguage(),app.tranLanguage.onSaveLanguage(t),app.event.dispatch(cfg.event.CHANGE_LANGUAGE)},e.prototype.onChangeLanguage=function(){var t=app.tranLanguage.loadStrByKey("UI-Settings_1");t&&(this.label_text.getComponent(cc.Label).string=t)},n([s(cc.Node)],e.prototype,"action_node",void 0),n([s(cc.Node)],e.prototype,"content",void 0),n([s(cc.Node)],e.prototype,"item",void 0),n([s(cc.ScrollView)],e.prototype,"scrollView",void 0),n([s(cc.Label)],e.prototype,"label_text",void 0),n([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],Lib:[function(t,e,o){"use strict";cc._RF.push(e,"f165cvDYHRNmKEYY8EPCO6H","Lib");var a,i=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,a){var i,n=arguments.length,c=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,a);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,r=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return i(e,t),e.prototype.start=function(){},n([s(cc.Label)],e.prototype,"label",void 0),n([s],e.prototype,"text",void 0),n([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],LoadingScene:[function(t,e,o){"use strict";cc._RF.push(e,"6b0756cRZRCraqGqO8JP7i9","LoadingScene");var a,i=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,a){var i,n=arguments.length,c=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,a);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../components/InitCpn"),r=t("../../GD/GDADMgr"),s=cc._decorator,l=s.ccclass,u=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.progressBar=null,e.loading_Label=null,e.bgMask=null,e.curDR=null,e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.progressBar.progress=0,this.loading_Label.string="loading.....0%",cc.debug.setDisplayStats(!1),cc.view.setResizeCallback(function(){return t.resize()}),this.resize(),this.startGame(),r.gdAdMgr.init()},e.prototype.startGame=function(){var t=this;c.default.getInstance();var e=[];for(var o in cfg.res)if(Object.prototype.hasOwnProperty.call(cfg.res,o)){var a=cfg.res[o];for(var i in a)if(Object.prototype.hasOwnProperty.call(a,i)){var n=a[i];e.push(n)}}var r="mainScene",s=app.Utils.getStringFromLocal("today"),l=app.Utils.getStringFromLocal("mainGame_MapData");r=""!=l&&l?"mainGameScene":"mainScene",s&&""!=s||(cfg.const.isDailyChallenge=!1,r="mainGameScene"),cfg.const.typeUi=this.styleType,cfg.const.gameUiAtlas=this.atlas,cc.resources.load(e,function(e,o){var a=e/o;if(a>=t.progressBar.progress){t.progressBar.progress=a;var i="loading....."+Math.floor(e/o*100)+"%";t.loading_Label.string=i}},function(t){t?cc.log(t):cc.director.loadScene(r,function(){})})},e.prototype.resize=function(){var t=cc.find("Canvas").getComponent(cc.Canvas);this.curDR||(this.curDR=t.designResolution);var e=this.curDR,o=cc.view.getFrameSize(),a=o.width,i=o.height,n=a,c=i;a/i>e.width/e.height?n=(c=e.height)*a/i:c=i/a*(n=e.width),t.designResolution=cc.size(n,c),t.node.width=n,t.node.height=c,t.node.emit("resize"),this.bgMask&&(this.bgMask.width=n,this.bgMask.height=c,this.bgMask.emit("resize"))},n([u(cc.ProgressBar)],e.prototype,"progressBar",void 0),n([u(cc.Label)],e.prototype,"loading_Label",void 0),n([u(cc.Node)],e.prototype,"bgMask",void 0),n([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../GD/GDADMgr":"GDADMgr","../../components/InitCpn":"InitCpn"}],LogEventCpn:[function(t,e,o){"use strict";cc._RF.push(e,"acb44bgeLVNHbN1A+xoKgP6","LogEventCpn"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function t(){}return t.prototype.showLogEventWithName=function(t,e){void 0===e&&(e=null),cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative?jsb.reflection.callStaticMethod("AnalyticsHelper","logEventWithName:",t):cc.sys.os!=cc.sys.OS_ANDROID&&cc.sys.os!=cc.sys.OS_LINUX||!cc.sys.isNative||jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AppHelper","logEventWithName","(Ljava/lang/String;)V",t)},t.prototype.showLogEventWithNameByParam=function(t,e){void 0===e&&(e=null),cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative?jsb.reflection.callStaticMethod("AnalyticsHelper","logEventWithName:",t):cc.sys.os!=cc.sys.OS_ANDROID&&cc.sys.os!=cc.sys.OS_LINUX||!cc.sys.isNative||jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AppHelper","logEventWithNameByParm","(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V",t,"nums",""+e)},t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.instance=null,t}();o.default=a,cc._RF.pop()},{}],MainScene:[function(t,e,o){"use strict";cc._RF.push(e,"63a5dEHsz9D9JfjqFZuUixR","MainScene");var a,i=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,a){var i,n=arguments.length,c=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,a);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../components/InitCpn"),r=t("../utils/AdManageTools"),s=t("../utils/SDKTools"),l=cc._decorator,u=l.ccclass,h=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgMask=null,e.btn_challenge=null,e.btn_down=null,e.best_score=null,e.tranLabel=new Array,e.AdManageTools=null,e.curDR=null,e}return i(e,t),e.prototype.onLoad=function(){var t=this;c.default.getInstance(),s.default.init(),this.AdManageTools=new r.default,app.event.on(cfg.event.SHOW_EXITGAME,this.onShowExitGame,this),app.event.on(cfg.event.CHANGE_LANGUAGE,this.onChangeLanguage,this),app.event.on(cfg.event.GOTO_MAINVIEW,this.onGotoMainView,this),cc.debug.setDisplayStats(!1),cc.view.setResizeCallback(function(){return t.resize()}),this.resize(),cc.tween(this.node).delay(.1).call(function(){t.AdManageTools.onHideLogo()}).start();var e=app.Utils.getStringFromLocal("highScore");e&&""!=e||(e=0),this.best_score.getComponent(cc.Label).string=e,this.initSoundAndLanguage(),this.AdManageTools.hideBanner();var o=app.Utils.getStringFromLocal("save_PlayTime_Date");o=o&&""!=o?JSON.parse(o):[],this.saveDataArr=o;var a=new Date;this.nowDayIsSuccess(a.getDate(),a.getMonth()+1)?(this.btn_challenge.node.active=!1,this.btn_down.node.active=!0):(this.btn_challenge.node.active=!0,this.btn_down.node.active=!1)},e.prototype.nowDayIsSuccess=function(t,e){for(var o=this.saveDataArr,a=0;a<o.length;a++)if(o[a]){var i=o[a].date.split("-");if(parseInt(i[1])==t&&e==parseInt(i[0]))return!0}return!1},e.prototype.initSoundAndLanguage=function(){var t=app.Utils.getStringFromLocal("save_language");t&&""!=t?cfg.const.language=t:t=cfg.const.language,app.tranLanguage.onSaveLanguage(t);var e=app.Utils.getStringFromLocal("otherVolume");e&&""!=e||(e=0),cfg.const.soundVolume=e;var o=app.Utils.getStringFromLocal("otherMusic");o&&""!=o||(o=0),cfg.const.otherMusic=o},e.prototype.onGotoMainView=function(){app.event.on(cfg.event.SHOW_EXITGAME,this.onShowExitGame,this),this.AdManageTools.hideBanner()},e.prototype.resize=function(){var t=cc.find("Canvas").getComponent(cc.Canvas);this.curDR||(this.curDR=t.designResolution);var e=this.curDR,o=cc.view.getFrameSize(),a=o.width,i=o.height,n=a,c=i;a/i>e.width/e.height?n=(c=e.height)*a/i:c=i/a*(n=e.width),t.designResolution=cc.size(n,c),t.node.width=n,t.node.height=c,t.node.emit("resize"),this.bgMask&&(this.bgMask.width=n,this.bgMask.height=c,this.bgMask.emit("resize")),cfg.const.finalW=n,cfg.const.finalH=c},e.prototype.onSetBtnClick=function(){app.audio.playSound("button"),app.view.showMainSetView()},e.prototype.onScoreBtnClick=function(){app.audio.playSound("button"),app.view.showScoreView()},e.prototype.onStoreBtnClick=function(){app.audio.playSound("button"),app.view.showStoreView()},e.prototype.onRankBtnClick=function(){app.audio.playSound("button"),app.view.showRankView()},e.prototype.onRateBtnClick=function(){app.audio.playSound("button"),cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative?cc.sys.openURL("https://apps.apple.com/us/app/block-puzzle-gem-blast/id1577300311"):cc.sys.os!=cc.sys.OS_ANDROID&&cc.sys.os!=cc.sys.OS_LINUX||!cc.sys.isNative||cc.sys.openURL("https://play.google.com/store/apps/details?id=games.neverold.block.puzzle.gem.jewel")},e.prototype.onBtnClickByNine=function(){app.audio.playSound("button"),cfg.const.isDailyChallenge=!1,cc.director.loadScene("mainGameScene"),this.AdManageTools.initBanner(),app.LogEvent.showLogEventWithName("Game_9_Click"),this.AdManageTools.showInterstitialAd()},e.prototype.onNewGameClick=function(){app.audio.playSound("button"),cfg.const.isDailyChallenge=!1,app.Utils.saveStringToLocal("mainGame_MapData",""),app.LogEvent.showLogEventWithName("Replay_PAUSE_MAINCLICK"),app.Utils.saveStringToLocal("isRecordView","0"),app.Utils.saveStringToLocal("isRewardedView","0"),cc.director.loadScene("mainGameScene"),this.AdManageTools.initBanner(),this.AdManageTools.showInterstitialAd()},e.prototype.onBtnDailyChallengeClick=function(){app.audio.playSound("button"),cfg.const.hasNineGame_Daily=!1,app.event.off(cfg.event.SHOW_EXITGAME),app.view.showDailyView(),this.AdManageTools.initBanner(),app.LogEvent.showLogEventWithName("Game_Daily_Click"),this.AdManageTools.showInterstitialAd()},e.prototype.onPlayClick=function(){app.audio.playSound("button");var t=new Date;cfg.const.isDailyChallenge=!0,app.event.off(cfg.event.SHOW_EXITGAME),cfg.const.clickDaillyNum=t.getDate(),cfg.const.clickDailyMonth=t.getMonth()+1,this.AdManageTools.showInterstitialAd(),cfg.const.randomNum=this.getRandomNum(cfg.const.clickDaillyNum,cfg.const.clickDailyMonth),app.view.showChallengeView(),this.node.removeFromParent()},e.prototype.getRandomNum=function(t,e){return 31*e+t},e.prototype.mapPuzzleSceneClick=function(){app.audio.playSound("button"),cc.director.loadScene("mapPuzzleScene")},e.prototype.onShowExitGame=function(){var t=(new Date).getTime();t-this.time<=3e3||(this.time=t,this.AdManageTools.moveTaskToBack())},e.prototype.onChangeLanguage=function(){for(var t=["UI-Menu_5","UI-new5","UI-Menu_4","UI_5","UI-Statistics5"],e=0;e<this.tranLabel.length;e++){var o=app.tranLanguage.loadStrByKey(t[e]);o&&(this.tranLabel[e].getComponent(cc.Label).string=o)}},n([h(cc.Node)],e.prototype,"bgMask",void 0),n([h(cc.Button)],e.prototype,"btn_challenge",void 0),n([h(cc.Button)],e.prototype,"btn_down",void 0),n([h(cc.Node)],e.prototype,"best_score",void 0),n([h([cc.Label])],e.prototype,"tranLabel",void 0),n([u],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../components/InitCpn":"InitCpn","../utils/AdManageTools":"AdManageTools","../utils/SDKTools":"SDKTools"}],MapTypeCfg:[function(t,e,o){"use strict";cc._RF.push(e,"efbfa2P4z9LqYyKoqZacztQ","MapTypeCfg"),Object.defineProperty(o,"__esModule",{value:!0}),o.default={0:{id:0,array:[[1]],type:0,num:1,maxLength:1,desc:"small",form:"form14",cubeType:1,rotateId:0,blockStyle:"blockStyle1"},1:{id:1,array:[[1,1]],type:1,num:2,maxLength:2,desc:"small",form:"form11",cubeType:1,rotateId:5,blockStyle:"blockStyle2"},2:{id:2,array:[[1,1,1]],type:1,num:3,maxLength:4,desc:"small",form:"form10",cubeType:2,rotateId:32,blockStyle:"blockStyle3"},3:{id:3,array:[[1,1,1,1]],type:1,num:4,maxLength:4,desc:"medium",form:"form9",cubeType:3,rotateId:33,blockStyle:"blockStyle4"},4:{id:4,array:[[1,1,1,1,1]],type:1,num:5,maxLength:5,desc:"big",form:"form12",cubeType:4,rotateId:34,blockStyle:"blockStyle5"},5:{id:5,array:[[1],[1]],type:2,num:2,maxLength:2,desc:"small",form:"form11",cubeType:1,rotateId:1,blockStyle:"blockStyle6"},6:{id:6,array:[[1,1],[1,0]],type:11,poxSet:0,num:3,maxLength:2,desc:"small",form:"form1",cubeType:1,rotateId:7,blockStyle:"blockStyle15"},7:{id:7,array:[[1,1],[0,1]],type:11,poxSet:1,num:3,maxLength:2,desc:"small",form:"form1",cubeType:1,rotateId:9,blockStyle:"blockStyle14"},8:{id:8,array:[[1,0],[1,1]],poxSet:0,type:11,num:3,maxLength:2,desc:"small",form:"form1",cubeType:1,rotateId:6,blockStyle:"blockStyle12"},9:{id:9,array:[[0,1],[1,1]],poxSet:1,type:11,num:3,maxLength:2,desc:"small",form:"form1",cubeType:1,rotateId:8,blockStyle:"blockStyle13"},10:{id:10,array:[[0,1,0],[1,1,1]],type:5,num:4,maxLength:3,desc:"medium",form:"form2",cubeType:2,rotateId:12,blockStyle:"blockStyle24"},11:{id:11,array:[[1,1,1],[0,1,0]],type:12,poxSet:1,num:4,maxLength:3,desc:"medium",form:"form2",cubeType:2,rotateId:13,blockStyle:"blockStyle26"},12:{id:12,array:[[1,0],[1,1],[1,0]],type:9,rightOrLeft:0,poxSet:1,num:4,maxLength:3,desc:"medium",form:"form2",cubeType:2,rotateId:11,blockStyle:"blockStyle27"},13:{id:13,array:[[0,1],[1,1],[0,1]],type:10,rightOrLeft:1,poxSet:1,num:4,maxLength:3,desc:"medium",form:"form2",cubeType:2,rotateId:10,blockStyle:"blockStyle25"},14:{id:14,array:[[1,1],[1,0],[1,0]],type:9,rightOrLeft:0,poxSet:2,num:4,maxLength:3,desc:"small",form:"form3",cubeType:2,rotateId:17,blockStyle:"blockStyle17"},15:{id:15,array:[[0,1],[0,1],[1,1]],type:10,rightOrLeft:1,poxSet:0,num:4,maxLength:3,desc:"small",form:"form3",cubeType:2,rotateId:16,blockStyle:"blockStyle19"},16:{id:16,array:[[1,0,0],[1,1,1]],type:6,num:4,maxLength:3,desc:"small",form:"form3",cubeType:2,rotateId:14,blockStyle:"blockStyle18"},17:{id:17,array:[[1,1,1],[0,0,1]],poxSet:2,type:12,num:4,maxLength:3,desc:"medium",form:"form3",cubeType:2,rotateId:15,blockStyle:"blockStyle16"},18:{id:18,array:[[0,1,1],[1,1,0]],type:13,num:4,maxLength:3,desc:"medium",form:"form4",cubeType:2,rotateId:20,blockStyle:"blockStyle38"},19:{id:19,array:[[1,1,0],[0,1,1]],type:13,num:4,maxLength:3,desc:"medium",form:"form4",cubeType:2,rotateId:21,blockStyle:"blockStyle36"},20:{id:20,array:[[1,0],[1,1],[0,1]],type:13,num:4,maxLength:3,desc:"medium",form:"form4",cubeType:2,rotateId:18,blockStyle:"blockStyle39"},21:{id:21,array:[[0,1],[1,1],[1,0]],type:13,num:4,maxLength:3,desc:"medium",form:"form4",cubeType:2,rotateId:19,blockStyle:"blockStyle37"},22:{id:22,array:[[1,0],[0,1]],type:14,num:2,maxLength:2,desc:"medium",cubeType:1,rotateId:23,blockStyle:"blockStyle40"},23:{id:23,array:[[0,1],[1,0]],type:14,num:2,maxLength:2,desc:"medium",cubeType:1,rotateId:22,blockStyle:"blockStyle41"},24:{id:24,array:[[0,0,1],[0,1,0],[1,0,0]],type:14,num:3,maxLength:3,desc:"big",form:"form5",cubeType:3,rotateId:25,blockStyle:"blockStyle43"},25:{id:25,array:[[1,0,0],[0,1,0],[0,0,1]],type:14,num:3,maxLength:3,desc:"big",form:"form5",cubeType:3,rotateId:24,blockStyle:"blockStyle42"},26:{id:26,array:[[1,1],[1,1]],type:3,num:4,maxLength:2,desc:"small",form:"form15",cubeType:2,rotateId:26,blockStyle:"blockStyle10"},27:{id:27,array:[[1,1,1],[0,0,1],[0,0,1]],type:15,poxSet:2,num:5,maxLength:3,desc:"medium",form:"form6",cubeType:3,rotateId:29,blockStyle:"blockStyle22"},28:{id:28,array:[[1,1,1],[1,0,0],[1,0,0]],type:15,poxSet:0,num:5,maxLength:3,desc:"medium",form:"form6",cubeType:3,rotateId:27,blockStyle:"blockStyle23"},29:{id:29,array:[[0,0,1],[0,0,1],[1,1,1]],type:15,poxSet:2,num:5,maxLength:3,desc:"medium",form:"form6",cubeType:3,rotateId:30,blockStyle:"blockStyle21"},30:{id:30,array:[[1,0,0],[1,0,0],[1,1,1]],type:15,poxSet:0,num:5,maxLength:3,desc:"medium",form:"form6",cubeType:3,rotateId:28,blockStyle:"blockStyle20"},31:{id:31,array:[[1,1,1],[1,1,1],[1,1,1]],type:3,num:9,maxLength:3,desc:"big",form:"form16",cubeType:4,rotateId:31},32:{id:32,array:[[1],[1],[1]],type:2,num:3,maxLength:3,desc:"small",form:"form10",cubeType:2,rotateId:2,blockStyle:"blockStyle7"},33:{id:33,array:[[1],[1],[1],[1]],type:2,num:4,maxLength:4,desc:"medium",form:"form9",cubeType:3,rotateId:3,blockStyle:"blockStyle8"},34:{id:34,array:[[1],[1],[1],[1],[1]],type:2,num:5,maxLength:5,desc:"big",form:"form12",cubeType:4,rotateId:4,blockStyle:"blockStyle9"},35:{id:35,array:[[1,0,1],[0,1,0],[1,0,1]],type:16,num:5,maxLength:3,desc:"big",form:"form17",cubeType:4,rotateId:35},36:{id:36,array:[[0,1,0],[1,1,1],[0,1,0]],type:17,num:5,maxLength:3,desc:"big",form:"form18",cubeType:4,rotateId:36,blockStyle:"blockStyle11"},37:{id:37,array:[[1,1],[1,0],[1,1]],type:18,num:5,maxLength:3,desc:"medium",form:"form7",cubeType:3,rotateId:38,blockStyle:"blockStyle35"},38:{id:38,array:[[1,1,1],[1,0,1]],type:18,num:5,maxLength:3,desc:"medium",form:"form7",cubeType:3,rotateId:39,blockStyle:"blockStyle34"},39:{id:39,array:[[1,1],[0,1],[1,1]],type:18,num:5,maxLength:3,desc:"medium",form:"form7",cubeType:3,rotateId:40,blockStyle:"blockStyle33"},40:{id:40,array:[[1,0,1],[1,1,1]],type:18,num:5,maxLength:3,desc:"medium",form:"form7",cubeType:3,rotateId:37,blockStyle:"blockStyle32"},41:{id:41,array:[[1,0,0],[1,1,1],[1,0,0]],type:19,poxSet:0,num:5,maxLength:3,desc:"medium",form:"form8",cubeType:3,rotateId:42,blockStyle:"blockStyle31"},42:{id:42,array:[[1,1,1],[0,1,0],[0,1,0]],type:19,poxSet:1,num:5,maxLength:3,desc:"medium",form:"form8",cubeType:3,rotateId:43,blockStyle:"blockStyle30"},43:{id:43,array:[[0,0,1],[1,1,1],[0,0,1]],type:19,poxSet:2,num:5,maxLength:3,desc:"medium",form:"form8",cubeType:3,rotateId:44,blockStyle:"blockStyle29"},44:{id:44,array:[[0,1,0],[0,1,0],[1,1,1]],type:19,poxSet:1,num:5,maxLength:3,desc:"medium",form:"form8",cubeType:3,rotateId:41,blockStyle:"blockStyle28"},45:{id:50,array:[[1,1,1],[0,1,0],[1,1,1]],type:20,num:7,maxLength:3,desc:"big",form:"form13",cubeType:4,rotateId:46},46:{id:51,array:[[1,0,1],[1,1,1],[1,0,1]],type:20,num:7,maxLength:3,desc:"big",form:"form13",cubeType:4,rotateId:45}},cc._RF.pop()},{}],MapTypeCpn:[function(t,e,o){"use strict";cc._RF.push(e,"0b833TRxepOl5chd/NxKXFn","MapTypeCpn"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function t(){}return t.prototype.getMapData=function(t){return cfg.map[t]},t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.instance=null,t}();o.default=a,cc._RF.pop()},{}],PlatformCpn:[function(t,e,o){"use strict";cc._RF.push(e,"4d08b73kClDkY2CfhwL7MvA","PlatformCpn"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function t(){}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.initBanner=function(){cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative?jsb.reflection.callStaticMethod("Mopub","showBannerAd:",""):cc.sys.os!=cc.sys.OS_ANDROID&&cc.sys.os!=cc.sys.OS_LINUX||!cc.sys.isNative?app.facebook.isFbi()&&app.facebook.initBannerAd():window.SDKTools._hideBanner||jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AppHelper","showBannerAd","()V")},t.prototype.hideBanner=function(){cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative?jsb.reflection.callStaticMethod("Mopub","hideBannerAd:",""):cc.sys.os!=cc.sys.OS_ANDROID&&cc.sys.os!=cc.sys.OS_LINUX||!cc.sys.isNative?app.facebook.isFbi()&&app.facebook.hideBannerAd():jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AppHelper","hideBannerAd","()V")},t.prototype.showInterstitialAd=function(){cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative?jsb.reflection.callStaticMethod("Mopub","showInterstitialAd:",""):cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative?(jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AppHelper","showIntenerAd","()V"),window.SDKTools._interOpenNum=0):app.facebook.isFbi()&&(app.facebook.showInterstitialAd(),window.SDKTools._interOpenNum=0);var t=app.Utils.getStringFromLocal("first_open_intenerAd");t&&""!=t||(app.LogEvent.showLogEventWithName("first_show_intenerAd"),app.Utils.saveStringToLocal("first_open_intenerAd",1))},t.prototype.showRewardedAd=function(){cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative?jsb.reflection.callStaticMethod("Mopub","showRewardedAd:","app.platform.onRewardedAd"):cc.sys.os==cc.sys.OS_ANDROID&&cc.sys.isNative?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AppHelper","showRewardedAd","(Ljava/lang/String;)V","app.platform.onRewardedAd"):app.facebook.isFbi()?app.facebook.showRewardedVideoAd("rewardedAd"):this.onRewardedAd("3")},t.prototype.onRewardedAd=function(t){"3"==t?window.app.event.dispatch(window.cfg.event.GET_REWARDED):"1"==t&&app.view.toastOnlyShowOk("No incentive video ads.")},t.prototype.onHideLogo=function(){cc.sys.os!=cc.sys.OS_ANDROID&&cc.sys.os!=cc.sys.OS_LINUX||!cc.sys.isNative||jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","onHideLogo","()V")},t.prototype.onBackPressed=function(){cc.sys.os!=cc.sys.OS_ANDROID&&cc.sys.os!=cc.sys.OS_LINUX||!cc.sys.isNative||jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","onOtherBackPressed","()V")},t.prototype.getConfigData=function(){cc.sys.os!=cc.sys.OS_ANDROID&&cc.sys.os!=cc.sys.OS_LINUX||!cc.sys.isNative||(jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getConfigData","()V"),cfg.const.apk_name=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getApkPackageName","()Ljava/lang/String;"))},t.prototype.getLanguageValue=function(){if(cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative)return jsb.reflection.callStaticMethod("RemoteConifgHelper","getLocalLanguageValue:","(Ljava/lang/String;)V")},t.isIos=function(){if(cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative)return!0},t.prototype.isConnectIsNomarl=function(){cfg.const.isConnectIsNomarl=cc.sys.getNetworkType(),cfg.const.isConnectIsNomarl==cc.sys.NetworkType.LAN?cfg.const.isConnectIsNomarl="1":cfg.const.isConnectIsNomarl="0"},t.prototype.showReview=function(){cc.sys.os!=cc.sys.OS_ANDROID&&cc.sys.os!=cc.sys.OS_LINUX||!cc.sys.isNative||jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","review","()V")},t.prototype.setBrighnessMax=function(t){cc.sys.os!=cc.sys.OS_ANDROID&&cc.sys.os!=cc.sys.OS_LINUX||!cc.sys.isNative?cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative&&jsb.reflection.callStaticMethod("RemoteConifgHelper","setUIBrightness:",t):jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AppHelper","setBrighnessMax","(Ljava/lang/String;)V",t)},t.prototype.moveTaskToBack=function(){cc.sys.os!=cc.sys.OS_ANDROID&&cc.sys.os!=cc.sys.OS_LINUX||!cc.sys.isNative||jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","moveTaskToBack","()V")},t.prototype.setVibrator=function(t){void 0===t&&(t=1e3),cc.sys.os!=cc.sys.OS_ANDROID&&cc.sys.os!=cc.sys.OS_LINUX||!cc.sys.isNative?cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative&&jsb.reflection.callStaticMethod("RemoteConifgHelper","setVibrator:","1000"):jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/AppHelper","setVibrator","()V")},t.prototype.getHasInter=function(){return cc.sys.os!=cc.sys.OS_ANDROID&&cc.sys.os!=cc.sys.OS_LINUX||!cc.sys.isNative?cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative?jsb.reflection.callStaticMethod("Mopub","getInterIsReady:",""):app.facebook.isFbi()?app.facebook.hasInterstitialAd():void 0:"1"==jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppHelper","isLoadInterSuccess","()Ljava/lang/String;")},t.instance=null,t}();o.default=a,cc._RF.pop()},{}],RankView:[function(t,e,o){"use strict";cc._RF.push(e,"24567Lt52tOELccvKLT/0Hr","RankView");var a,i=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,a){var i,n=arguments.length,c=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,a);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,r=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.left_node=null,e.right_node=null,e.item_node=null,e.scrollView=null,e.layout=null,e.my_itemData=null,e.tranLabel=new Array,e}return i(e,t),e.prototype.onLoad=function(){this.left_node.active=!0,this.right_node.active=!1,this.initData(),this.onChangeLanguage()},e.prototype.onLeftBtnClick=function(){app.audio.playSound("button"),this.left_node.active=!0,this.right_node.active=!1,this.initData()},e.prototype.onRightBtnClick=function(){app.audio.playSound("button"),this.left_node.active=!1,this.right_node.active=!0,this.initData()},e.prototype.initSelfInfo=function(){var t=this.my_itemData;t.getChildByName("img_bg"),t.getChildByName("img_rank"),t.getChildByName("img_num")},e.prototype.initData=function(t){void 0===t&&(t=null),this.layout.removeAllChildren();for(var e=app.res.loadAtlas(cfg.res.atlas.block_rank),o=0;o<20;o++){var a=cc.instantiate(this.item_node);a.parent=this.layout;var i=a.getChildByName("img_bg"),n=a.getChildByName("img_rank"),c=a.getChildByName("img_num"),r=a.getChildByName("name"),s=a.getChildByName("score"),l=a.getChildByName("best");o>=3?(n.active=!1,c.active=!0,c.getComponent(cc.Label).string=""+(o+1),i.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("bg_02"),r.getComponent(cc.Label).node.color=new cc.Color(51,37,54),s.getComponent(cc.Label).node.color=new cc.Color(51,37,54),l.getComponent(cc.Label).node.color=new cc.Color(51,37,54)):(n.active=!0,c.active=!1,i.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("bg_01"),n.getComponent(cc.Sprite).spriteFrame=e.getSpriteFrame("dj_"+(o+1)))}var u=20*this.item_node.height+100;this.layout.setContentSize(cc.size(this.layout.width,u)),this.scrollView.scrollToTop(.01)},e.prototype.onCloseView=function(){app.audio.playSound("button"),app.event.dispatch(cfg.event.SHOW_BANNER),app.event.dispatch(cfg.event.GOTO_MAINVIEW),app.event.off(cfg.event.SHOW_EXITGAME),this.node.removeFromParent()},e.prototype.onChangeLanguage=function(){for(var t=["UI-Menu_9"],e=0;e<this.tranLabel.length;e++){var o=app.tranLanguage.loadStrByKey(t[e]);o&&(this.tranLabel[e].getComponent(cc.Label).string=o)}},n([s(cc.Node)],e.prototype,"left_node",void 0),n([s(cc.Node)],e.prototype,"right_node",void 0),n([s(cc.Node)],e.prototype,"item_node",void 0),n([s(cc.ScrollView)],e.prototype,"scrollView",void 0),n([s(cc.Node)],e.prototype,"layout",void 0),n([s(cc.Node)],e.prototype,"my_itemData",void 0),n([s([cc.Label])],e.prototype,"tranLabel",void 0),n([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],ResCfg:[function(t,e,o){"use strict";cc._RF.push(e,"cd7a65E80tMFJHp2IT5F7J4","ResCfg"),Object.defineProperty(o,"__esModule",{value:!0}),o.default={audio:{button:"audio/button",clear:"audio/clear",place:"audio/place",select:"audio/select",win_game:"audio/win_game"},atlas:{new_ui:"atlas/aged_new_ui_atlas",block_cube:"atlas/block_cube_atlas",block_btn:"atlas/block_btn_atlas",block_folder:"atlas/block_folder_atlas",block_img:"atlas/block_img_atlas",block_rank:"atlas/block_rank_atlas"},images:{},prefabs:{languageView:"prefabs/languageView",settingView:"prefabs/settingView",tutorials:"prefabs/tutorialsView",dailyView:"prefabs/dailyView",challengeView:"prefabs/challengeView",challengeRecordView:"prefabs/challengeRecordView",mainSettingView:"prefabs/mainSettingView",cubeStack:"prefabs/cubeStack",smallView:"prefabs/smallView",cube:"prefabs/cube",toast:"prefabs/toast",statisticsView:"prefabs/statisticsView",effAction:"prefabs/effAction",storeView:"prefabs/storeView",rankView:"prefabs/rankView"}},cc._RF.pop()},{}],ResCpn:[function(t,e,o){"use strict";cc._RF.push(e,"a2cbdz2mF5OQKJtwZd2vhAq","ResCpn"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function t(){}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.loadAtlas=function(t){return cc.resources.get(t,cc.SpriteAtlas)},t.prototype.loadFrame=function(t){return cc.resources.get(t,cc.SpriteFrame)},t.prototype.loadPrefab=function(t){return cc.resources.get(t,cc.Prefab)},t.prototype.loadAudio=function(t){return cc.resources.get(t,cc.AudioClip)},t.instance=null,t}();o.default=a,cc._RF.pop()},{}],SDKTools:[function(t,e,o){"use strict";cc._RF.push(e,"c6bceZHpTxOIpnT//WJprXI","SDKTools"),Object.defineProperty(o,"__esModule",{value:!0});var a=t("./AdManageTools"),i=function(){function t(){}return t.init=function(){this.AdManageTools=new a.default,this.initBanner(),this.initIntener(),window.SDKTools=t,window.remoteConfigHadReady=function(){var t=app.Utils.getStringFromLocal("AiConfig");t&&""!=t||(cc.sys.os==cc.sys.OS_IOS&&cc.sys.isNative?t=parseInt(jsb.reflection.callStaticMethod("RemoteConifgHelper","getAiConfigValue:","")):cc.sys.os!=cc.sys.OS_ANDROID&&cc.sys.os!=cc.sys.OS_LINUX||!cc.sys.isNative||(t=parseInt(jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","getAiConfigValue","()Ljava/lang/String;")))),app.Utils.saveStringToLocal("AiConfig",t)},window.getNowLocalLanguage=function(t){var e=app.Utils.getStringFromLocal("set_language");if(e&&""!=e)cfg.const.language=e;else{e=cfg.const.language;var o=t.split("-"),a=e;a="zh"==o[0]?"Hans"==o[1]?"language_zh":"language_traZh":{en:"language_en",fr:"language_fr",de:"language_de",es:"language_es",pt:"language_por",da:"language_dansk",it:"language_ita",nl:"language_neder",ja:"language_jp",ko:"language_kor",ru:"language_russ",id:"language_ind",hi:"language_hindi",tr:"language_turkey",uk:"language_ukraine",fil:"language_filip",ms:"language_Bahasa",cs:"language_Cestina",sk:"language_Sloven",sv:"language_Sven",pl:"language_Polski",th:"language_thai",el:"language_gree",vi:"language_viet",bg:"language_bulgar",et:"language_eston",lv:"language_latv",lt:"language_lithu",sq:"language_alban",hr:"language_hrvat",sr:"language_serbia",fi:"language_suomi",no:"language_norsk",ro:"language_romana",sl:"language_sloven"}[o[0]],cfg.const.language=a}var i={language_en:0,language_zh:1,language_traZh:2,language_dansk:3,language_de:4,language_fr:5,language_kor:6,language_neder:7,language_por:8,language_jp:9,language_es:10,language_ita:11,language_russ:12,language_ind:13,language_hindi:14,language_turkey:15,language_ukraine:16,language_filip:17,language_Bahasa:18,language_Cestina:19,language_Sloven:20,language_Sven:21,language_Polski:22,language_thai:23,language_gree:24,language_viet:25,language_bulgar:26,language_eston:27,language_latv:28,language_lithu:29,language_alban:30,language_hrvat:31,language_serbia:32,language_suomi:33,language_norsk:34,language_romana:35,language_sloven:36}[cfg.const.language];app.Utils.saveStringToLocal("savelanguageClick",i),app.Utils.saveStringToLocal("save_language",cfg.const.language),app.Utils.saveStringToLocal("set_first_Language",1),app.tranLanguage.onSaveLanguage(cfg.const.language),console.log("=====================",cfg.const.language),app.event.dispatch(cfg.event.CHANGE_LANGUAGE)},window.showCloserInter=function(){app.event.dispatch(cfg.event.CLOSER_INTER)}},t.setIosLanguage=function(t){console.log("=====================",t);var e=app.Utils.getStringFromLocal("set_language");if(e&&""!=e)cfg.const.language=e;else{e=cfg.const.language;var o=t.split("-"),a=e;a="zh"==o[0]?"Hans"==o[1]?"language_zh":"language_traZh":{en:"language_en",fr:"language_fr",de:"language_de",es:"language_es",pt:"language_por",da:"language_dansk",it:"language_ita",nl:"language_neder",ja:"language_jp",ko:"language_kor",ru:"language_russ",id:"language_ind",hi:"language_hindi",tr:"language_turkey",uk:"language_ukraine",fil:"language_filip",ms:"language_Bahasa",cs:"language_Cestina",sk:"language_Sloven",sv:"language_Sven",pl:"language_Polski",th:"language_thai",el:"language_gree",vi:"language_viet",bg:"language_bulgar",et:"language_eston",lv:"language_latv",lt:"language_lithu",sq:"language_alban",hr:"language_hrvat",sr:"language_serbia",fi:"language_suomi",no:"language_norsk",ro:"language_romana",sl:"language_sloven"}[o[0]],cfg.const.language=a}var i={language_en:0,language_zh:1,language_traZh:2,language_dansk:3,language_de:4,language_fr:5,language_kor:6,language_neder:7,language_por:8,language_jp:9,language_es:10,language_ita:11,language_russ:12,language_ind:13,language_hindi:14,language_turkey:15,language_ukraine:16,language_filip:17,language_Bahasa:18,language_Cestina:19,language_Sloven:20,language_Sven:21,language_Polski:22,language_thai:23,language_gree:24,language_viet:25,language_bulgar:26,language_eston:27,language_latv:28,language_lithu:29,language_alban:30,language_hrvat:31,language_serbia:32,language_suomi:33,language_norsk:34,language_romana:35,language_sloven:36}[cfg.const.language];app.Utils.saveStringToLocal("savelanguageClick",i),app.Utils.saveStringToLocal("save_language",cfg.const.language),app.Utils.saveStringToLocal("set_first_Language",1),app.tranLanguage.onSaveLanguage(cfg.const.language),console.log("=====================",cfg.const.language),app.event.dispatch(cfg.event.CHANGE_LANGUAGE)},t.initBanner=function(){this._updateBanner&&(Date.parse((new Date).toString())-this._updateBanner)/1e3>60*this.getBannerClickNum()[0]&&(this._updateBanner=null,this._openBanner=null,this._bannerOpenNum=0),this._openBanner&&(Date.parse((new Date).toString())-this._openBanner)/1e3>60*this.getBannerClickNum()[2]&&(this._openBanner=null,this._hideBanner=!1)},t.initIntener=function(){this._updateInter&&(Date.parse((new Date).toString())-this._updateInter)/1e3>60*this.getInterstitialClickNum()[0]&&(this._updateInter=null,this._openInter=null,this._interOpenNum=0),this._openInter&&(Date.parse((new Date).toString())-this._openInter)/1e3>60*this.getInterstitialClickNum()[2]&&(this._openInter=null,this._hideInter=!1)},t.bannerOpenListener=function(){var t=this.getBannerClickNum();this._bannerOpenNum+=1,1==this._bannerOpenNum?this._updateBanner=Date.parse((new Date).toString()):this._bannerOpenNum==t[1]&&(this.analyticsLogEvent("ad_banner_wait"),this.showBannerAd(!1),this._updateBanner=null,this._hideBanner=!0,this._bannerOpenNum=0,this._openBanner=Date.parse((new Date).toString()))},t.interOpenListener=function(){var t=this.getInterstitialClickNum();this._interOpenNum+=1,1==this._interOpenNum?this._updateInter=Date.parse((new Date).toString()):this._interOpenNum==t[1]&&(this.analyticsLogEvent("ad_interstitial_wait"),this._updateInter=null,this._hideInter=!0,this._interOpenNum=0,this._openInter=Date.parse((new Date).toString()))},t.analyticsLogEvent=function(t){app.LogEvent.showLogEventWithName(t)},t.showBannerAd=function(t){t?this.AdManageTools.initBanner():this.AdManageTools.hideBanner()},t.setLoadSuccessIntener=function(t){if("Load"==t){var e=app.Utils.getStringFromLocal("first_Load_intenerAd");e&&""!=e||(this.analyticsLogEvent("first_Load_intenerAd"),app.Utils.saveStringToLocal("first_Load_intenerAd",1))}else if("Failed"==t){var o=app.Utils.getStringFromLocal("first_Load_Failed_intenerAd");o&&""!=o||(this.analyticsLogEvent("first_Load_Failed_intenerAd"),app.Utils.saveStringToLocal("first_Load_Failed_intenerAd",1))}},t.getBannerClickNum=function(){return this._bannerNumData?this._bannerNumData:[10,3,3]},t.getInterstitialClickNum=function(){return this._intenerNumData?this._intenerNumData:[10,3,3]},t.onRewardedAd=function(t){console.log("=============onRewardedAd=============",t),cfg.const.isGameBackByAdb=!1,"3"==t?(app.Utils.saveStringToLocal("isRewardedView","0"),app.event.dispatch(cfg.event.EXIT_VIEW),app.event.dispatch(cfg.event.REMOVE_CUBE)):"1"==t&&app.event.dispatch(cfg.event.SHOW_REWARDFAIED)},t.onChallengeRewardedAd=function(t){console.log("============onChallengeRewardedAd==============",t),cfg.const.isGameBackByAdb=!1,"3"==t?app.event.dispatch(cfg.event.SHOW_TIPS_CHALLENGE):"1"==t&&app.event.dispatch(cfg.event.SHOW_REWARDFAIED)},t.onGetRotateRewardedAd=function(t){console.log("============onGetRotateRewardedAd==============",t),cfg.const.isGameBackByAdb=!1,"3"==t?app.event.dispatch(cfg.event.SHOW_SUCCESS):"1"==t&&app.event.dispatch(cfg.event.SHOW_REWARDFAIED)},t.setBannerClickNum=function(t){if(""!=t&&t){var e=JSON.parse(t);e.ad_banner_click_num_waitfortime?this._bannerNumData=e.ad_banner_click_num_waitfortime:this._bannerNumData=[10,3,3],e.ad_interstitial_click_num_waitfortime?this._intenerNumData=e.ad_interstitial_click_num_waitfortime:this._intenerNumData=[10,3,3]}else this._bannerNumData=[10,3,3],this._intenerNumData=[10,3,3]},t.getNowLocalLanguage=function(t){var e=app.Utils.getStringFromLocal("save_language");if(e&&""!=e)cfg.const.language=e;else{e=cfg.const.language;var o=t.split("-"),a=e;"zh"==o[0]?a="CN"==o[1]?"language_zh":"language_traZh":(a={en:"language_en",fr:"language_fr",de:"language_de",es:"language_es",pt:"language_por",da:"language_dansk",it:"language_ita",nl:"language_neder",ja:"language_jp",ko:"language_kor",ru:"language_russ",id:"language_ind",hi:"language_hindi",tr:"language_turkey",uk:"language_ukraine",fil:"language_filip",ms:"language_Bahasa",cs:"language_Cestina",sk:"language_Sloven",sv:"language_Sven",pl:"language_Polski",th:"language_thai",el:"language_gree",vi:"language_viet",bg:"language_bulgar",et:"language_eston",lv:"language_latv",lt:"language_lithu",sq:"language_alban",hr:"language_hrvat",sr:"language_serbia",fi:"language_suomi",no:"language_norsk",ro:"language_romana",sl:"language_sloven"}[o[0]],"ph"!=o[1]&&"PH"!=o[1]||(a="language_filip")),cfg.const.language=a}var i={language_en:0,language_zh:1,language_traZh:2,language_dansk:3,language_de:4,language_fr:5,language_kor:6,language_neder:7,language_por:8,language_jp:9,language_es:10,language_ita:11,language_russ:12,language_ind:13,language_hindi:14,language_turkey:15,language_ukraine:16,language_filip:17,language_Bahasa:18,language_Cestina:19,language_Sloven:20,language_Sven:21,language_Polski:22,language_thai:23,language_gree:24,language_viet:25,language_bulgar:26,language_eston:27,language_latv:28,language_lithu:29,language_alban:30,language_hrvat:31,language_serbia:32,language_suomi:33,language_norsk:34,language_romana:35,language_sloven:36}[cfg.const.language];app.Utils.saveStringToLocal("savelanguageClick",i),app.Utils.saveStringToLocal("save_language",cfg.const.language),app.Utils.saveStringToLocal("set_first_Language",1),app.tranLanguage.onSaveLanguage(cfg.const.language),console.log("=====================",cfg.const.language),app.event.dispatch(cfg.event.CHANGE_LANGUAGE)},t.showDetailView=function(){app.event.dispatch(cfg.event.SHOW_EXITGAME)},t.showCloserInter=function(){cfg.const.isGameBackByAdb=!1,app.event.dispatch(cfg.event.CLOSER_INTER)},t._bannerOpenNum=0,t._hideBanner=!1,t._interOpenNum=0,t._hideInter=!1,t}();o.default=i,cc._RF.pop()},{"./AdManageTools":"AdManageTools"}],SettingView:[function(t,e,o){"use strict";cc._RF.push(e,"a3f8348DN5Mqo1fEmlHVqWz","SettingView");var a,i=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,a){var i,n=arguments.length,c=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,a);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../utils/AdManageTools"),r=cc._decorator,s=r.ccclass,l=r.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnSoundOn=null,e.btnSoundOff=null,e.action_node=null,e.label_title=null,e.btn_sound=null,e.btn_sound_Off=null,e.img_sound_on=null,e.img_sound_off=null,e.newGame_node=null,e.btn_music=null,e.btn_music_Off=null,e.curDR=null,e.tranLabel=new Array,e}return i(e,t),e.prototype.onLoad=function(){this.saveAllNameArr=[],this.AdManageTools=new c.default,app.event.on(cfg.event.CHANGE_LANGUAGE,this.onChangeLanguage,this),app.event.on(cfg.event.END_SETTING,this.onCloseView,this),app.event.on(cfg.event.SHOW_EXITGAME,this.onCloseView,this),app.event.on(cfg.event.GOTO_SETTING,this.onGotoSetting,this),this.newGame_node.active=!1,this.onChangeLanguage(),this.initSoundVolume(),this.initMusicValue(),app.Utils.onViewAction(this.action_node)},e.prototype.onGotoSetting=function(){app.event.on(cfg.event.SHOW_EXITGAME,this.onCloseView,this)},e.prototype.initMusicValue=function(){1==cfg.const.musicVolume?(this.btn_music.node.active=!0,this.btn_music_Off.node.active=!1):(this.btn_music.node.active=!1,this.btn_music_Off.node.active=!0,app.audio.stopSound())},e.prototype.onSoundClick=function(){app.audio.playSound("button"),cfg.const.soundVolume=1==cfg.const.soundVolume?0:1,this.initSoundVolume(),app.Utils.saveStringToLocal("otherVolume",cfg.const.soundVolume)},e.prototype.onMusicClick=function(){app.audio.playSound("button"),cfg.const.musicVolume=1==cfg.const.musicVolume?0:1,this.initMusicValue(),app.Utils.saveStringToLocal("otherMusic",cfg.const.musicVolume)},e.prototype.onStoreBtnClick=function(){app.audio.playSound("button"),app.view.showStoreView()},e.prototype.onLanguageClick=function(){app.audio.playSound("button"),app.event.off(cfg.event.SHOW_EXITGAME),app.view.showLanguageView()},e.prototype.onSocreClick=function(){app.audio.playSound("button"),app.event.off(cfg.event.SHOW_EXITGAME),app.view.showScoreView()},e.prototype.onTutorialClick=function(){app.audio.playSound("button"),this.node.removeFromParent(),app.LogEvent.showLogEventWithName("Setting_Tutorial"),app.view.showTutorialsView()},e.prototype.onAboutUsClick=function(){app.audio.playSound("button"),app.view.showAboutUsView()},e.prototype.onShowReplayView=function(){app.audio.playSound("button"),this.newGame_node.active=!0},e.prototype.onHideReplayView=function(){app.audio.playSound("button"),this.newGame_node.active=!1},e.prototype.onReplayClick=function(){app.audio.playSound("button"),this.node.removeFromParent(),app.Utils.saveStringToLocal("mainGame_MapData",""),app.Utils.saveStringToLocal("isRecordView","0"),app.Utils.saveStringToLocal("isRewardedView","0"),app.event.dispatch(cfg.event.NEW_GAME_START),app.event.dispatch(cfg.event.SHOW_BANNER),this.AdManageTools.showInterstitialAd(),app.LogEvent.showLogEventWithName("Replay_Click")},e.prototype.onHomeClick=function(){this.node.removeFromParent(),app.event.dispatch(cfg.event.SHOW_GOTOMAINVIEW)},e.prototype.initSoundVolume=function(){1==cfg.const.soundVolume?(this.btn_sound.node.active=!0,this.btn_sound_Off.node.active=!1,this.img_sound_on.node.active=!0,this.img_sound_off.node.active=!1):(this.btn_sound.node.active=!1,this.btn_sound_Off.node.active=!0,this.img_sound_on.node.active=!1,this.img_sound_off.node.active=!0,app.audio.stopSound())},e.prototype.onCloseView=function(){var t=(new Date).getTime();t-this.time<=3e3||(this.time=t,app.audio.playSound("button"),this.isTutorial?app.view.showTutorialsView():(app.event.dispatch(cfg.event.SHOW_BANNER),this.isMainView?app.event.dispatch(cfg.event.GOTO_MAINVIEW):app.event.dispatch(cfg.event.GOTO_CHALLENGEVIEW)),app.event.off(cfg.event.SHOW_EXITGAME),this.node.removeFromParent())},e.prototype.setIsTutorial=function(t,e){this.isTutorial=t,this.isMainView=e},e.prototype.initTranLabelByPreb=function(){this.tranLabel=[],this.tranLabel.push(this.node.getChildByName("title").getComponent(cc.Label))},e.prototype.onChangeLanguage=function(){for(var t=["UI-Menu_6","UI-Settings_4","UI-Settings_1","UI-Menu_4","UI_8","UI_9"],e=0;e<this.tranLabel.length;e++){var o=app.tranLanguage.loadStrByKey(t[e]);o&&(this.tranLabel[e].getComponent(cc.Label).string=o,"UI-Menu_4"==t[e]&&(this.tranLabel[e].getComponent(cc.Label).string=o+"?"))}},n([l(cc.Node)],e.prototype,"action_node",void 0),n([l(cc.Label)],e.prototype,"label_title",void 0),n([l(cc.Button)],e.prototype,"btn_sound",void 0),n([l(cc.Button)],e.prototype,"btn_sound_Off",void 0),n([l(cc.Sprite)],e.prototype,"img_sound_on",void 0),n([l(cc.Sprite)],e.prototype,"img_sound_off",void 0),n([l(cc.Node)],e.prototype,"newGame_node",void 0),n([l(cc.Button)],e.prototype,"btn_music",void 0),n([l(cc.Button)],e.prototype,"btn_music_Off",void 0),n([l([cc.Label])],e.prototype,"tranLabel",void 0),n([s],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../utils/AdManageTools":"AdManageTools"}],SmallView:[function(t,e,o){"use strict";cc._RF.push(e,"74b34tf+stO46kPUqf0WOSz","SmallView");var a,i=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,a){var i,n=arguments.length,c=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,a);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../utils/AdManageTools"),r=t("../utils/BlockPuzzleLogEvent"),s=cc._decorator,l=s.ccclass,u=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.score_Label=null,e.action_bg=null,e.logEventModel=null,e.AdManageTools=null,e.tranLabel=new Array,e}return i(e,t),e.prototype.onLoad=function(){this.logEventModel=new r.default,this.AdManageTools=new c.default;var t=cc.rotateBy(.5,60);cc.tween(this.action_bg).repeatForever(t).start(),this.onChangeLanguage()},e.prototype.setGameScore=function(t){this.score_Label.string=""+t,app.Utils.saveStringToLocal("isRecordView","1");var e={score:t};app.Utils.saveStringToLocal("recordViewData",JSON.stringify(e))},e.prototype.onNewGameClick=function(){app.audio.playSound("button"),app.Utils.saveStringToLocal("mainGame_MapData",""),this.logEventModel.saveScoreByMonth(cfg.const.nowScore,cfg.const.myHighScore),cfg.const.rotateTime>0&&app.LogEvent.showLogEventWithNameByParam("Tool_Rotate",cfg.const.rotateTime),this.logEventModel.showLogWithNewGameClick(),this.logEventModel.isFirstGameOver(),app.Utils.saveStringToLocal("isRecordView","0"),app.Utils.saveStringToLocal("isRewardedView","0"),cfg.const.resurgenceTime=1,cfg.const.rotateTime=0,app.Utils.saveStringToLocal("mainGame_resurgenceTime",cfg.const.resurgenceTime),app.Utils.saveStringToLocal("mainGame_rotateTime",cfg.const.rotateTime),app.event.dispatch(cfg.event.NEW_GAME_START),app.event.dispatch(cfg.event.SHOW_BANNER),this.AdManageTools.showInterstitialAd(),app.event.targetOff(this),this.node.removeFromParent()},e.prototype.onHomeClick=function(){app.audio.playSound("button"),this.node.removeFromParent(),cc.director.loadScene("mainScene")},e.prototype.onScoreBtnClick=function(){app.audio.playSound("button"),app.view.showScoreView()},e.prototype.onCloseView=function(){app.audio.playSound("button"),this.node.removeFromParent()},e.prototype.onChangeLanguage=function(){for(var t=["UI-Menu_8","UI-Menu_4"],e=0;e<this.tranLabel.length;e++){var o=app.tranLanguage.loadStrByKey(t[e]);o&&(this.tranLabel[e].getComponent(cc.Label).string=o)}},n([u(cc.Label)],e.prototype,"score_Label",void 0),n([u(cc.Node)],e.prototype,"action_bg",void 0),n([u([cc.Label])],e.prototype,"tranLabel",void 0),n([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../utils/AdManageTools":"AdManageTools","../utils/BlockPuzzleLogEvent":"BlockPuzzleLogEvent"}],StatisticsView:[function(t,e,o){"use strict";cc._RF.push(e,"59ee8RFfQVFqa+qrG6V/LbP","StatisticsView");var a,i=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,a){var i,n=arguments.length,c=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,a);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,r=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.action_node=null,e.bgMask=null,e.arrScore=new Array,e.tranLabel=new Array,e}return i(e,t),e.prototype.onLoad=function(){this.initScoreData(),app.event.on(cfg.event.CHANGE_LANGUAGE,this.onChangeLanguage,this),app.event.on(cfg.event.SHOW_EXITGAME,this.onCloseClick,this),this.bgMask.on(cc.Node.EventType.TOUCH_END,function(){cc.log("TOUCH_END1")}),this.onChangeLanguage(),this.bgMask.on(cc.Node.EventType.TOUCH_END,function(){},this),app.Utils.onViewAction(this.action_node)},e.prototype.initScoreData=function(){for(var t=new Date,e=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),o=["best_today","best_week","best_month","best_year","highScore"],a=0;a<4;a++){var i=app.Utils.getStringFromLocal(o[a]),n=(i=i&&""!=i&&0!=i?JSON.parse(i):{score:0,date:e}).score;0==n&&(n="0"),this.arrScore[a].getComponent(cc.Label).string=n}var c=app.Utils.getStringFromLocal("highScore");c&&""!=c||(c=0),this.arrScore[4].getComponent(cc.Label).string=c},e.prototype.onCloseClick=function(){app.audio.playSound("button"),this.node.removeFromParent()},e.prototype.onContinueClick=function(){app.audio.playSound("button"),this.node.removeFromParent()},e.prototype.onNewGameClick=function(){app.audio.playSound("button"),app.Utils.saveStringToLocal("mainGame_MapData",""),this.node.removeFromParent(),app.event.dispatch(cfg.event.NEW_GAME_START),app.event.dispatch(cfg.event.END_SETTING)},e.prototype.onChangeLanguage=function(){for(var t=["UI-Menu_7","UI_10","UI-Statistics1","UI-Statistics2","UI-Statistics3","UI-Statistics4","UI-Statistics5"],e=0;e<this.tranLabel.length;e++){var o=app.tranLanguage.loadStrByKey(t[e]);o&&(this.tranLabel[e].getComponent(cc.Label).string=o)}},n([s(cc.Node)],e.prototype,"action_node",void 0),n([s(cc.Node)],e.prototype,"bgMask",void 0),n([s([cc.Label])],e.prototype,"arrScore",void 0),n([s([cc.Label])],e.prototype,"tranLabel",void 0),n([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],StorageCpn:[function(t,e,o){"use strict";cc._RF.push(e,"b7e2cDJ7vZE0ptBMzm894qh","StorageCpn"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function t(){}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.instance=null,t}();o.default=a,cc._RF.pop()},{}],StoreView:[function(t,e,o){"use strict";cc._RF.push(e,"a371cTEnCxO8IOuiR079whX","StoreView");var a,i=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,a){var i,n=arguments.length,c=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,a);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../GD/GDADMgr"),r=cc._decorator,s=r.ccclass,l=r.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.action_node=null,e.label_coinNum=null,e.label_rotate=null,e.label_random=null,e.tranLabel=new Array,e.needCoin_rotate=100,e.needCoin_random=100,e}return i(e,t),e.prototype.onLoad=function(){this.label_coinNum.string=""+cfg.const.coinNum,this.label_rotate.string=""+this.needCoin_rotate,this.label_random.string=""+this.needCoin_random,app.event.off(cfg.event.GET_REWARDED),app.event.on(cfg.event.GET_REWARDED,this.onGetRewarded,this),cc.game.off("SDK_REWARDED_WATCH_COMPLETE"),cc.game.on("SDK_REWARDED_WATCH_COMPLETE",this.onGetRewarded,this),app.Utils.onViewAction(this.action_node),this.onChangeLanguage()},e.prototype.onGetRewarded=function(){cfg.const.coinNum+=100,app.event.dispatch(cfg.event.CHANGE_ROTATENUM),this.label_coinNum.string=""+cfg.const.coinNum},e.prototype.onCloseClick=function(){app.audio.playSound("button"),this.node.removeFromParent()},e.prototype.onFreeClick=function(){app.audio.playSound("button"),c.gdAdMgr.showRewardAD()},e.prototype.onBuyRotateNum=function(){app.audio.playSound("button"),cfg.const.coinNum<this.needCoin_rotate||(cfg.const.rotateNum++,cfg.const.coinNum-=this.needCoin_rotate,app.event.dispatch(cfg.event.CHANGE_ROTATENUM),this.label_coinNum.string=""+cfg.const.coinNum)},e.prototype.onBuyRandomNum=function(){app.audio.playSound("button"),cfg.const.coinNum<this.needCoin_random||(cfg.const.random_num++,cfg.const.coinNum-=this.needCoin_random,app.event.dispatch(cfg.event.CHANGE_ROTATENUM),this.label_coinNum.string=""+cfg.const.coinNum)},e.prototype.onChangeLanguage=function(){for(var t=["UI_10","UI_new22"],e=0;e<this.tranLabel.length;e++){var o=app.tranLanguage.loadStrByKey(t[e]);o&&(this.tranLabel[e].getComponent(cc.Label).string=o)}},n([l(cc.Node)],e.prototype,"action_node",void 0),n([l(cc.Label)],e.prototype,"label_coinNum",void 0),n([l(cc.Label)],e.prototype,"label_rotate",void 0),n([l(cc.Label)],e.prototype,"label_random",void 0),n([l([cc.Label])],e.prototype,"tranLabel",void 0),n([s],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../GD/GDADMgr":"GDADMgr"}],Toast:[function(t,e,o){"use strict";cc._RF.push(e,"05e96l5A6xItI8yYUqvuDG8","Toast");var a,i=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,a){var i,n=arguments.length,c=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,a);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,r=c.ccclass,s=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.action_node=null,e.label=null,e.title=null,e.bg=null,e.btn_cancle=null,e.btn_confirm=null,e.callbackOk=null,e.callbackCancle=null,e}return i(e,t),e.prototype.onLoad=function(){this.label.string="",this.btn_cancle.node.active=!0,this.btn_confirm.node.active=!0,this.btn_confirm.node.x=180,app.Utils.onViewAction(this.action_node)},e.prototype.makeOnlyShowOk=function(){this.btn_cancle.node.active=!1,this.btn_confirm.node.active=!0,this.btn_confirm.node.x=0},e.prototype.makeText=function(t,e,o){void 0===t&&(t=""),void 0===e&&(e=null),void 0===o&&(o=null),this.label.string=t,this.bg.scale=0,this.title.string="",cc.tween(this.bg).to(.2,{scale:1.2}).to(.08,{scale:1}).start(),e&&(this.callbackOk=e),o&&(this.callbackCancle=o)},e.prototype.onBtnConfirmClick=function(){this.node.removeFromParent(),this.callbackOk&&this.callbackOk(),app.audio.playSound("button")},e.prototype.onBtnCancleClick=function(){this.node.removeFromParent(),this.callbackCancle&&this.callbackCancle(),app.audio.playSound("button")},n([s(cc.Node)],e.prototype,"action_node",void 0),n([s(cc.Label)],e.prototype,"label",void 0),n([s(cc.Label)],e.prototype,"title",void 0),n([s(cc.Node)],e.prototype,"bg",void 0),n([s(cc.Button)],e.prototype,"btn_cancle",void 0),n([s(cc.Button)],e.prototype,"btn_confirm",void 0),n([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],TranLanguageCpn:[function(t,e,o){"use strict";cc._RF.push(e,"6d6eejfVT1MjbfX+qZPRI3r","TranLanguageCpn"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function t(){}return t.prototype.onSaveLanguage=function(t){void 0===t&&(t="language_en"),this.allLanuage=[],cfg.const.language=t,cfg.const.hasUseSystemFont="language_en"==t||"language_zh"==t||"language_ita"==t||"language_neder"==t;var e=this;cc.resources.load("json/tran/block_puzzle",function(t,o){if(t);else{for(var a in o.json){var i=o.json[a];e.allLanuage.push(i)}app.event.dispatch(cfg.event.CHANGE_LANGUAGE)}})},t.prototype.loadStrByKey=function(t){if(cfg.const.language||(cfg.const.language="language_en"),this.allLanuage&&this.allLanuage.length>1)for(var e in this.allLanuage){var o=this.allLanuage[e];if(t==o.key){var a=o[cfg.const.language];return a||(a=o.language_en),a}}},t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.instance=null,t}();o.default=a,cc._RF.pop()},{}],TutorialsMapCpn:[function(t,e,o){"use strict";cc._RF.push(e,"3b2f4HS5+9Hf6fhLXKvqhw6","TutorialsMapCpn"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function t(){this.allTutorialsData=[],this.allTutorialsData_Jiu=[],this.initAllTutorialsData()}return t.prototype.initAllTutorialsData=function(){for(var t=0;t<4;t++){var e="map_course_Jiu"+(t+1);this.loadJsonByMapData(e,t,!0)}for(t=0;t<3;t++)e="map_course"+(t+1),this.loadJsonByMapData(e,t,!1)},t.prototype.getAllMapData=function(t){var e=this.allTutorialsData;9==cfg.const.gameRowNum&&(e=this.allTutorialsData_Jiu);for(var o=0;o<e.length;o++)if(e[o].mapIndex==t)return e[o].data},t.prototype.loadJsonByMapData=function(t,e,o){var a=this;void 0===t&&(t=null),void 0===o&&(o=!0);var i="json/course/"+t;cc.resources.load(i,function(t,i){if(t);else{var n=[];for(var c in i.json){var r=i.json[c];n.push(r)}var s=n[0],l={mapIndex:e,data:s};o?a.allTutorialsData_Jiu.push(l):a.allTutorialsData.push(l)}})},t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.instance=null,t}();o.default=a,cc._RF.pop()},{}],TutorialsView:[function(t,e,o){"use strict";cc._RF.push(e,"a3965sJM1ZEgKnKKZ3SFVzr","TutorialsView");var a,i=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,a){var i,n=arguments.length,c=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,a);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../utils/BlockPuzzleCubeStackTools"),r=t("../utils/BlockPuzzleLogEvent"),s=t("../utils/BlockPuzzleEffTools"),l=t("../utils/BlockPuzzleMapTools"),u=t("./CubeStack"),h=t("../utils/AdManageTools"),p=cc._decorator,d=p.ccclass,g=p.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameBgNode=null,e.AdManageTools=null,e.cubeStackBgNode=null,e.bgMask=null,e.btn_back=null,e.btn_skip=null,e.spCubeStackBg=null,e.courseNum=0,e._seed=0,e}return i(e,t),e.prototype.onLoad=function(){var t=this;if(this.blockMapModel=new l.default,this.cubeStackModel=new c.default,this.AdManageTools=new h.default,this.gameEffModel=new s.default,this.createNum=3,this.logEventModel=new r.default,this.onLoadEvent(),this.setSpriteFrameByAction(),app.event.on(cfg.event.SHOW_EXITGAME,this.onShowExitGame,this),this.saveCourseCubeStack=[[2,2,2],[32,32,32],[26,26,26],[16,16,16]],cfg.const.isFirstOpenTutotial?(this.btn_skip.node.active=!0,this.btn_back.node.active=!1):(this.btn_skip.node.active=!1,this.btn_back.node.active=!0),9==cfg.const.gameRowNum&&(this.saveCourseCubeStack=[[0,0,0],[32,32,32],[15,15,15],[21,21,21]]),this.initCubeStack(),this.blockMapModel.initCurCubeStack(this.node),this.blockMapModel.initCubeMapData(this.gameBgNode),this.onStartNewGame(),cc.view.setResizeCallback(function(){return t.resize()}),this.resize(),app.facebook.isFbi()){var e=this.spCubeStackBg.getPosition();e.y+=50,this.spCubeStackBg.setPosition(e)}},e.prototype.setSpriteFrameByAction=function(){this.allSpriteFrameByAction=[{spriteFrame:"block_0",action:"darkblue"},{spriteFrame:"block_1",action:"green"},{spriteFrame:"block_2",action:"pink"},{spriteFrame:"block_3",action:"purple"},{spriteFrame:"block_4",action:"red"},{spriteFrame:"block_5",action:"yellow"}]},e.prototype.resize=function(){var t=cc.find("Canvas").getComponent(cc.Canvas);this.curDR||(this.curDR=t.designResolution);var e=this.curDR,o=cc.view.getFrameSize(),a=o.width,i=o.height,n=a,c=i;a/i>e.width/e.height?n=(c=e.height)*a/i:c=i/a*(n=e.width),t.designResolution=cc.size(n,c),t.node.width=n,t.node.height=c,t.node.emit("resize"),this.bgMask.width=n,this.bgMask.height=c,this.bgMask.emit("resize"),cfg.const.finalW=n,cfg.const.finalH=c},e.prototype.onLoadEvent=function(){this.cubeStackBgNode.on(cc.Node.EventType.TOUCH_START,function(t){this.onMouseDown(t)},this),this.cubeStackBgNode.on(cc.Node.EventType.TOUCH_MOVE,function(t){this.onMouseMove(t)},this),this.cubeStackBgNode.on(cc.Node.EventType.TOUCH_END,function(t){this.onMouseUp(t)},this),this.cubeStackBgNode.on(cc.Node.EventType.TOUCH_CANCEL,function(t){this.onMouseUp(t)},this),this.bgMask.on(cc.Node.EventType.TOUCH_END,function(){},this)},e.prototype.onStartNewGame=function(){this.buttomY=this.blockMapModel._allCubes[0][0].getWorldPosition().y,this.leftX=this.blockMapModel._allCubes[0][0].getWorldPosition().x,this.cubeStackModel.allCubeStack=this.allCubeStack,this.restartGame();var t="map_course"+(this.courseNum+1);9==cfg.const.gameRowNum&&(t="map_course_Jiu"+(this.courseNum+1)),this.loadJonsByMapArr=new Array,this.loadJsonByMapData(t)},e.prototype.restartGame=function(){this.randomCubeStack(),this.blockMapModel.restartGame(),this.isTouching=!1,this.myScore=0},e.prototype.randomCubeStack=function(){for(var t=this.saveCourseCubeStack[this.courseNum],e=0;e<this.createNum;e++){this.allCubeStack[e].hideAll();var o=t[e],a="block_2",i=Math.pow(this.courseNum+100,2),n=this.setRandomSeed(i);a=this.allSpriteFrameByAction[n].spriteFrame,1==this.courseNum?a="block_3":2==this.courseNum&&(a="block_4"),this.allCubeStack[e].init(o,!1,a),this.allCubeStack[e].setActive(!0),this.allCubeStack[e].canClick=!0,1!=e&&(this.allCubeStack[e].changeAlpha(!1),this.allCubeStack[e].isActive=!1,this.allCubeStack[e].node.active=!1)}},e.prototype.initCubeStack=function(){this.allCubeStack=[];for(var t=app.res.loadPrefab(cfg.res.prefabs.cubeStack),e=0;e<this.createNum;e++){var o=cc.instantiate(t),a=o.getComponent(u.default);o.parent=this.cubeStackBgNode,o.x=200*e-200,o.y=2,a.node.active=!0,this.allCubeStack.push(a)}this.cubeStackModel.allCubeStack=this.allCubeStack},e.prototype.loadJsonByMapData=function(t){void 0===t&&(t=null);var e=app.tutorialData.getAllMapData(this.courseNum);this.loadMapDataByJonsMap(e)},e.prototype.random=function(t,e){void 0===t&&(t=0),void 0===e&&(e=1),this._seed=(9301*this._seed+49297)%233280;var o=t+this._seed/233280*(e-t);return 0==t&&1==e?o:Math.ceil(o)},e.prototype.setRandomSeed=function(t){return this._seed=t,this.random(0,4)-1},e.prototype.loadMapDataByJonsMap=function(t){for(var e=t.cubeData,o=t.rowNum,a=t.columnNum,i=this.getRandomSpriteFrame(),n=0;n<cfg.const.gameRowNum;n++)for(var c=0;c<cfg.const.gameColNum;c++){this.blockMapModel.pointBlockArr[n][c]=0,this.blockMapModel.allCubes[c][n].hideCube();var r=n+c+100*this.courseNum,s=Math.pow(r,2);if(0!=e[n][c]){var l=this.blockMapModel.allCubes[c][n];this.blockMapModel.pointBlockArr[n][c]=1,i=this.allSpriteFrameByAction[this.setRandomSeed(s)].spriteFrame,1==this.courseNum&&"block_3"==i&&(i="block_2"),l.showShader(i),l.showInGrid()}}this.blockMapModel.columnNum=[].concat(a),this.blockMapModel.rowNum=[].concat(o),this.initEffNode(),this.showEffNode(),this.showHighCube()},e.prototype.setShowHighLight=function(){for(var t in this.saveAllCube)this.saveAllCube[t].setCubeSpriteHighLigh()},e.prototype.showHighCube=function(){this.saveAllCube=[];var t=null;if(0==this.courseNum){t=[{x:4,y:5},{x:5,y:5},{x:6,y:5}],9==cfg.const.gameRowNum&&(t=[{x:4,y:4}]);for(var e=0;e<t.length;e++)this.blockMapModel.allCubes[t[e].x][t[e].y].onShowHighLight(),this.saveAllCube.push(this.blockMapModel.allCubes[t[e].x][t[e].y])}else if(1==this.courseNum)for(t=[{x:5,y:4},{x:5,y:5},{x:5,y:6}],9==cfg.const.gameRowNum&&(t=[{x:4,y:2},{x:4,y:3},{x:4,y:4}]),e=0;e<t.length;e++)this.blockMapModel.allCubes[t[e].x][t[e].y].onShowHighLight(),this.saveAllCube.push(this.blockMapModel.allCubes[t[e].x][t[e].y]);else if(2==this.courseNum)for(t=[{x:4,y:3},{x:4,y:4},{x:5,y:3},{x:5,y:4}],9==cfg.const.gameRowNum&&(t=[{x:5,y:3},{x:5,y:4},{x:5,y:5},{x:4,y:3}]),e=0;e<t.length;e++)this.blockMapModel.allCubes[t[e].x][t[e].y].onShowHighLight(),this.saveAllCube.push(this.blockMapModel.allCubes[t[e].x][t[e].y]);else if(3==this.courseNum)for(t=[{x:3,y:3},{x:3,y:4},{x:4,y:4},{x:4,y:5}],e=0;e<t.length;e++)this.blockMapModel.allCubes[t[e].x][t[e].y].onShowHighLight(),this.saveAllCube.push(this.blockMapModel.allCubes[t[e].x][t[e].y])},e.prototype.initEffNode=function(){var t=new cc.Node;this.sprite&&(this.sprite.node.active=!0,this.sprite.node.removeFromParent()),this.sprite=t.addComponent(cc.Sprite),t.parent=this.node,this.sprite.node.active=!0},e.prototype.showEffNode=function(){var t=this,e=app.res.loadAtlas(cfg.res.atlas.block_folder);this.sprite.node.x=this.cubeStackBgNode.x+50,this.sprite.node.y=this.cubeStackBgNode.y-80;var o=cc.sequence(cc.callFunc(function(){t.sprite.node.x=t.cubeStackBgNode.x+50,t.sprite.node.y=t.cubeStackBgNode.y-80}),cc.callFunc(function(){t.sprite.node.opacity=255;var o=e.getSpriteFrame("tutorial3");t.sprite.spriteFrame=o}),cc.delayTime(.2),cc.callFunc(function(){t.onShowMoveAction()}));cc.tween(this.sprite.node).delay(2).then(o).start()},e.prototype.onShowMoveAction=function(){var t=this,e=[this.blockMapModel._allCubes[5][5].getWorldPosition(),this.blockMapModel._allCubes[5][5].getWorldPosition(),this.blockMapModel._allCubes[5][4].getWorldPosition(),this.blockMapModel._allCubes[5][4].getWorldPosition()];9==cfg.const.gameRowNum&&(e=[this.blockMapModel._allCubes[4][4].getWorldPosition(),this.blockMapModel._allCubes[4][3].getWorldPosition(),this.blockMapModel._allCubes[5][4].getWorldPosition(),this.blockMapModel._allCubes[4][4].getWorldPosition()]);var o=app.res.loadAtlas(cfg.res.atlas.block_folder).getSpriteFrame("tutorial3");this.sprite.spriteFrame=o,this.sprite.node.stopAllActions();var a=cc.sequence(cc.callFunc(function(){t.sprite.node.opacity=0}),cc.delayTime(1),cc.callFunc(function(){t.showEffNode()}));cc.tween(this.sprite.node).call(function(){t.sprite.node.active=!0,t.sprite.node.x=t.cubeStackBgNode.x+50,t.sprite.node.y=t.cubeStackBgNode.y-80}).to(1,{position:cc.v3(e[this.courseNum].x-cfg.const.finalW/2+30,e[this.courseNum].y-100-cfg.const.finalH/2+30,100)}).then(a).start()},e.prototype.getRandomSpriteFrame=function(){var t="block_"+this.courseNum;return this.courseNum>4&&(t="block_4"),t},e.prototype.onMouseStartClick=function(t,e){var o=this.allCubeStack[t].cubeStack_id,a=this.allCubeStack[t].spriteFrame;this.blockMapModel.spriteFrame=a,e?this.isCanRotate=!0:(this.isCanRotate=!1,this.blockMapModel.curCubeStack.init(o,!0,a),this.blockMapModel._curPoint=this.getGridIdx(this.blockMapModel.curCubeStack.getFirstPos()),this.blockMapModel.curCubeStack.touchAction(this.node.convertToNodeSpaceAR(this.touchPos),!1,this.allCubeStack,t),this.blockMapModel.curCubeStack.setCubeStackScale(),app.audio.playSound("select"),this.blockMapModel.curCubeStack.node.active=!0,this.blockMapModel.curCubeStack.setPosition(this.node.convertToNodeSpaceAR(this.touchPos)))},e.prototype.onMouseDown=function(t){if(!this.isTouching){this.touchPos=t.getLocation(),this.savePos=this.node.convertToNodeSpaceAR(this.touchPos);for(var e=0;e<this.createNum;e++)if(this.allCubeStack[e].canClick&&this.allCubeStack[e].cubeStack_isActive&&this.allCubeStack[e].pointInCollider(this.touchPos)){this.isTouching=!0,this.curMoveIdx=e;var o=this.allCubeStack[e].cubeStack_id,a=this.allCubeStack[e].spriteFrame;this.blockMapModel.spriteFrame=a,this.blockMapModel.curCubeStack.init(o,!0,a),this.blockMapModel.curCubeStack.touchActionByTutorials(this.node.convertToNodeSpaceAR(this.touchPos),!1,this.allCubeStack,e),this.blockMapModel._curPoint=this.getGridIdx(this.blockMapModel.curCubeStack.getFirstPos()),this.blockMapModel.curCubeStack.setCubeStackScale(),this.sprite&&(this.sprite.node.stopAllActions(),this.sprite.node.opacity=0),app.audio.playSound("select"),this.blockMapModel.curCubeStack.node.active=!0,this.blockMapModel.curCubeStack.setPosition(this.node.convertToNodeSpaceAR(this.touchPos))}}},e.prototype.onMouseMove=function(t){if(this.isTouching){this.touchPos=t.getLocation();var e=this.node.convertToNodeSpaceAR(this.touchPos);this.blockMapModel.curCubeStack.setPosition(e),this.recordPoint=this.getGridIdx(this.blockMapModel.curCubeStack.getFirstPos()),this.blockMapModel.CubeColorNormal(),this.recordPoint!=this.blockMapModel._curPoint&&(this.blockMapModel.hideShader(),this.blockMapModel._curPoint=this.recordPoint,this.blockMapModel.cubeInGrid()),this.blockMapModel.curCubeStack.setCubeStackScale()}},e.prototype.onMouseUp=function(t){if(1==this.isTouching)if(this.isTouching=!1,this.touchLocation=t.getLocation(),this.curCubeShader=this.blockMapModel.curCubeShader,this.curCubeShader.length>0)if(this.getCanRemoveCube(this.blockMapModel.removeArr)){this.blockMapModel.hideShader(),this.blockMapModel.CubeColorNormal(),this.sprite.node.stopAllActions(),this.showEffNode(),this.showHighCube();var e=this.allCubeStack[this.curMoveIdx].node.parent.convertToWorldSpaceAR(this.allCubeStack[this.curMoveIdx].node.position);e=this.node.convertToNodeSpaceAR(e),this.blockMapModel.curCubeStack.touchActionByTutorials(e,!0,this.allCubeStack)}else{this.blockMapModel.curCubeStack.setActive(!1),this.allCubeStack[this.curMoveIdx].setDeath(),this.cubeStackModel._lastGameRemoveCubeStack.push(this.curMoveIdx),this.blockMapModel.onSetMoveUpData(),this.pushArrLength=this.curCubeShader.length,this.curCubeShader=new Array,app.audio.playSound("place"),this.logEventModel.onTutorialClear(this.courseNum),this.courseNum++,this.blockMapModel.canRemoveCube(this.blockMapModel.removeArr,this,this.cubeStackModel.cubeStackNum);var o=this;this.scheduleOnce(function(){var t=3;9==cfg.const.gameRowNum&&(t=4),this.courseNum==t?(this.node.removeFromParent(),app.Utils.saveStringToLocal("isFirstOpenGame","no"),cfg.const.isFirstOpenTutotial&&this.logEventModel.showLogWithFirstGameComplete(),app.event.dispatch(cfg.event.SHOW_BANNER)):o.onStartNewGame()},.8)}else this.sprite.node.stopAllActions(),this.showEffNode(),this.showHighCube(),e=this.allCubeStack[this.curMoveIdx].node.parent.convertToWorldSpaceAR(this.allCubeStack[this.curMoveIdx].node.position),e=this.node.convertToNodeSpaceAR(e),this.blockMapModel.curCubeStack.touchActionByTutorials(e,!0,this.allCubeStack)},e.prototype.hasOtherCube=function(){for(var t=0;t<cfg.const.gameRowNum;t++)for(var e=0;e<cfg.const.gameColNum;e++)if(1==this.blockMapModel.pointBlockArr[t][e])return!0;return!1},e.prototype.getCanRemoveCube=function(t){for(var e=t.length,o=this.blockMapModel.deepcopy(this.blockMapModel.allCubes),a=this.blockMapModel.deepcopy(this.blockMapModel.pointBlockArr),i=0;i<this.curCubeShader.length;i++)a[this.curCubeShader[i].getPoint().x][this.curCubeShader[i].getPoint().y]=1;if(9==cfg.const.gameRowNum)for(var n=0;n<9;n++){var c=0;for(i=0;i<cfg.const.Sudoku;i++)for(var r=0;r<cfg.const.Sudoku;r++){var s=i+Math.floor(n/cfg.const.Sudoku)*cfg.const.Sudoku,l=r+Math.floor(n%cfg.const.Sudoku)*cfg.const.Sudoku;1==a[s][l]&&c++}if(9==c)for(i=0;i<cfg.const.Sudoku;i++)for(r=0;r<cfg.const.Sudoku;r++)s=i+Math.floor(n/cfg.const.Sudoku)*cfg.const.Sudoku,l=r+Math.floor(n%cfg.const.Sudoku)*cfg.const.Sudoku,a[s][l]=0}if(e>0){var u=0;for(i=0;i<e;i++)if((u=t[i])>=cfg.const.gameRowNum)for(u-=cfg.const.gameRowNum,r=0;r<cfg.const.gameColNum;r++)a[o[r][u].getPoint().x][o[r][u].getPoint().y]=0;else for(r=0;r<cfg.const.gameRowNum;r++)a[o[u][r].getPoint().x][o[u][r].getPoint().y]=0}for(i=0;i<cfg.const.gameRowNum;i++)for(r=0;r<cfg.const.gameColNum;r++)if(1==a[i][r])return!0;return!1},e.prototype.startEff_Beautiful=function(){},e.prototype.addScore=function(){},e.prototype.getGridIdx=function(t){this.buttomY=this.blockMapModel.allCubes[0][0].getWorldPosition().y,this.leftX=this.blockMapModel.allCubes[0][0].getWorldPosition().x;var e=(t.x-this.leftX)/cfg.const.cubeSpriteWidth,o=(t.y-this.buttomY)/cfg.const.cubeSpriteWidth;return e=Math.round(e),o=Math.round(o),cc.v2(e,o)},e.prototype.showRemoveByJiuAction=function(t){var e=this.node.convertToNodeSpaceAR(t);this.actionByNode();var o="N2Eff_debris_N1vertical_"+this.getColorAction()+"3*3",a=this.gameEffModel.getEffNode("newEff_action",o,this.node,0,0);this.gameEffModel.showRemoveEffNode(a,e.x,e.y)},e.prototype.showRemoveAction=function(t,e){var o=this.node.convertToNodeSpaceAR(e);this.actionByNode();var a=this.getColorAction(),i="N2Eff_debris_N1_"+a;1==t||(i="N2Eff_debris_N1vertical_"+a);var n=this.gameEffModel.getEffNode("newEff_action",i,this.node,0,0);this.gameEffModel.showRemoveEffNode(n,o.x,o.y)},e.prototype.getColorAction=function(){for(var t=0;t<this.allSpriteFrameByAction.length;t++){var e=this.allSpriteFrameByAction[t];if(e.spriteFrame==this.blockMapModel.spriteFrame)return e.action}},e.prototype.showNewAction=function(t){var e=this.node.convertToNodeSpaceAR(t),o="N2Eff_debris_N1_"+this.getColorAction(),a=this.gameEffModel.getEffNode("eff_Node",o,this.node,0,0);this.gameEffModel.showRemoveEffNode(a,e.x,e.y)},e.prototype.actionByNode=function(){var t=this,e=this.node.x,o=this.node.y,a=cc.repeatForever(cc.sequence(cc.moveTo(.018,cc.v2(e+5,o+5)),cc.moveTo(.018,cc.v2(e+1,o+1))));this.node.stopAllActions(),cc.tween(this.node).then(a).start(),setTimeout(function(){t.node.stopAllActions(),t.node.x=e,t.node.y=o},400)},e.prototype.onSkipBtnClick=function(){app.audio.playSound("button");var t=this;app.view.toast("Quit Tutorial?",function(){app.audio.playSound("button"),t.node.removeFromParent(),app.event.dispatch(cfg.event.NEW_GAME_START),app.event.dispatch(cfg.event.SHOW_BANNER),cfg.const.isFirstOpenTutotial&&t.logEventModel.showLogWithTutorialSkip(),app.Utils.saveStringToLocal("isFirstOpenGame","no")},function(){app.audio.playSound("button")})},e.prototype.onBtnBackClick=function(){app.audio.playSound("button"),this.node.removeFromParent(),app.Utils.saveStringToLocal("isFirstOpenGame","no"),this.AdManageTools.hideBanner(),app.event.off(cfg.event.SHOW_EXITGAME),app.view.showSetView()},e.prototype.onSetBtnClick=function(){app.audio.playSound("button"),this.node.removeFromParent(),app.view.showSetView(!0)},e.prototype.onShowExitGame=function(){this.AdManageTools.moveTaskToBack()},e.prototype.onBtnExitGameNoClick=function(){app.audio.playSound("button")},e.prototype.onBtnExitGameYesClick=function(){app.audio.playSound("button"),this.AdManageTools.onBackPressed()},n([g(cc.Node)],e.prototype,"gameBgNode",void 0),n([g(cc.Node)],e.prototype,"cubeStackBgNode",void 0),n([g(cc.Node)],e.prototype,"bgMask",void 0),n([g(cc.Button)],e.prototype,"btn_back",void 0),n([g(cc.Button)],e.prototype,"btn_skip",void 0),n([g(cc.Node)],e.prototype,"spCubeStackBg",void 0),n([d],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../utils/AdManageTools":"AdManageTools","../utils/BlockPuzzleCubeStackTools":"BlockPuzzleCubeStackTools","../utils/BlockPuzzleEffTools":"BlockPuzzleEffTools","../utils/BlockPuzzleLogEvent":"BlockPuzzleLogEvent","../utils/BlockPuzzleMapTools":"BlockPuzzleMapTools","./CubeStack":"CubeStack"}],Utils:[function(t,e,o){"use strict";cc._RF.push(e,"e2f6epg/NNFGZNp2wxi7JPt","Utils"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function t(){}return t.prototype.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},t.prototype.saveStringToLocal=function(t,e){cc.sys.localStorage.setItem(t,e)},t.prototype.getStringFromLocal=function(t){return cc.sys.localStorage.getItem(t)},t.prototype.removeStringFromLocal=function(t){cc.sys.localStorage.removeItem(t)},t.prototype.RoundFunc=function(t,e){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)},t.prototype.getIsLastDay=function(t){var e=new Date,o=new Date(t);return e.getFullYear()-o.getFullYear()>0||e.getMonth()-o.getMonth()>0||e.getDate()-o.getDate()>0},t.prototype.getIslastWeek=function(t){var e=new Date,o=new Date(t),a=e.getDay();0==a&&(a=7);var i=o.getDay();return 0==i&&(i=7),a-i<0||e.getDate()-o.getDate()>=7},t.prototype.getIsLasYear=function(t){var e=new Date,o=new Date(t);return e.getFullYear()-o.getFullYear()>0},t.prototype.getIsLastMonth=function(t){var e=new Date,o=new Date(t);return e.getFullYear()-o.getFullYear()>0||e.getMonth()-o.getMonth()>0},t.prototype.addBtnClickEvent=function(t,e,o,a,i,n){void 0===i&&(i=null),void 0===n&&(n=!1);var c=e.addComponent(cc.Button),r=new cc.Component.EventHandler;r.target=t,r.component=o,r.handler=a,r.customEventData=i,c.clickEvents.push(r);var s=c.node.y;c.node.on(cc.Node.EventType.TOUCH_START,function(){c.node.y=s-5}),c.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){c.node.y=s}),c.node.on(cc.Node.EventType.TOUCH_END,function(){c.node.y=s})},t.prototype.onViewAction=function(t){t.scale=0,t.opacity=255,cc.tween(t).to(.2,{scale:1.05,opacity:255}).to(.1,{scale:1,opacity:255}).start()},t.prototype.onCloseViewAction=function(t,e){t.opacity=255,cc.tween(t).to(.1,{scale:.5,opacity:255}).call(function(){e()}).start()},t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.instance=null,t}();o.default=a,cc._RF.pop()},{}],ViewCpn:[function(t,e,o){"use strict";cc._RF.push(e,"e6a55JMZ11I/Iyr/SDRlIl0","ViewCpn"),Object.defineProperty(o,"__esModule",{value:!0});var a=t("../views/prefabs/Toast"),i=function(){function t(){}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.toast=function(t,e,o){void 0===t&&(t=""),void 0===e&&(e=null),void 0===o&&(o=null);var i=app.res.loadPrefab(cfg.res.prefabs.toast),n=cc.instantiate(i),c=cc.director.getScene();n.parent=c,n.zIndex=8,n.getComponent(a.default).makeText(t,e,o)},t.prototype.toastOnlyShowOk=function(t,e){void 0===t&&(t=""),void 0===e&&(e=null);var o=app.res.loadPrefab(cfg.res.prefabs.toast),i=cc.instantiate(o),n=cc.director.getScene();i.parent=n,i.zIndex=8,i.getComponent(a.default).makeText(t,e),i.getComponent(a.default).makeOnlyShowOk()},t.prototype.showSetView=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var o=app.res.loadPrefab(cfg.res.prefabs.settingView),a=cc.instantiate(o),i=cc.director.getScene();a.parent=i,a.zIndex=cfg.const.zIndex.settingView,a.x=cfg.const.finalW/2,a.y=cfg.const.finalH/2,a.getComponent("SettingView").setIsTutorial(t,e)},t.prototype.showMainSetView=function(){var t=app.res.loadPrefab(cfg.res.prefabs.mainSettingView),e=cc.instantiate(t),o=cc.director.getScene();e.parent=o,e.zIndex=cfg.const.zIndex.settingView,e.x=cfg.const.finalW/2,e.y=cfg.const.finalH/2},t.prototype.showLanguageView=function(){var t=app.res.loadPrefab(cfg.res.prefabs.languageView),e=cc.instantiate(t),o=cc.director.getScene();e.parent=o,e.x=cfg.const.finalW/2,e.y=cfg.const.finalH/2,e.zIndex=cfg.const.zIndex.languageView},t.prototype.showStoreView=function(){var t=app.res.loadPrefab(cfg.res.prefabs.storeView),e=cc.instantiate(t),o=cc.director.getScene();e.parent=o,e.x=cfg.const.finalW/2,e.y=cfg.const.finalH/2,e.zIndex=cfg.const.zIndex.languageView},t.prototype.showRankView=function(){var t=app.res.loadPrefab(cfg.res.prefabs.rankView),e=cc.instantiate(t),o=cc.director.getScene();e.parent=o,e.x=cfg.const.finalW/2,e.y=cfg.const.finalH/2,e.zIndex=cfg.const.zIndex.languageView},t.prototype.showScoreView=function(){var t=app.res.loadPrefab(cfg.res.prefabs.statisticsView),e=cc.instantiate(t),o=cc.director.getScene();e.parent=o,e.x=cfg.const.finalW/2,e.y=cfg.const.finalH/2,e.zIndex=cfg.const.zIndex.scoreView},t.prototype.showTutorialsView=function(){var t=app.res.loadPrefab(cfg.res.prefabs.tutorials),e=cc.instantiate(t),o=cc.director.getScene();e.parent=o,e.x=cfg.const.finalW/2,e.y=cfg.const.finalH/2,e.zIndex=cfg.const.zIndex.tutorialsView},t.prototype.showHowToPlayView=function(){var t=app.res.loadPrefab(cfg.res.prefabs.howToPlayView),e=cc.instantiate(t),o=cc.director.getScene();e.parent=o,e.x=cfg.const.finalW/2-375,e.y=cfg.const.finalH/2-667,e.zIndex=cfg.const.zIndex.howToPlayView},t.prototype.showRecordView=function(t){var e=app.res.loadPrefab(cfg.res.prefabs.smallView),o=cc.instantiate(e),a=cc.director.getScene();o.parent=a,o.x=cfg.const.finalW/2,o.y=cfg.const.finalH/2,o.zIndex=cfg.const.zIndex.recordView,o.getComponent("SmallView").setGameScore(t)},t.prototype.showDailyView=function(){var t=cc.director.getScene(),e=app.res.loadPrefab(cfg.res.prefabs.dailyView),o=cc.instantiate(e);o.parent=t,o.x=cfg.const.finalW/2,o.y=cfg.const.finalH/2,o.zIndex=cfg.const.zIndex.dailyView},t.prototype.showChallengeView=function(){var t=app.res.loadPrefab(cfg.res.prefabs.challengeView),e=cc.instantiate(t),o=cc.director.getScene();e.parent=o,e.x=cfg.const.finalW/2-375,e.y=cfg.const.finalH/2-667,e.zIndex=cfg.const.zIndex.challengeView},t.prototype.showChallengeRecordView=function(t,e){var o=app.res.loadPrefab(cfg.res.prefabs.challengeRecordView),a=cc.instantiate(o),i=cc.director.getScene();a.parent=i,a.x=cfg.const.finalW/2,a.y=cfg.const.finalH/2,a.zIndex=cfg.const.zIndex.recordView,a.getComponent("ChallengeRecordView").initRecordViewData(t,e)},t.instance=null,t}();o.default=i,cc._RF.pop()},{"../views/prefabs/Toast":"Toast"}],mainGameScene:[function(t,e,o){"use strict";cc._RF.push(e,"e75e413WndCz7YZ4CtK1hRV","mainGameScene");var a,i=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,a){var i,n=arguments.length,c=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,a);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../components/InitCpn"),r=t("../prefabs/CubeStack"),s=t("../utils/AdManageTools"),l=t("../utils/BlockPuzzleCubeStackTools"),u=t("../utils/BlockPuzzleEffTools"),h=t("../utils/BlockPuzzleLogEvent"),p=t("../utils/BlockPuzzleMapPushTools"),d=t("../utils/BlockPuzzleMapTools"),g=t("../utils/BlockPuzzleNewAITools"),f=t("../utils/BlockPuzzleRulerTools"),b=t("../utils/newBlockStyleAITools"),m=t("../utils/SDKTools"),S=cc._decorator,y=S.ccclass,v=S.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameBgNode=null,e.cubeStackBgNode=null,e.scoreNode=null,e.scoreTxt=null,e.highTxt=null,e.addScoreText=null,e.bgMask=null,e.save_node=null,e.btn_rotate=null,e.addScoreNode=null,e.addScore_text=null,e.rotate_num=null,e.random_num=null,e.sp_progress=null,e.gold_text=null,e.tranLabel=new Array,e.next_node=null,e.rotateNode=null,e.AdManageTools=null,e.blockMapModel=null,e.cubeStackModel=null,e.gameEffModel=null,e.blockAiTools=null,e.blockRulerTools=null,e.blockNewAiTools=null,e.logEventModel=null,e.blockUtil=null,e.isTouching=!1,e.isTouchMuch=!1,e.myScore=0,e.myHighScore=0,e.step_num=0,e.average_score=null,e.arr_average_score=null,e.curMoveIdx=0,e.buttomY=null,e.isGameOver=!1,e.time=0,e.leftX=null,e.curDR=null,e.isAnimationTime=!1,e.gameOverNotClick=!1,e}return i(e,t),e.prototype.onLoad=function(){var t=this;c.default.getInstance(),m.default.init(),this._all_score_Arr=[100,200,500,700,1e3,1200,1500,2e3,2500,3e3],app.event.targetOff(this),app.event.on(cfg.event.CHECK_GAME_OVER,this.onCheckGameOver,this),app.event.on(cfg.event.NEW_GAME_START,this.onNewGameStart,this),app.event.on(cfg.event.CHANGE_LANGUAGE,this.onChangeLanguage,this),app.event.on(cfg.event.SHOW_BANNER,this.onShowBanner,this),app.event.on(cfg.event.SHOW_EXITGAME,this.onBackMainGame,this),app.event.on(cfg.event.SHOW_GOTOMAINVIEW,this.onBackMainGame,this),app.event.on(cfg.event.ROTATE_CUBESTACK,this.actionRotate,this),app.event.on(cfg.event.GOTO_MAINVIEW,this.onGotoMainView,this),app.event.on(cfg.event.CHANGE_ROTATENUM,this.onChangeRotateNum,this),app.event.on(cfg.event.ROTATE_REPLAY,this.onReplayByRotate,this),this.AdManageTools=new s.default,this.AdManageTools.getConfigData(),this.blockMapModel=new d.default,this.cubeStackModel=new l.default,this.gameEffModel=new u.default,this.blockAiTools=new b.default,this.logEventModel=new h.default,this.blockRulerTools=new f.default,this.blockUtil=new p.default,this.blockNewAiTools=new g.default,this.btn_atlas=app.res.loadAtlas(cfg.res.atlas.block_btn),cc.tween(this.node).delay(.1).call(function(){t.AdManageTools.onHideLogo()}).start(),cfg.const.nowScore=0,this.initEffNode(),this.setSpriteFrameByAction(),this.gameSaveDataByEvent(),this.logEventModel.showEventAnalytics(),this.initSoundAndLanguage(),this.onNewGameStart(),cc.debug.setDisplayStats(!1),cc.view.setResizeCallback(function(){return t.resize()}),this.resize(),this.onLoadEvent(),this.isFirstOpenGame(),this.onChangeLanguage(),this.logEventModel.getNowViewIsRecordView(),this.onChangeRotateNum()},e.prototype.setProgress=function(){var t=this.myScore;t>1600&&(t%=1600);var e=t/1600;this.sp_progress.progress=e},e.prototype.onGetProgressRuler=function(t){for(var e=this,o=1600*this.sp_progress.progress,a=function(a){var n=parseInt(o+a+"");n%600==0?cfg.const.coinNum+=10:n%1e3==0?cfg.const.coinNum+=20:n%1600==0&&(cfg.const.coinNum+=50),n>1600&&(n%=1600),cc.tween(i.sp_progress.node).delay(.005*a).call(function(){var o=n/1600;e.sp_progress.progress=o,a==t-1&&app.event.dispatch(cfg.event.CHANGE_ROTATENUM)}).start()},i=this,n=0;n<t;n++)a(n)},e.prototype.onReplayByRotate=function(){cfg.const.isRotateTime=!0,this.isRotate=!0,this.cubeStackModel.showBtnRotate(this.isRotate),this.isRotate&&(this.cubeStackModel.hideAllEffCycle(),this.resetAllCubeStack(),this.gameEffModel.hideEff_HighAction())},e.prototype.onBackMainGame=function(){app.audio.playSound("button"),this.saveCubeStackArr(),this.saveByMap(),this.saveStepNum(),this.cleanData(),cc.game.off(cc.game.EVENT_SHOW),cc.game.off(cc.game.EVENT_HIDE),app.event.initGameEvent(),app.event.off(cfg.event.CHECK_GAME_OVER),app.event.off(cfg.event.NEW_GAME_START),app.event.off(cfg.event.CHANGE_LANGUAGE),app.event.off(cfg.event.SHOW_BANNER),app.event.off(cfg.event.SHOW_EXITGAME),app.event.off(cfg.event.REMOVE_CUBE),app.event.off(cfg.event.ROTATE_CUBESTACK),app.event.off(cfg.event.GOTO_MAINVIEW),app.event.off(cfg.event.SHOW_GOTOMAINVIEW),app.event.off(cfg.event.UPDATE_STYLE),app.event.off(cfg.event.CHANGE_ROTATENUM),app.event.off(cfg.event.ROTATE_REPLAY);var t=this;cc.director.loadScene("mainScene",function(){t.AdManageTools.hideBanner(),t.node.removeFromParent()}),app.LogEvent.showLogEventWithName("Game_Back_Click")},e.prototype.onGotoMainView=function(){app.event.on(cfg.event.SHOW_EXITGAME,this.onBackMainGame,this);var t=parseInt(app.Utils.getStringFromLocal("challenge_todayIsOver"))||0;cfg.const.challenge_todayIsOver=0!=t,this.gameSaveDataByEvent()},e.prototype.onStoreBtnClick=function(){app.audio.playSound("button"),app.view.showStoreView()},e.prototype.gameSaveDataByEvent=function(){var t=this;cc.game.on(cc.game.EVENT_HIDE,function(){if(console.log("\u6e38\u620f\u8fdb\u5165\u540e\u53f0"),!t.isGameOver&&this.node.active){t.saveCubeStackArr(),t.saveByMap(),t.saveStepNum();var e=JSON.parse(app.Utils.getStringFromLocal("startGameTime")),o=t.getTimeSub(e);o>=15?app.LogEvent.showLogEventWithName("Session_15minute"):o>=12?app.LogEvent.showLogEventWithName("Session_12minute"):o>=10?app.LogEvent.showLogEventWithName("Session_10minute"):o>=9?app.LogEvent.showLogEventWithName("Session_9minute"):o>=5&&app.LogEvent.showLogEventWithName("Session_5minute")}},this);var e=new Date;app.Utils.saveStringToLocal("startGameTime",JSON.stringify(e)),cc.game.on(cc.game.EVENT_SHOW,function(){console.log("\u6e38\u620f\u8fdb\u5165\u524d\u53f0");var t=new Date;app.Utils.saveStringToLocal("startGameTime",JSON.stringify(t))},this)},e.prototype.isFirstOpenGame=function(){var t=app.Utils.getStringFromLocal("isFirstOpenGame");t&&""!=t&&"yes"!=t||(cfg.const.isFirstOpenTutotial=!0,app.view.showTutorialsView(),this.AdManageTools.hideBanner())},e.prototype.initSoundAndLanguage=function(){var t=app.Utils.getStringFromLocal("save_language");t&&""!=t?cfg.const.language=t:t=cfg.const.language,app.tranLanguage.onSaveLanguage(t);var e=app.Utils.getStringFromLocal("otherVolume");e&&""!=e||(e=1),cfg.const.soundVolume=e;var o=app.Utils.getStringFromLocal("otherMusic");o&&""!=o||(o=1),cfg.const.otherMusic=o},e.prototype.onShowBanner=function(){var t=(new Date).getTime();t-this.bannerTime<=1e3||(this.bannerTime=t,this.AdManageTools.initBanner())},e.prototype.setSpriteFrameByAction=function(){this.allSpriteFrameByAction=[{spriteFrame:"block_0",action:"darkblue"},{spriteFrame:"block_1",action:"green"},{spriteFrame:"block_2",action:"pink"},{spriteFrame:"block_3",action:"purple"},{spriteFrame:"block_4",action:"red"},{spriteFrame:"block_5",action:"yellow"}]},e.prototype.resize=function(){var t=cc.find("Canvas").getComponent(cc.Canvas);this.curDR||(this.curDR=t.designResolution);var e=this.curDR,o=cc.view.getFrameSize(),a=o.width,i=o.height,n=a,c=i;a/i>e.width/e.height?n=(c=e.height)*a/i:c=i/a*(n=e.width),t.designResolution=cc.size(n,c),t.node.width=n,t.node.height=c,t.node.emit("resize"),this.bgMask.width=n,this.bgMask.height=c,this.bgMask.emit("resize"),cfg.const.finalW=n,cfg.const.finalH=c},e.prototype.onBtnSetClick=function(){app.audio.playSound("button"),app.event.off(cfg.event.SHOW_EXITGAME),this.saveCubeStackArr(),this.saveByMap(),this.saveStepNum(),app.view.showSetView(!1,!0)},e.prototype.onNewGameStart=function(){this.blockAiTools.initCubeStackType(),this.cubeStackModel.initSaveCubeStackData(this.save_node),this.onStartGameData()},e.prototype.getTimeSub=function(t){var e=new Date(t),o=new Date,a=o.getHours()-e.getHours();return o.getDate()>e.getDate()&&(a+=24),60*a+o.getMinutes()-e.getMinutes()},e.prototype.saveCubeStackArr=function(){var t=this.cubeStackModel._lastGameRemoveCubeStack,e={fileData:this.cubeStackModel.saveAllCubeStack,removeCubeStackArr:t};app.Utils.saveStringToLocal("saveCubeStack",JSON.stringify(e)),app.Utils.saveStringToLocal("nowScore",JSON.stringify(this.myScore))},e.prototype.actionRotate=function(t){var e=this,o=null;(o=-1==t?this.cubeStackModel.saveCubeStackData:this.cubeStackModel._allCubeStack[t]).node.active&&(o.node.stopAllActions(),this.cubeStackModel.showBtnRotate(!0),cc.tween(o.node).to(.15,{angle:-90}).call(function(){o.node.angle=0,o.rotateByCubeStack(),e.onCheckGame(),e.cubeStackModel.showBtnRotate(!0),o.hideEff_Cycle()}).start())},e.prototype.onChangeRotateNum=function(){this.gold_text.getComponent(cc.Label).string=cfg.const.coinNum;var t=parseInt(cfg.const.rotateNum);this.rotate_num.getComponent(cc.Label).string=t>0?cfg.const.rotateNum:"+";var e=parseInt(cfg.const.random_num);this.random_num.getComponent(cc.Label).string=e>0?cfg.const.random_num:"+";var o=this.blockMapModel.getAllPointAndSpriteFrame();this.logEventModel.onSaveGameData(o)},e.prototype.rotateByIndex=function(t){this.cubeStackModel.showBtnRotate(!1);var e=!1;if(-1==t?this.cubeStackModel.hasRotateCubeStackBySaveCube()&&(e=!0):this.cubeStackModel.hasRotateCubeStack(t)&&(e=!0),e)if(cfg.const.rotateTime++,this.isRotate=!1,cfg.const.isRotateTime=!1,cfg.const.isNeedSubRotateNum){cfg.const.rotateNum--;var o=parseInt(cfg.const.rotateNum);this.rotate_num.getComponent(cc.Label).string=o>0?o+"":"+",this.btn_rotate.normalSprite=this.btn_atlas.getSpriteFrame("bt_rotate_on"),this.btn_rotate.pressedSprite=this.btn_atlas.getSpriteFrame("bt_rotate_on"),this.btn_rotate.hoverSprite=this.btn_atlas.getSpriteFrame("bt_rotate_on"),this.btn_rotate.disabledSprite=this.btn_atlas.getSpriteFrame("bt_rotate_on")}else cfg.const.isNeedSubRotateNum=!0},e.prototype.onRefuseCubeStack=function(){if(app.audio.playSound("button"),cfg.const.random_num<=0)return cc.log("============\u5f53\u524d\u6b21\u6570\u5df2\u7528\u5c3d============="),void app.view.showStoreView();this.resertCubeStack(),cfg.const.random_num--,this.onChangeRotateNum()},e.prototype.rotateCubeStack=function(){if(!cfg.const.isRotateTime){if(app.audio.playSound("button"),cfg.const.rotateNum<=0)return cc.log("============\u5f53\u524d\u6b21\u6570\u5df2\u7528\u5c3d============="),void app.view.showStoreView();this.isRotate=!this.isRotate,1==this.isRotate?(this.btn_rotate.normalSprite=this.btn_atlas.getSpriteFrame("bt_rotate_off"),this.btn_rotate.pressedSprite=this.btn_atlas.getSpriteFrame("bt_rotate_off"),this.btn_rotate.hoverSprite=this.btn_atlas.getSpriteFrame("bt_rotate_off"),this.btn_rotate.disabledSprite=this.btn_atlas.getSpriteFrame("bt_rotate_off")):(this.btn_rotate.normalSprite=this.btn_atlas.getSpriteFrame("bt_rotate_on"),this.btn_rotate.pressedSprite=this.btn_atlas.getSpriteFrame("bt_rotate_on"),this.btn_rotate.hoverSprite=this.btn_atlas.getSpriteFrame("bt_rotate_on"),this.btn_rotate.disabledSprite=this.btn_atlas.getSpriteFrame("bt_rotate_on")),this.cubeStackModel.showBtnRotate(this.isRotate),this.isRotate||(this.cubeStackModel.resetCubeStack(),this.onCheckGameOver()),this.isRotate&&(this.cubeStackModel.hideAllEffCycle(),this.resetAllCubeStack(),this.gameEffModel.hideEff_HighAction())}},e.prototype.saveByMap=function(){var t=this.blockMapModel.getAllPointAndSpriteFrame();this.cubeStackModel.saveCubeStackDataByIdAndSpr(),this.logEventModel.onSaveGameData(t)},e.prototype.saveStepNum=function(){var t=JSON.stringify(this.step_num);app.Utils.saveStringToLocal("step_num",t)},e.prototype.cleanData=function(){this.blockMapModel.cleanData(),this.cubeStackModel.cleanData(),delete this.allCubeStack},e.prototype.onLoadEvent=function(){this.cubeStackBgNode.on(cc.Node.EventType.TOUCH_START,function(t){this.onMouseDown(t)},this),this.cubeStackBgNode.on(cc.Node.EventType.TOUCH_MOVE,function(t){this.onMouseMove(t)},this),this.cubeStackBgNode.on(cc.Node.EventType.TOUCH_END,function(t){this.onMouseUp(t)},this),this.cubeStackBgNode.on(cc.Node.EventType.TOUCH_CANCEL,function(t){this.onMouseUp(t)},this)},e.prototype.onDestroy=function(){app.event.targetOff(this),this.cleanData(),this.blockMapModel.cleanData(),this.cubeStackModel.cleanData()},e.prototype.getAllCubes=function(){for(var t=[],e=0;e<cfg.const.gameRowNum;e++){t[e]=[];for(var o=0;o<cfg.const.gameColNum;o++)t[e][o]=this.blockMapModel._allCubes[o][e]}return t},e.prototype.resetAllCubeStack=function(){for(var t=this,e=function(e){o.allCubeStack[e].node.stopAllActions();var a=cc.sequence(cc.rotateTo(0,0),cc.callFunc(function(){t.allCubeStack[e].changeAlpha(t.arrAlpha[e])}));cc.tween(o.allCubeStack[e].node).then(a).start()},o=this,a=0;a<cfg.const.createNum;a++)e(a)},e.prototype.onCheckGame=function(t){void 0===t&&(t=!1);var e=!1,o=this.getAllCubes();this.arrAlpha=[],this.allCubeStack=this.cubeStackModel._allCubeStack,this.blockRulerTools.initData(this.blockMapModel.columnNum,this.blockMapModel.rowNum,o),this.allCanRotateNum=!1;var a=app.Utils.getStringFromLocal("openTips");a&&""!=a||(a=1,app.Utils.saveStringToLocal("openTips",0));for(var i=0;i<cfg.const.createNum;i++){var n=1==this.isTouching&&i==this.curMoveIdx,c=this.blockRulerTools.checkGame(this.allCubeStack[i],n);this.allCubeStack[i].changeAlpha(c),this.arrAlpha.push(c),c?(e=!0,this.allCubeStack[i].cubeStack_id):this.allCubeStack[i].node.active&&this.allCubeStack[i].isAlive&&this.cubeStackModel.getNowGrayCubeIsByRotate(this.blockMapModel.columnNum,this.blockMapModel.rowNum,o,this.allCubeStack[i])&&(this.allCanRotateNum=!0)}return this.getIsCanPutBySaveCubeStack(),e},e.prototype.getIsCanPutBySaveCubeStack=function(){var t=!1;if(this.cubeStackModel.hasSaveCubeStack){var e=this.cubeStackModel.saveCubeStackData,o=this.blockRulerTools.checkGame(e,!1);e.changeAlpha(o),o&&(t=!0)}return t},e.prototype.getGrayCubeStackNum=function(){var t=0;this.grayCubeStack=null;for(var e=0;e<cfg.const.createNum;e++)this.allCubeStack[e].node.active&&this.allCubeStack[e].isAlive&&(t++,this.grayCubeStack=this.allCubeStack[e]);return t},e.prototype.getAllOpenTips=function(){var t=app.Utils.getStringFromLocal("openTips");t&&""!=t||(t=0,app.Utils.saveStringToLocal("openTips",0));var e=this.getAllCubes(),o=-1;if(1==t){for(var a=-1,i=null,n=0;n<cfg.const.createNum;n++)if(this.allCubeStack[n].node.active){var c=this.cubeStackModel.getAllGrayCubeIsByRotate(this.blockMapModel.columnNum,this.blockMapModel.rowNum,e,this.allCubeStack[n]);for(var r in c){var s=this.blockMapModel.deepcopy(this.blockMapModel.pointBlockArr),l=[].concat(this.blockMapModel.rowNum),u=[].concat(this.blockMapModel.columnNum),h=this.blockUtil.initBlockData(c[r],s,l,u);a<=h.maxNums&&(a=h.maxNums,i=h.cubeShader,this.allCubeStack[n].node,-1!=o&&(this.allCubeStack[o].node.stopAllActions(),this.allCubeStack[o].node.rotate=0))}o=n}this.blockMapModel.showHighAction(i)}else this.blockMapModel.hideHighAction()},e.prototype.initEffNode=function(){var t=new cc.Node;this.sprite&&(this.sprite.node.active=!0,this.sprite.node.removeFromParent()),this.sprite=t.addComponent(cc.Sprite),t.parent=this.node,this.sprite.node.active=!1},e.prototype.showMoveAction=function(){var t=this,e=app.res.loadAtlas(cfg.res.atlas.block_folder).getSpriteFrame("tutorial3");this.sprite.spriteFrame=e;var o=this.grayCubeStack.node.convertToWorldSpaceAR(cc.Vec2.ZERO),a=this.save_node.convertToWorldSpaceAR(cc.Vec2.ZERO),i=this.sprite.node.parent.convertToWorldSpaceAR(cc.Vec2.ZERO);this.sprite.node.stopAllActions();var n=cc.sequence(cc.callFunc(function(){t.sprite.node.active=!0,t.sprite.node.x=o.x-i.x+50,t.sprite.node.y=o.y-i.y-50}),cc.fadeIn(.2),cc.moveBy(.8,cc.v2(a.x-o.x,a.y-o.y)),cc.fadeOut(.2),cc.delayTime(1));cc.tween(this.sprite.node).repeatForever(n).start()},e.prototype.getIsRealyGameOver=function(t){if(t)return!0;var e=this.getIsCanPutBySaveCubeStack();if(0==t&&this.cubeStackModel.hasSaveCubeStack)return e;var o=this.getGrayCubeStackNum();return 0!=t||this.cubeStackModel.hasSaveCubeStack?void 0:o<=1&&(this.showMoveAction(),!0)},e.prototype.onCheckGameOver=function(){var t=this.onCheckGame(!0),e=this.getIsRealyGameOver(t);this.gameOverNotClick=!1,0==e&&(this.cubeStackModel.hideAllEffCycle(),this.resetAllCubeStack(),this.nowIsGameOver=!1,this.gameOver(),this.gameOverNotClick=!0,this.allCanRotateNum=!1)},e.prototype.onStartNewGame=function(){this.initCubeStack(),this.blockMapModel.initCurCubeStack(this.node),this.blockMapModel.initCubeMapData(this.gameBgNode.node),this.getHigheScore(),this.buttomY=this.blockMapModel._allCubes[0][0].getWorldPosition().y,this.leftX=this.blockMapModel._allCubes[0][0].getWorldPosition().x,this.isRotate=!1,this.nowIsGameOver=!1,this.cubeStackModel._allCubeStack=this.allCubeStack,this.restartGame(),this.myScore=0,this.scoreTxt.string=this.myScore.toString();var t=JSON.parse(app.Utils.getStringFromLocal("Player_PlayGame")),e=JSON.parse(app.Utils.getStringFromLocal("save_Player_PlayGame")),o=this.getTimeSub(t);e&&""!=e?app.Utils.getIsLastDay(e)&&this.logEventModel.saveTimePlayMinute(o):this.logEventModel.saveTimePlayMinute(o)},e.prototype.onStartGameData=function(){this.onStartNewGame(),this.logEventModel.initData(this.rotate_num,this.gold_text,this.random_num);var t=app.Utils.getStringFromLocal("mainGame_MapData");if(""!=t&&t){var e=parseInt(JSON.parse(app.Utils.getStringFromLocal("nowScore")))||0;this.scoreTxt.string=e.toString(),this.myScore=e;for(var o=0;o<this._all_score_Arr.length;o++)this.myScore>this._all_score_Arr[o]&&(this._all_score_Arr[o]=0);var a=parseInt(app.Utils.getStringFromLocal("step_num"))||1;this.step_num=a,this.blockMapModel.initLastMapData(JSON.parse(t)),this.initLastGameCubeStack()}else app.LogEvent.showLogEventWithName("NewGame");this.setProgress()},e.prototype.initCubeStack=function(){this.allCubeStack=[],this.cubeStackBgNode.removeAllChildren();for(var t=app.res.loadPrefab(cfg.res.prefabs.cubeStack),e=0;e<cfg.const.createNum;e++){var o=cc.instantiate(t),a=o.getComponent(r.default);o.x=260*e-380,o.y=2,a.node.active=!0,this.allCubeStack.push(a),o.parent=this.cubeStackBgNode}this.cubeStackModel._allCubeStack=this.allCubeStack;var i=cc.instantiate(t).getComponent(r.default);this.cubeStackModel.saveCubeStack=i},e.prototype.initNextCubeStack=function(){this.next_node.removeAllChildren();var t=app.res.loadPrefab(cfg.res.prefabs.cubeStack),e=cc.instantiate(t),o=e.getComponent(r.default);e.parent=this.next_node,o.node.active=!0,e.x=0,e.y=0,this.cubeStackModel.nextCubeStack=o;var a=cc.instantiate(t),i=a.getComponent(r.default);a.parent=this.next_node,o.node.active=!0,a.x=300,a.y=0,this.cubeStackModel.temp_CubeStack=i},e.prototype.initLastGameCubeStack=function(){var t=app.Utils.getStringFromLocal("saveCubeStack");t=t&&""!=t?JSON.parse(t):{fileData:0,removeCubeStackArr:""},this.cubeStackModel.initLastGameCubeStack(t);var e=app.Utils.getStringFromLocal("saveCubeStackData");(e=e&&""!=e?JSON.parse(e):{id:-1,spriteFrame:null}).hasSaveCubeStack&&this.cubeStackModel.updateSaveCubeStack(e.id,e.spriteFrame)},e.prototype.restartGame=function(){this.blockMapModel.restartGame(),this.cubeStackModel.restartGame(),this._all_score_Arr=[100,200,500,700,1e3,1200,1500,2e3,2500,3e3],this.isTouching=!1,this.step_num=1,this.average_score=0,this.arr_average_score=[],this.isGameOver=!1,this.firstAddScoreHight=!1,this.showScore()},e.prototype.getHigheScore=function(){var t=app.Utils.getStringFromLocal("highScore")||0;this.myHighScore=t,this.highTxt.string=t},e.prototype.showScore=function(t){var e=this;void 0===t&&(t=!0);var o=null;if(null==o){var a=cc.scaleTo(.15,1.5,1.5),i=cc.scaleTo(.08,1,1);o=cc.sequence(a,i)}this.myScore>0&&t&&cc.tween(this.scoreTxt.node).then(o).start();var n=this.myHighScore;this.showHighAction=!1;var c=app.Utils.getStringFromLocal("First_Game_Complete"),r=!1;c&&""!=c||(r=!0),this.myScore>this.myHighScore&&(this.myHighScore=this.myScore,app.Utils.saveStringToLocal("highScore",this.myScore),cc.tween(this.highTxt.node).to(.1,{scale:1.2}).call(function(){e.highTxt.string=e.myHighScore.toString()}).start(),0==n||this.firstAddScoreHight||r||(this.showHighAction=!0),this.firstAddScoreHight=!0),this.scoreTxt.string=this.myScore.toString()},e.prototype.getGridIdx=function(t){this.buttomY=this.blockMapModel.allCubes[0][0].getWorldPosition().y,this.leftX=this.blockMapModel.allCubes[0][0].getWorldPosition().x;var e=(t.x-this.leftX)/cfg.const.cubeSpriteWidth,o=(t.y-this.buttomY)/cfg.const.cubeSpriteWidth;return e=Math.round(e),o=Math.round(o),cc.v2(e,o)},e.prototype.onMouseStartClick=function(t,e,o){var a=this;void 0===o&&(o=!0);var i=-1,n=null;o?(i=this.allCubeStack[t].cubeStack_id,n=this.allCubeStack[t].spriteFrame):(i=this.cubeStackModel.saveCubeStackData.cubeStack_id,n=this.cubeStackModel.saveCubeStackData.spriteFrame),this.blockMapModel.spriteFrame=n,e?this.isCanRotate=!0:(this.isCanRotate=!1,this.blockMapModel.curCubeStack.init(i,!0,n),this.blockMapModel._curPoint=this.getGridIdx(this.blockMapModel.curCubeStack.getFirstPos()),o?this.blockMapModel.curCubeStack.touchAction(this.node.convertToNodeSpaceAR(this.touchPos),!1,this.allCubeStack,t,3,!0):this.blockMapModel.curCubeStack.touchActionBySaveCubeStack(this.node.convertToNodeSpaceAR(this.touchPos),!1,this.cubeStackModel.saveCubeStackData,t,3,!0),cc.tween(this.node).delay(.03).call(function(){a.blockMapModel.curCubeStack.setCubeStackScalenormal()}).start(),app.audio.playSound("select"),this.blockMapModel.curCubeStack.node.active=!0)},e.prototype.onMouseDown=function(t){if(!this.isTouching&&!this.isAnimationTime&&!this.gameOverNotClick){this.touchPos=t.getLocation(),this.isTouchMuch=!1,this.savePos=this.node.convertToNodeSpaceAR(this.touchPos),this.sprite.node.stopAllActions(),this.sprite.node.active=!1;for(var e=0;e<cfg.const.createNum;e++){var o=this.allCubeStack[e].canClick,a=this.allCubeStack[e].node.active,i=this.allCubeStack[e].cubeStack_isActive;this.isRotate&&(i=!0,o=!0),this.isClickGrayBlock=!1;var n=this.allCubeStack[e].pointInCollider(this.touchPos);!this.cubeStackModel.hasSaveCubeStack&&0==o&&1==a&&n&&(o=!0,a=!0,i=!0,this.isClickGrayBlock=!0),o&&a&&i&&n&&(this.isTouching=!0,this.curMoveIdx=e,this.onMouseStartClick(e,this.allCubeStack[e].isRotateState,!0),this.tempCubeShader=null,this.cubeStackModel.hideAllEffCycle(),this.resetAllCubeStack())}this.clickSaveCubeStack=!1,window.cfg.const.hasOpenSaveCubeStack&&this.cubeStackModel.hasSaveCubeStack&&this.cubeStackModel.saveCubeStackData.pointInCollider(this.touchPos)&&(this.isTouching=!0,this.onMouseStartClick(-1,this.cubeStackModel.saveCubeStackData.isRotateState,!1),this.tempCubeShader=null,this.cubeStackModel.hideAllEffCycle(),this.curMoveIdx=-1,this.clickSaveCubeStack=!0)}},e.prototype.onMouseMove=function(t){if(this.isTouching){this.touchPos=t.getLocation();var e=this.node.convertToNodeSpaceAR(this.touchPos);if(this.clickSaveCubeStack){if(!this.isTouchMuch&&this.cubeStackModel.saveCubeStackData.isRotateState){if(Math.abs(e.x-this.savePos.x)<=5||Math.abs(e.y-this.savePos.y)<=5)return;this.onMouseStartClick(-1,!1,!1),this.isTouchMuch=!0}}else if(!this.isTouchMuch&&this.allCubeStack[this.curMoveIdx].isRotateState){if(Math.abs(e.x-this.savePos.x)<=5||Math.abs(e.y-this.savePos.y)<=5)return;this.onMouseStartClick(this.curMoveIdx,!1,!0),this.isTouchMuch=!0}this.blockMapModel.curCubeStack.setPosition(e),this.recordPoint=this.getGridIdx(this.blockMapModel.curCubeStack.getFirstPos()),this.blockMapModel.CubeColorNormal(),this.recordPoint!=this.blockMapModel._curPoint&&(this.blockMapModel.hideShader(),this.tempCubeShader&&this.blockMapModel.showHighAction(this.tempCubeShader),this.blockMapModel._curPoint=this.recordPoint,this.blockMapModel.cubeInGrid()),this.blockMapModel.curCubeStack.setCubeStackScale()}},e.prototype.onMouseUp=function(t){var e=this;if(1==this.isTouching){this.isTouching=!1,this.touchLocation=t.getLocation(),this.touchPos=t.getLocation();var o=this.node.convertToNodeSpaceAR(this.touchPos);if(this.clickSaveCubeStack){if(this.cubeStackModel.saveCubeStackData.isRotateState&&this.isCanRotate&&(Math.abs(o.x-this.savePos.x)<=5||Math.abs(o.y-this.savePos.y)<=5))return this.cubeStackModel.saveCubeStackData.node.active=!0,void this.actionRotate(-1)}else if(this.allCubeStack[this.curMoveIdx].isRotateState&&this.isCanRotate&&(Math.abs(o.x-this.savePos.x)<=5||Math.abs(o.y-this.savePos.y)<=5))return this.actionRotate(this.curMoveIdx),void(this.lastClickMoveIdx=this.curMoveIdx);if(this.node.stopAllActions(),this.blockMapModel.hideHighAction(),this.curCubeShader=this.blockMapModel.curCubeShader,this.isTouchMuch=!1,this.blockMapModel.curCubeStack=this.blockMapModel.curCubeStack,this.isRotate&&this.nowIsGameOver&&!this.isClickGrayBlock&&this.logEventModel.isFirstReviveRotate(),this.curCubeShader.length>0&&!this.isClickGrayBlock)this.blockMapModel.curCubeStack.setActive(!1),cfg.const.hasOpenSaveCubeStack&&this.clickSaveCubeStack?(this.cubeStackModel.removeSaveCubeStack(),this.isRotate&&this.cubeStackModel.saveCubeStackData.isRotateState&&this.rotateByIndex(-1)):(this.allCubeStack[this.curMoveIdx].setDeath(),this.cubeStackModel._lastGameRemoveCubeStack.push(this.curMoveIdx),this.isRotate&&this.allCubeStack[this.curMoveIdx].isRotateState&&this.rotateByIndex(this.curMoveIdx),--this.cubeStackModel.cubeStackNum),this.clickSaveCubeStack=!1,this.blockMapModel.onSetMoveUpData(),app.audio.playSound("place"),this.pushArrLength=this.curCubeShader.length,this.curCubeShader=new Array,this.isRotate=!1,this.nowIsGameOver=!1,this.blockMapModel.canRemoveCube(this.blockMapModel.removeArr,this,this.cubeStackModel.cubeStackNum)||(this.myScore+=this.pushArrLength,this.onGetProgressRuler(this.pushArrLength),this.showScore(),this.onPushCubeAddScore(this.pushArrLength)),this.cubeStackModel.cubeStackNum<=0&&this.resertCubeStack();else{var a=!1;window.cfg.const.hasOpenSaveCubeStack&&(this.getIsPushCubeStack()&&(this.cubeStackModel.hasSaveCubeStack?this.cubeStackModel.saveCubeStackData.setActive(!0):(this.cubeStackModel.updateSaveCubeStack(this.allCubeStack[this.curMoveIdx].cubeStack_id,this.allCubeStack[this.curMoveIdx].spriteFrame),--this.cubeStackModel.cubeStackNum,this.allCubeStack[this.curMoveIdx].setDeath(),this.blockMapModel.curCubeStack.setActive(!1),this.cubeStackModel._lastGameRemoveCubeStack.push(this.curMoveIdx),a=!0,this.cubeStackModel.cubeStackNum<=0&&this.resertCubeStack())),this.clickSaveCubeStack&&this.cubeStackModel.saveCubeStackData.setActive(!0));var i=null;this.clickSaveCubeStack?(i=this.cubeStackModel.saveCubeStackData.node.parent.convertToWorldSpaceAR(this.cubeStackModel.saveCubeStackData.node.position),i=this.node.convertToNodeSpaceAR(i)):(i=this.allCubeStack[this.curMoveIdx].node.parent.convertToWorldSpaceAR(this.allCubeStack[this.curMoveIdx].node.position),i=this.node.convertToNodeSpaceAR(i)),a||this.blockMapModel.curCubeStack.touchAction(i,!0,this.allCubeStack),this.isRotate||this.scheduleOnce(function(){e.onCheckGameOver()},.1)}}},e.prototype.getIsPushCubeStack=function(){var t=this.save_node.convertToWorldSpaceAR(cc.Vec2.ZERO),e=this.blockMapModel.curCubeStack.node.convertToWorldSpaceAR(cc.Vec2.ZERO),o=this.save_node.getContentSize(),a=cfg.const.bigSpriteWidth/2;return e.x<=t.x+o.width/2+a&&e.x>=t.x-o.width/2-a&&e.y<=t.y+o.height/2+a&&e.y>=t.y-o.height/2-a},e.prototype.getGameAITool=function(){var t=this.blockMapModel.deepcopy(this.blockMapModel.pointBlockArr),e=[].concat(this.blockMapModel.rowNum),o=[].concat(this.blockMapModel.columnNum),a=this.cubeStackModel.getAllCubeStackIdArr();return this.blockNewAiTools.initBlockData(t,e,o,a)},e.prototype.resertCubeStack=function(){var t=this;this.gameEffModel.hideEff_HighAction(),this.cubeStackModel._lastGameRemoveCubeStack=new Array,this.step_num++;var e=this.average_score/3;this.arr_average_score.push(e),this.average_score=0;var o=this.setFairbaseAIConfig();this.cubeStackModel._allCubeStack=this.allCubeStack,this.cubeStackModel.randomCubeStack(o),this.logEventModel.showLogWithStepNum();for(var a=[],i=this.allCubeStack[0].node.convertToWorldSpaceAR(cc.Vec2.ZERO),n=0;n<this.allCubeStack.length;n++)this.allCubeStack[n].setActive(!1),a[n]=this.allCubeStack[n].node.y,this.allCubeStack[n].node.y-=i.y-a[n];var c=function(e){r.allCubeStack[e].node.stopAllActions(),cc.tween(r.allCubeStack[e].node).call(function(){t.allCubeStack[e].setActive(!0)}).to(.15,{y:a[e]}).start()},r=this;for(n=0;n<this.allCubeStack.length;n++)c(n)},e.prototype.addScore=function(t,e){var o=t*(2*e+this.pushArrLength);this.average_score+=o,this.myScore+=o,this.onGetProgressRuler(o),this.blockMapModel.continNum>=2&&this.gameEffModel.startEff_Contine(this.blockMapModel.continNum,this.scoreNode),this.showAddScore(o),this.addScoreByAllPoint(this.myScore)},e.prototype.addScoreByAllPoint=function(t){for(var e="Score_",o=0;o<this._all_score_Arr.length;o++){var a=this._all_score_Arr[o];t>=a&&0!=a&&(e+=this._all_score_Arr[o],this._all_score_Arr[o]=0,app.LogEvent.showLogEventWithName(e))}},e.prototype.showAddScore=function(t){var e=this,o=this.addScoreText;t&&(o.string=t.toString()),this.blockMapModel.isShowBeautiful||(this.scoreNode.active=!0,this.blockMapModel.continNum>=2?(this.scoreNode.x=this.gameBgNode.node.x,this.scoreNode.y=this.gameBgNode.node.y,this.scoreNode.x-=70,this.scoreNode.stopAllActions(),cc.tween(this.scoreNode).to(.2,{scale:1.3}).to(.2,{scale:.8}).to(.2,{scale:1}).delay(.4).call(function(){e.scoreNode.active=!1;var t=e.scoreNode.getComponentsInChildren(cc.Sprite);for(var o in t)t[o].node.removeFromParent()}).start()):(this.scoreNode.position=this.node.convertToNodeSpaceAR(this.blockMapModel.scoreNodePosition),this.scoreNode.x-=30,this.scoreNode.stopAllActions(),cc.tween(this.scoreNode).to(.8,{scale:1,position:new cc.Vec3(this.scoreNode.x,this.scoreNode.y+60,100)}).call(function(){e.scoreNode.active=!1;var t=e.scoreNode.getComponentsInChildren(cc.Sprite);for(var o in t)t[o].node.removeFromParent()}).start()),this.showScore(!0))},e.prototype.onPushCubeAddScore=function(t){this.addScore_text.string=t.toString();var e=this.addScoreNode;e.active=!0,e.position=this.node.convertToNodeSpaceAR(this.blockMapModel.addScoreNodePosition),e.x<=-cfg.const.finalW/2?e.x=-cfg.const.finalW/2+10:e.x>=cfg.const.finalW/2&&(e.x=cfg.const.finalW/2),e.stopAllActions(),cc.tween(e).to(.6,{scale:.8,position:new cc.Vec3(e.position.x,e.position.y+60,100)}).call(function(){e.active=!1}).start()},e.prototype.setFairbaseAIConfig=function(){var t=app.Utils.getStringFromLocal("nowGameCount");t=t&&""!=t?parseInt(t):1;for(var e,o=!1,a=0;!o;)if(e=this.blockAiTools.getCubeStackAIRuler(t,this.myScore),this.cubeStackModel.initCubeStack(e),o=this.onCheckGame(),20==++a)return e;return e},e.prototype.gameOver=function(){this.scheduleOnce(function(){this.showCubeDeath()},.5),this._all_score_Arr=[100,200,500,700,1e3,1200,1500,2e3,2500,3e3],this.logEventModel.onEndGameByAllPoint(cfg.const.nowScore,this._all_score_Arr),this.logEventModel.setNextGameByScore(cfg.const.nowScore),this.isGameOver=!0,app.LogEvent.showLogEventWithName("PlayerGame_Over")},e.prototype.showCubeDeath=function(){for(var t=app.Utils.random(2,4),e=app.Utils.random(2,4),o=0,a=0,i=cc.color(153,153,153),n=0;n<cfg.const.gameRowNum;n++)for(var c=0;c<cfg.const.gameColNum;c++)1==this.blockMapModel.allCubes[c][n].isPutIn&&((o=(Math.abs(c-t)+Math.abs(n-e))*cfg.const.dieDelay)>a&&(a=o),this.blockMapModel.allCubes[c][n].die(i,o));this.scheduleOnce(function(){this.showDeath()},.2+a)},e.prototype.showDeath=function(){var t=this.myScore;this.AdManageTools.hideBanner(),this.blockMapModel.getAllPointAndSpriteFrame(),app.event.off(cfg.event.SHOW_EXITGAME),this.saveCubeStackArr(),this.saveByMap(),this.saveStepNum(),app.view.showRecordView(t),cfg.const.myHighScore=this.myHighScore,cfg.const.nowScore=this.myScore,this.logEventModel.saveScoreByMonth(cfg.const.nowScore,cfg.const.myHighScore)},e.prototype.startEff_Beautiful=function(){var t=this;this.showHighAction||(this.scoreNode.position=this.gameBgNode.node.position,this.gameEffModel.startEff_Beautiful(this.blockMapModel.all_continNum,this.scoreNode),this.scoreNode.active=!0,this.scoreNode.x=this.gameBgNode.node.x,this.scoreNode.y=this.gameBgNode.node.y,this.scoreNode.x-=70,this.scoreNode.stopAllActions(),cc.tween(this.scoreNode).to(.2,{scale:1.3}).to(.2,{scale:.8}).to(.2,{scale:1}).delay(.4).call(function(){t.scoreNode.active=!1;var e=t.scoreNode.getComponentsInChildren(cc.Sprite);for(var o in e)e[o].node.removeFromParent()}).start())},e.prototype.getColorAction=function(){for(var t=0;t<this.allSpriteFrameByAction.length;t++){var e=this.allSpriteFrameByAction[t];if(e.spriteFrame==this.blockMapModel.spriteFrame)return e.action}},e.prototype.showNewAction=function(t){var e=this.node.convertToNodeSpaceAR(t),o="N2Eff_debris_N1_"+this.getColorAction(),a=this.gameEffModel.getEffNode("eff_Node",o,this.node,0,0);this.gameEffModel.showRemoveEffNode(a,e.x,e.y)},e.prototype.actionByNode=function(){var t=this;if(0!=cfg.const.shakeVolume){var e=this.node.x,o=this.node.y,a=cc.repeatForever(cc.sequence(cc.moveTo(.018,cc.v2(e+5,o+5)),cc.moveTo(.018,cc.v2(e+1,o+1))));this.node.stopAllActions(),cc.tween(this.node).then(a).start(),setTimeout(function(){t.node.stopAllActions(),t.node.x=e,t.node.y=o},400)}},e.prototype.onBtnNoClick=function(){app.audio.playSound("button")},e.prototype.onBtnYesClick=function(){app.audio.playSound("button"),this.AdManageTools.onBackPressed()},e.prototype.onChangeLanguage=function(){for(var t=["UI-Game_2","UI-Game_1"],e=0;e<this.tranLabel.length;e++){var o=app.tranLanguage.loadStrByKey(t[e]);o&&(this.tranLabel[e].getComponent(cc.Label).string=o)}},n([v(cc.Sprite)],e.prototype,"gameBgNode",void 0),n([v(cc.Node)],e.prototype,"cubeStackBgNode",void 0),n([v(cc.Node)],e.prototype,"scoreNode",void 0),n([v(cc.Label)],e.prototype,"scoreTxt",void 0),n([v(cc.Label)],e.prototype,"highTxt",void 0),n([v(cc.Label)],e.prototype,"addScoreText",void 0),n([v(cc.Node)],e.prototype,"bgMask",void 0),n([v(cc.Node)],e.prototype,"save_node",void 0),n([v(cc.Button)],e.prototype,"btn_rotate",void 0),n([v(cc.Node)],e.prototype,"addScoreNode",void 0),n([v(cc.Label)],e.prototype,"addScore_text",void 0),n([v(cc.Node)],e.prototype,"rotate_num",void 0),n([v(cc.Node)],e.prototype,"random_num",void 0),n([v(cc.ProgressBar)],e.prototype,"sp_progress",void 0),n([v(cc.Node)],e.prototype,"gold_text",void 0),n([v([cc.Label])],e.prototype,"tranLabel",void 0),n([v(cc.Node)],e.prototype,"next_node",void 0),n([v(cc.Node)],e.prototype,"rotateNode",void 0),n([y],e)}(cc.Component);o.default=_,cc._RF.pop()},{"../../components/InitCpn":"InitCpn","../prefabs/CubeStack":"CubeStack","../utils/AdManageTools":"AdManageTools","../utils/BlockPuzzleCubeStackTools":"BlockPuzzleCubeStackTools","../utils/BlockPuzzleEffTools":"BlockPuzzleEffTools","../utils/BlockPuzzleLogEvent":"BlockPuzzleLogEvent","../utils/BlockPuzzleMapPushTools":"BlockPuzzleMapPushTools","../utils/BlockPuzzleMapTools":"BlockPuzzleMapTools","../utils/BlockPuzzleNewAITools":"BlockPuzzleNewAITools","../utils/BlockPuzzleRulerTools":"BlockPuzzleRulerTools","../utils/SDKTools":"SDKTools","../utils/newBlockStyleAITools":"newBlockStyleAITools"}],mainSettingView:[function(t,e,o){"use strict";cc._RF.push(e,"5b4d2l2jEpD7Y/zOZL2jC6C","mainSettingView");var a,i=this&&this.__extends||(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,a){var i,n=arguments.length,c=n<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,a);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(c=(n<3?i(c):n>3?i(e,o,c):i(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../utils/AdManageTools"),r=cc._decorator,s=r.ccclass,l=r.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.action_node=null,e.label_title=null,e.btn_sound=null,e.btn_sound_Off=null,e.img_sound_on=null,e.img_sound_off=null,e.btn_music=null,e.btn_music_Off=null,e.tranLabel=new Array,e}return i(e,t),e.prototype.onLoad=function(){this.saveAllNameArr=[],this.AdManageTools=new c.default,app.event.on(cfg.event.CHANGE_LANGUAGE,this.onChangeLanguage,this),app.event.on(cfg.event.END_SETTING,this.onCloseView,this),app.event.on(cfg.event.SHOW_EXITGAME,this.onCloseView,this),app.event.on(cfg.event.GOTO_SETTING,this.onGotoSetting,this),this.onChangeLanguage(),this.initSoundVolume(),this.initMusicValue(),app.Utils.onViewAction(this.action_node)},e.prototype.onGotoSetting=function(){app.event.on(cfg.event.SHOW_EXITGAME,this.onCloseView,this)},e.prototype.initMusicValue=function(){1==cfg.const.musicVolume?(this.btn_music.node.active=!0,this.btn_music_Off.node.active=!1):(this.btn_music.node.active=!1,this.btn_music_Off.node.active=!0,app.audio.stopSound())},e.prototype.onSoundClick=function(){app.audio.playSound("button"),cfg.const.soundVolume=1==cfg.const.soundVolume?0:1,this.initSoundVolume(),app.Utils.saveStringToLocal("otherVolume",cfg.const.soundVolume)},e.prototype.onMusicClick=function(){app.audio.playSound("button"),cfg.const.musicVolume=1==cfg.const.musicVolume?0:1,this.initMusicValue(),app.Utils.saveStringToLocal("otherMusic",cfg.const.musicVolume)},e.prototype.onLanguageClick=function(){app.audio.playSound("button"),app.view.showLanguageView()},e.prototype.initSoundVolume=function(){1==cfg.const.soundVolume?(this.btn_sound.node.active=!0,this.btn_sound_Off.node.active=!1,this.img_sound_on.node.active=!0,this.img_sound_off.node.active=!1):(this.btn_sound.node.active=!1,this.btn_sound_Off.node.active=!0,this.img_sound_on.node.active=!1,this.img_sound_off.node.active=!0,app.audio.stopSound())},e.prototype.onCloseView=function(){app.audio.playSound("button"),this.isTutorial?app.view.showTutorialsView():(app.event.dispatch(cfg.event.SHOW_BANNER),this.isMainView?app.event.dispatch(cfg.event.GOTO_MAINVIEW):app.event.dispatch(cfg.event.GOTO_CHALLENGEVIEW)),app.event.off(cfg.event.SHOW_EXITGAME),this.node.removeFromParent()},e.prototype.initTranLabelByPreb=function(){this.tranLabel=[],this.tranLabel.push(this.node.getChildByName("title").getComponent(cc.Label))},e.prototype.onChangeLanguage=function(){for(var t=["UI-Menu_6","UI-Settings_4","UI-Settings_1"],e=0;e<this.tranLabel.length;e++){var o=app.tranLanguage.loadStrByKey(t[e]);o&&(this.tranLabel[e].getComponent(cc.Label).string=o)}},n([l(cc.Node)],e.prototype,"action_node",void 0),n([l(cc.Label)],e.prototype,"label_title",void 0),n([l(cc.Button)],e.prototype,"btn_sound",void 0),n([l(cc.Button)],e.prototype,"btn_sound_Off",void 0),n([l(cc.Sprite)],e.prototype,"img_sound_on",void 0),n([l(cc.Sprite)],e.prototype,"img_sound_off",void 0),n([l(cc.Button)],e.prototype,"btn_music",void 0),n([l(cc.Button)],e.prototype,"btn_music_Off",void 0),n([l([cc.Label])],e.prototype,"tranLabel",void 0),n([s],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../utils/AdManageTools":"AdManageTools"}],newBlockStyleAITools:[function(t,e,o){"use strict";cc._RF.push(e,"061f2ugBhlKeIeaNfTgSiVd","newBlockStyleAITools"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function t(){this.cubeType_index_1=new Array,this.cubeType_index_2=new Array,this.cubeType_index_3=new Array,this.cubeType_index_4=new Array,this.nowScore=0,this.game_difficulty=null}return t.prototype.initCubeStackType=function(){this.cubeType_index_1=new Array,this.cubeType_index_2=new Array,this.cubeType_index_3=new Array,this.cubeType_index_4=new Array,this.simpleBlocks=["blockStyle1","blockStyle2","blockStyle3","blockStyle6","blockStyle7","blockStyle12","blockStyle13","blockStyle14","blockStyle15"],this.mediumBlocks=["blockStyle4","blockStyle25","blockStyle8","blockStyle26","blockStyle16","blockStyle17","blockStyle18","blockStyle19","blockStyle20","blockStyle21","blockStyle24","blockStyle27","blockStyle40","blockStyle41","blockStyle36","blockStyle38","blockStyle10"],this.hardBlocks=["blockStyle11","blockStyle5","blockStyle9","blockStyle22","blockStyle23","blockStyle30","blockStyle28","blockStyle29","blockStyle31","blockStyle32","blockStyle33","blockStyle34","blockStyle35","blockStyle37","blockStyle39","blockStyle42","blockStyle43"],this.arrLevel=[600,100,1600];for(var t=0;t<=46;t++){var e=app.map.getMapData(t);e.blockStyle&&this["cubeType_index_"+e.cubeType].push(t)}},t.prototype.getBlockIdByStyle=function(t){for(var e=0;e<=46;e++){var o=app.map.getMapData(e);if(o.blockStyle&&o.blockStyle==t)return o.id}},t.prototype.getCubeStackAIRuler=function(t,e){var o=[];return this.nowScore=e,(o=1==t?e<this.arrLevel[0]?this.getAllRandomCubeStack(.5,.4,.1):e<this.arrLevel[1]?this.getAllRandomCubeStack(.4,.4,.2):e<this.arrLevel[2]?this.getAllRandomCubeStack(.3,.4,.3):this.getAllRandomCubeStack(.3,.35,.35):2==t?e<this.arrLevel[0]?this.getAllRandomCubeStack(.4,.4,.2):e<this.arrLevel[1]?this.getAllRandomCubeStack(.35,.4,.25):e<this.arrLevel[2]?this.getAllRandomCubeStack(.35,.35,.3):this.getAllRandomCubeStack(.35,.3,.35):e<this.arrLevel[0]?this.getAllRandomCubeStack(.3,.4,.3):e<this.arrLevel[1]?this.getAllRandomCubeStack(.3,.45,.25):e<this.arrLevel[2]?this.getAllRandomCubeStack(.35,.4,.25):this.getAllRandomCubeStack(.35,.35,.3)).push(0),o},t.prototype.getAllRandomCubeStack=function(t,e){var o=[0,0,0];t*=100,e*=100,o=[];for(var a=0;a<3;a++){var i=app.Utils.random(0,99),n=t,c=e,r=0;if(i<n){var s=app.Utils.random(0,this.simpleBlocks.length-1);r=this.getBlockIdByStyle(this.simpleBlocks[s]),o.push(r)}else i<n+c?(s=app.Utils.random(0,this.mediumBlocks.length-1),r=this.getBlockIdByStyle(this.mediumBlocks[s]),o.push(r)):(s=app.Utils.random(0,this.hardBlocks.length-1),r=this.getBlockIdByStyle(this.hardBlocks[s]),o.push(r))}return o},t}();o.default=a,cc._RF.pop()},{}],progressData:[function(t,e,o){"use strict";cc._RF.push(e,"bc231JaCJJLsIb0AV6KHl/P","progressData"),Object.defineProperty(o,"__esModule",{value:!0});var a=function(){function t(){this.arrProgressData=[{score:0,target:800,rewards:{coin:5,prop:1}},{score:1e4,target:1200,rewards:{coin:10,prop:1}},{score:15e3,target:1500,rewards:{coin:15,prop:2}},{score:2e4,target:2e3,rewards:{coin:20,prop:2}},{score:3e4,target:2500,rewards:{coin:25,prop:3}}]}return t.prototype.getNowTargetByScore=function(t){for(var e=0,o=0;o<this.arrProgressData.length;o++)t>=this.arrProgressData[o].score&&(e=this.arrProgressData[o].target);return e},t.prototype.getSubByScore=function(t,e){for(var o=0;o<this.arrProgressData.length;o++)if(e==this.arrProgressData[o].target)return this.arrProgressData[o].score-t},t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.instance=null,t}();o.default=a,cc._RF.pop()},{}]},{},["GDADMgr","AudioCpn","ConstCfg","DailyChallengeTools","EventCpn","FacebookCpn","InitCpn","LogEventCpn","MapTypeCpn","PlatformCpn","ResCpn","StorageCpn","TranLanguageCpn","TutorialsMapCpn","Utils","ViewCpn","progressData","EventCfg","MapTypeCfg","ResCfg","Lib","CubeModel","CubeStackModel","ChallengeRecordView","ChallengeView","Cube","CubeStack","DailyView","LanguageView","RankView","SettingView","SmallView","StatisticsView","StoreView","Toast","TutorialsView","mainSettingView","LoadingScene","MainScene","mainGameScene","AdManageTools","BlockPuzzleAITools","BlockPuzzleCubeStackTools","BlockPuzzleEffTools","BlockPuzzleLogEvent","BlockPuzzleMapPushTools","BlockPuzzleMapTools","BlockPuzzleNewAITools","BlockPuzzleRulerTools","SDKTools","newBlockStyleAITools"]);