var _control,_sonidos,currentAngle=0,trackWidth=1.04,radiusBowlingBall=.106,trackLimitZ=8.95,trackBackLimitZ=9.2,bowlingBallPosY=.218,bowlingBallDefaultPositionY=.098,bowlingBallPosX=0,bowlingBallPosZ=9,ballMaximunHeight=.45,factorSpeed=1,trowBallState=0,power=0,pinsZcamera=-17.22,trackEndZ=-25,shiftX=0,shiftY=0,gutterX=.647,gutterY=-.066,swipeTolerance=50,axisX=0,bestScore=0,throwNumber=0,bolaYenPista=.218,corrimientoPino=.077,trackHole=-6.337,pinOverTrack=.165,waitToEnd=400,entry=0,onGutter=!1,specialEntry=0,finalEntry=9,theFinal=!1,gameTime=150,timeEnd=!1,colorParpadeo="#ff0000",colorNormal="#ffffff",colorAceiteNormal="#00DD09",colorAceiteCritico="#fffd02",pause=!1,spin=0,aceite=50,speedSpinConst=1.2,speedSpin=1.2,hitBox=.06,_globalScore=0,muteSound=0,skipMenu=!1,muteSoundAux=0,currentPinsFallen=0,arrayScores=[],oilLevel=0,interactiveTutorial=!0,tutorialPhase=-1,currentGamePlay="",calidad="alta",_fps=null,idiomas=["EN","GER","DUTCH"],posiblesIdiomas=["af","sq","ar-SA","ar-IQ","ar-EG","ar-LY","ar-DZ","ar-MA","ar-TN","ar-OM","ar-YE","ar-SY","ar-JO","ar-LB","ar-KW","ar-AE","ar-BH","ar-QA","eu","bg","be","ca","zh-TW","zh-CN","zh-HK","zh-SG","hr","cs","da","nl","nl-BE","en","en-US","en-EG","en-AU","en-GB","en-CA","en-NZ","en-IE","en-ZA","en-JM","en-BZ","en-TT","et","fo","fa","fi","fr","fr-BE","fr-CA","fr-CH","fr-LU","gd","gd-IE","de","de-CH","de-AT","de-LU","de-LI","el","he","hi","hu","is","id","it","it-CH","ja","ko","lv","lt","mk","mt","no","pl","pt-BR","pt","rm","ro","ro-MO","ru","ru-MI","sz","sr","sk","sl","sb","es","es-AR","es-GT","es-CR","es-PA","es-DO","es-MX","es-VE","es-CO","es-PE","es-EC","es-CL","es-UY","es-PY","es-BO","es-SV","es-HN","es-NI","es-PR","sx","sv","sv-FI","th","ts","tn","tr","uk","ur","ve","vi","xh","ji","zu"];function iniVars(){hitBox=.06,spin=0,onGutter=!1,currentAngle=0,trackWidth=.53,radiusBowlingBall=.106,trackLimitZ=4.472,trackBackLimitZ=4.72,bowlingBallPosY=.242,bowlingBallPosX=0,bowlingBallPosZ=4.54,ballMaximunHeight=.415,bolaYenPista=.222,factorSpeed=1,trowBallState=0,power=0,pinsZcamera=-5.723,trackEndZ=-6.3,shiftX=0,shiftY=0,gutterX=.673,gutterY=.018,swipeTolerance=18,altura=0,extraVolante=0}function creaAceite(e){var o=2*speedSpinConst;speedSpin=(0-o)/100*((aceite=e)-0)+o}function existsInArray(e,o){for(var n=0;n<o.length;n++)if(o[n]==e)return!0;return!1}function playAnim(e,o,n,t,a,r){null!=n&&(e.animation.speed=n),e.animation.loop=t;var i=e.animation.assets[o],s=e.animation.animationsIndex[i];e.animation.play(s),a&&setTimeout(function(){e.enabled=!1},r)}function createEvents(e,o,n,t){var a=[];switch(null!=e.element&&(e=e.element),n){case 1:a[0]="touchstart",a[1]="mousedown";break;case 2:a[0]="touchend",a[1]="mouseup";break;case 3:a[0]="touchmove",a[1]="mousemove"}o?isMobile.any()?e.on(a[0],t):e.on(a[1],t):e.off()}function setPause(e){e?(pause=!0,muteSoundAux=muteSound,muteSound=1,null!=_sonidos&&(_sonidos.slot("musicIngame").volume=0,_sonidos.slot("musicaMenu").volume=0)):(pause=!1,0==(muteSound=muteSoundAux)&&null!=_sonidos&&(_sonidos.slot("musicIngame").volume=.37,_sonidos.slot("musicaMenu").volume=.65))}function setGameTime(e){gameTime=e/1e3}function isset(e){return void 0!==e}function saveVars(e,o){if(!supports_html5_storage())return!1;localStorage.setItem(o,e+"")}function loadVars(e){return supports_html5_storage()?localStorage.getItem(e):0}function existeVars(e){return!!supports_html5_storage()&&localStorage.hasOwnProperty(e)}function getAllVars(){existeVars("bestScore")&&(bestScore=parseInt(loadVars("bestScore")))}function onPause(){}function onResume(){}function mute(e){muteSound=e,muteMusic()}function playSound(e){0==muteSound&&_sonidos.play(e)}function muteMusic(){1==muteSound?(_sonidos.slot("musicIngame").volume=0,_sonidos.slot("musicaMenu").volume=0):0==muteSound&&(_sonidos.slot("musicIngame").volume=.37,_sonidos.slot("musicaMenu").volume=.65)}function creaOilFactorArray(){for(var e=0;e<100;e++){oilFactorArray[e]=[],console.log("oilFactorArray["+e+"]=[]");for(var o=0;o<11;o++)oilFactorArray[e][o]=Math.floor(99*Math.random())+1,console.log("oilFactorArray["+e+"]["+o+"]="+oilFactorArray[e][o]+";")}}function vibrate(e){window.navigator&&window.navigator.vibrate&&navigator.vibrate(e)}String.prototype.toHHMMSS=function(){var e=parseInt(this,10),o=Math.floor(e/3600),n=Math.floor((e-3600*o)/60),t=e-3600*o-60*n;return o<10&&(o="0"+o),n<10&&(n="0"+n),t<10&&(t="0"+t),n+":"+t},document.addEventListener("pause",onPause,!1),document.addEventListener("resume",onResume,!1),window.onblur=function(){},window.onclick=function(){},window.onfocus=function(){};var lenguajeManual=!0,lenguajeEl=0,isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/WPDesktop/i)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()}};function supports_html5_storage(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}var AsignaGlobal=pc.createScript("asignaGlobal");AsignaGlobal.attributes.add("tipo",{type:"string",title:"tipo"}),AsignaGlobal.prototype.initialize=function(){switch(this.tipo){case"sonido":_sonidos=this.entity.sound}};pc.extend(pc,function(){var t=function(t){this._app=t,this._tweens=[],this._add=[]};t.prototype={add:function(t){return this._add.push(t),t},update:function(t){for(var i=0,e=this._tweens.length;i<e;)this._tweens[i].update(t)?i++:(this._tweens.splice(i,1),e--);this._add.length&&(this._tweens=this._tweens.concat(this._add),this._add.length=0)}};var i=function(t,i,e){pc.events.attach(this),this.manager=i,e&&(this.entity=null),this.time=0,this.cambioSpeed=!1,this.complete=!1,this.playing=!1,this.stopped=!0,this.pending=!1,this.target=t,this.duration=0,this._currentDelay=0,this.timeScale=1,this._reverse=!1,this._delay=0,this._yoyo=!1,this._count=0,this._numRepeats=0,this._repeatDelay=0,this._from=!1,this._slerp=!1,this._fromQuat=new pc.Quat,this._toQuat=new pc.Quat,this._quat=new pc.Quat,this.easing=pc.EASE_LINEAR,this._sv={},this._ev={}};i.prototype={to:function(t,i,e,s,n,r){return t instanceof pc.Vec3?this._properties={x:t.x,y:t.y,z:t.z}:t instanceof pc.Color?(this._properties={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(this._properties.a=t.a)):this._properties=t,this.duration=i,e&&(this.easing=e),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this},from:function(t,i,e,s,n,r){return t instanceof pc.Vec3?this._properties={x:t.x,y:t.y,z:t.z}:t instanceof pc.Color?(this._properties={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(this._properties.a=t.a)):this._properties=t,this.duration=i,e&&(this.easing=e),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this._from=!0,this},rotate:function(t,i,e,s,n,r){return t instanceof pc.Quat?this._properties={x:t.x,y:t.y,z:t.z,w:t.w}:t instanceof pc.Vec3?this._properties={x:t.x,y:t.y,z:t.z}:t instanceof pc.Color?(this._properties={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(this._properties.a=t.a)):this._properties=t,this.duration=i,e&&(this.easing=e),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this._slerp=!0,this},start:function(){var t,i,e,s;if(this.playing=!0,this.complete=!1,this.stopped=!1,this._count=0,this.pending=this._delay>0,this._reverse&&!this.pending?this.time=this.duration:this.time=0,this._from){for(t in this._properties)this._sv[t]=this._properties[t],this._ev[t]=this.target[t];this._slerp&&(this._toQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,s=void 0!==this._properties.z?this._properties.z:this.target.z,this._fromQuat.setFromEulerAngles(i,e,s))}else{for(t in this._properties)this._sv[t]=this.target[t],this._ev[t]=this._properties[t];this._slerp&&(this._fromQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,s=void 0!==this._properties.z?this._properties.z:this.target.z,this._toQuat.setFromEulerAngles(i,e,s))}return this._currentDelay=this._delay,this.manager.add(this),this},pause:function(){this.playing=!1},resume:function(){this.playing=!0},stop:function(){this.playing=!1,this.stopped=!0},delay:function(t){return this._delay=t,this.pending=!0,this},repeat:function(t,i){return this._count=0,this._numRepeats=t,this._repeatDelay=i||0,this},loop:function(t){return t?(this._count=0,this._numRepeats=1/0):this._numRepeats=0,this},yoyo:function(t){return this._yoyo=t,this},reverse:function(){return this._reverse=!this._reverse,this},chain:function(){for(var t=arguments.length;t--;)t>0?arguments[t-1]._chained=arguments[t]:this._chained=arguments[t];return this},update:function(t){if(this.stopped)return!1;if(!this.playing)return!0;if(!this._reverse||this.pending?this.time+=t*this.timeScale:this.time-=t*this.timeScale,this.pending){if(!(this.time>this._currentDelay))return!0;this._reverse?this.time=this.duration-(this.time-this._currentDelay):this.time=this.time-this._currentDelay,this.pending=!1}var i=0;(!this._reverse&&this.time>this.duration||this._reverse&&this.time<0)&&(this._count++,this.complete=!0,this.playing=!1,this._reverse?(i=this.duration-this.time,this.time=0):(i=this.time-this.duration,this.time=this.duration));var e,s,n=this.time/this.duration,r=this.easing(n);for(var h in this._properties)e=this._sv[h],s=this._ev[h],this.target[h]=e+(s-e)*r;if(this._slerp&&this._quat.slerp(this._fromQuat,this._toQuat,r),this.entity&&(this.entity._dirtifyLocal(!0),this.element&&this.entity.element&&(this.entity.element[this.element]=this.target),this._slerp&&this.entity.setLocalRotation(this._quat)),this.fire("update",t),this.complete){var a=this._repeat(i);return a?this.fire("loop"):(this.fire("complete",i),this._chained&&this._chained.start()),a}return!0},_repeat:function(t){if(this._count<this._numRepeats){if(this._reverse?this.time=this.duration-t:this.time=t,this.complete=!1,this.playing=!0,this._currentDelay=this._repeatDelay,this.pending=!0,this._yoyo){for(var i in this._properties)tmp=this._sv[i],this._sv[i]=this._ev[i],this._ev[i]=tmp;this._slerp&&(this._quat.copy(this._fromQuat),this._fromQuat.copy(this._toQuat),this._toQuat.copy(this._quat))}return!0}return!1}};var e=function(t){return 1-s(1-t)},s=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375};return{TweenManager:t,Tween:i,Linear:function(t){return t},QuadraticIn:function(t){return t*t},QuadraticOut:function(t){return t*(2-t)},QuadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},CubicIn:function(t){return t*t*t},CubicOut:function(t){return--t*t*t+1},CubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},QuarticIn:function(t){return t*t*t*t},QuarticOut:function(t){return 1- --t*t*t*t},QuarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},QuinticIn:function(t){return t*t*t*t*t},QuinticOut:function(t){return--t*t*t*t*t+1},QuinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},SineIn:function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)},SineOut:function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)},SineInOut:function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))},ExponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},ExponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},ExponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},CircularIn:function(t){return 1-Math.sqrt(1-t*t)},CircularOut:function(t){return Math.sqrt(1- --t*t)},CircularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},BackIn:function(t){return t*t*(2.70158*t-1.70158)},BackOut:function(t){return--t*t*(2.70158*t+1.70158)+1},BackInOut:function(t){var i=2.5949095;return(t*=2)<1?t*t*((i+1)*t-i)*.5:.5*((t-=2)*t*((i+1)*t+i)+2)},BounceIn:e,BounceOut:s,BounceInOut:function(t){return t<.5?.5*e(2*t):.5*s(2*t-1)+.5},ElasticIn:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/.4))},ElasticOut:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-i)*(2*Math.PI)/.4)+1)},ElasticInOut:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/.4)*-.5:e*Math.pow(2,-10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/.4)*.5+1)}}}()),function(){var t=pc.Application.getApplication();t&&(t._tweenManager=new pc.TweenManager(t),t.on("update",function(i){t._tweenManager.update(i)}),pc.Application.prototype.tween=function(t){return new pc.Tween(t,this._tweenManager)},pc.Entity.prototype.tween=function(t,i){var e=this._app.tween(t);return e.entity=this,this.on("destroy",function(){e.stop()}),i&&i.element&&(e.element=i.element),e})}();var PinPhysics=pc.createScript("pinPhysics");PinPhysics.attributes.add("index",{type:"number",default:1}),PinPhysics.attributes.add("widthX",{type:"number",default:.06}),PinPhysics.attributes.add("widthZ",{type:"number",default:.06}),PinPhysics.attributes.add("heightY",{type:"number",default:.375}),PinPhysics.attributes.add("pinHitted",{type:"number",default:0}),PinPhysics.attributes.add("power",{type:"number",default:0}),PinPhysics.attributes.add("angle",{type:"number",default:0}),PinPhysics.attributes.add("currentAnimation",{type:"string",default:""}),PinPhysics.attributes.add("visualPin",{type:"entity",title:"visualPin"}),PinPhysics.attributes.add("reflectPin",{type:"entity",title:"reflectPin"}),PinPhysics.attributes.add("pinAnimation",{type:"entity",title:"pinAnimation"}),PinPhysics.prototype.onCollisionStart=function(i){if(i.other.rigidbody){if("pin"==i.other.name&&0==this.pinHitted)if(this.entity.rigidbody.linearVelocity.length()>.184){this.pinHitted=2;this.entity.getPosition();var t=Math.floor(2*Math.random());playAnim(this.visualPin,1+t,1,!1),playAnim(this.reflectPin,1+t,1,!1);this.entity.getPosition();var e=Math.ceil(360*Math.random());this.visualPin.setLocalEulerAngles(0,e,0),this.reflectPin.setLocalEulerAngles(180,e+180,0),this.currentAnimation=1+t,playSound("pinos1"),vibrate(200)}else this.entity.rigidbody.linearVelocity=pc.Vec3.ZERO,this.entity.rigidbody.angularVelocity=pc.Vec3.ZERO,playSound("caePino");"floor"==i.other.name&&(this.onGround||(playSound("caePino"),this.onGround=!0,this.removePhysicsFlag||(this.removePhysics(),this.removePhysicsFlag=!0))),"endWall"==i.other.name&&(this.entity.rigidbody.linearVelocity=pc.Vec3.ZERO,this.entity.rigidbody.angularVelocity=pc.Vec3.ZERO),"physicsBall"==i.other.name&&0==this.pinHitted&&this.collision()}},PinPhysics.prototype.onCollisionEnd=function(i){null!=i.other&&i.other.rigidbody&&"floor"==i.other.name&&this.pinHitted>0&&clearInterval(this.physicsInterval)},PinPhysics.prototype.initialize=function(){this.iniFix=!1;var i=this.visualPin.model.model.getGraph();this.bone=i.findByName("Dummy001"),this.onGround=!1,this.removePhysicsFlag=!1,this.tween=null,this.onTween=!1,this.physicsInterval=null,this.arrayHittedPins=[],this.entity.collision.on("collisionstart",this.onCollisionStart,this),this.pins=this.entity.parent;var t=this.entity.getPosition();this.pinSimulationPossitionInitial=new pc.Vec3(t.x,t.y,t.z);var e=this.entity.getLocalEulerAngles();this.rotPinSimIni=new pc.Vec3(e.x,e.y,e.z),t=this.visualPin.getPosition(),this.pinPossitionInitial=new pc.Vec3(t.x,t.y,t.z),e=this.visualPin.getLocalEulerAngles(),this.pinRotInitial=new pc.Vec3(e.x,e.y,e.z),t=this.reflectPin.getPosition(),this.pinReflectPossitionInitial=new pc.Vec3(t.x,t.y,t.z),e=this.reflectPin.getLocalEulerAngles(),this.pinRotReflectInitial=new pc.Vec3(e.x,e.y,e.z),this.coliderChanged=!1,this.currentAnimation="nada"},PinPhysics.prototype.reset=function(){null!=this.tween&&this.tween.stop(),this.iniFix=!1,this.onGround=!1,this.tween=null,this.onTween=!1,this.turnON(),playAnim(this.visualPin,0,1,!1),playAnim(this.reflectPin,0,1,!1),this.entity.rigidbody.enabled=!0,this.entity.rigidbody.teleport(this.pinSimulationPossitionInitial.x,this.pinSimulationPossitionInitial.y,this.pinSimulationPossitionInitial.z,this.rotPinSimIni.x,this.rotPinSimIni.y,this.rotPinSimIni.z),this.visualPin.setLocalEulerAngles(this.pinRotInitial.x,this.pinRotInitial.y,this.pinRotInitial.z),this.reflectPin.setLocalEulerAngles(this.pinRotReflectInitial.x,this.pinRotReflectInitial.y,this.pinRotReflectInitial.z),this.visualPin.setPosition(this.pinPossitionInitial.x,this.pinPossitionInitial.y,this.pinPossitionInitial.z),this.reflectPin.setPosition(this.pinReflectPossitionInitial.x,this.pinReflectPossitionInitial.y,this.pinReflectPossitionInitial.z),this.pinHitted=0,this.arrayHittedPins=[],this.currentAnimation="nada",this.entity.rigidbody.linearVelocity=pc.Vec3.ZERO,this.entity.rigidbody.angularVelocity=pc.Vec3.ZERO,this.removePhysicsFlag=!1,this.coliderChanged=!1},PinPhysics.prototype.update=function(i){if(_control.finalCamera.enabled){this.removePhysicsFlag||(setTimeout(this.removePhysics.bind(this),800),this.removePhysicsFlag=!0);var t=this.entity.getPosition(),e=this.visualPin.getPosition(),n=this.reflectPin.getPosition();if(e.z<trackHole||e.x<-trackWidth/2+.01||e.x>trackWidth/2-.01){if(this.reflectPin.enabled=!1,!this.onTween){if(0==this.pinHitted){this.pinHitted=2,playSound("pinos1");var s=Math.floor(2*Math.random());playAnim(this.visualPin,1+s,1,!1),playAnim(this.reflectPin,1+s,1,!1)}this.entity.rigidbody.enabled=!1;var a=this.visualPin.getLocalPosition(),r=new pc.Vec3(a.x,a.y-.23,a.z-.35);this.tween=this.visualPin.tween(this.visualPin.getLocalPosition()).to(r,.2,pc.Linear).on("complete",this.endTween.bind(this)),this.tween.start(),this.onTween=!0}}else if(this.visualPin.setPosition(t.x,e.y,t.z),this.reflectPin.setPosition(t.x,n.y,t.z),this.pinPossitionInitial.clone().sub(this.visualPin.getPosition()).length()>=.045&&0==this.pinHitted)if(this.pinHitted=2,this.entity.rigidbody.linearVelocity.length()>1.75){s=Math.floor(3*Math.random());playAnim(this.visualPin,3+s,1,!1),playAnim(this.reflectPin,3+s,1,!1),this.currentAnimation=3+s,playSound("pinos4a6_1")}else{s=Math.floor(2*Math.random());playAnim(this.visualPin,1+s,1,!1),playAnim(this.reflectPin,1+s,1,!1),this.currentAnimation=1+s,playSound("pinos1")}this.currentAnimation}},PinPhysics.prototype.turnOff=function(){this.entity.rigidbody.linearVelocity=pc.Vec3.ZERO,this.entity.rigidbody.angularVelocity=pc.Vec3.ZERO,this.entity.enabled=!1,this.visualPin.enabled=!1,this.reflectPin.enabled=!1,null!=this.tween&&this.tween.stop()},PinPhysics.prototype.turnON=function(){this.entity.enabled=!0,this.visualPin.enabled=!0,this.reflectPin.enabled=!0,this.entity.rigidbody.enabled=!0},PinPhysics.prototype.endTween=function(){this.onTween=!1,this.tween=null,this.reflectPin.enabled=!1},PinPhysics.prototype.collision=function(){if(0==this.pinHitted){if(this.pinHitted=1,this.iniFix||(this.iniFix=!0,this.applyFix()),this.entity.rigidbody.linearVelocity.length()>1.75){vibrate(250);var i=Math.floor(3*Math.random());playAnim(this.visualPin,3+i,1,!1),playAnim(this.reflectPin,3+i,1,!1),this.currentAnimation=3+i,playSound("pinos4a6_1")}else{vibrate(150);i=Math.floor(2*Math.random());playAnim(this.visualPin,1+i,1,!1),playAnim(this.reflectPin,1+i,1,!1),this.currentAnimation=1+i,playSound("pinos1")}this.entity.getPosition();var t=Math.ceil(360*Math.random());this.visualPin.setLocalEulerAngles(0,t,0),this.reflectPin.setLocalEulerAngles(180,t+180,0)}},PinPhysics.prototype.removePhysics=function(){this.entity.rigidbody.enabled=!1,this.entity.rigidbody.linearVelocity=pc.Vec3.ZERO,this.entity.rigidbody.angularVelocity=pc.Vec3.ZERO,0==this.pinHitted&&this.visualPin.getPosition().y<pinOverTrack&&(this.pinHitted=3)},PinPhysics.prototype.removePhysicsExtra=function(){this.entity.rigidbody.enabled=!1},PinPhysics.prototype.applyForze=function(i,t,e){},PinPhysics.prototype.applyFix=function(){if(!(hitBox>.0585||throwNumber>0&&currentPinsFallen>3)){var i=Math.ceil(8*Math.random()),t=3,e=5,n=6,s=9;switch(this.index){case 1:switch(i){case 1:this.entity.parent.children[e].rigidbody.enabled=!1,this.entity.parent.children[n].rigidbody.enabled=!1;break;case 2:this.entity.parent.children[t].rigidbody.enabled=!1,this.entity.parent.children[e].rigidbody.enabled=!1;break;case 3:this.entity.parent.children[n].rigidbody.enabled=!1,this.entity.parent.children[s].rigidbody.enabled=!1;break;case 4:this.entity.parent.children[e].rigidbody.enabled=!1,this.entity.parent.children[s].rigidbody.enabled=!1;break;case 5:this.entity.parent.children[t].rigidbody.enabled=!1,this.entity.parent.children[n].rigidbody.enabled=!1;break;case 6:this.entity.parent.children[t].rigidbody.enabled=!1,this.entity.parent.children[e].rigidbody.enabled=!1;break;case 7:this.entity.parent.children[t].rigidbody.enabled=!1,this.entity.parent.children[s].rigidbody.enabled=!1;break;case 8:this.entity.parent.children[e].rigidbody.enabled=!1,this.entity.parent.children[s].rigidbody.enabled=!1}break;case 2:case 4:case 7:switch(t=2,e=5,n=8,s=9,i){case 1:this.entity.parent.children[e].rigidbody.enabled=!1,this.entity.parent.children[n].rigidbody.enabled=!1;break;case 2:this.entity.parent.children[t].rigidbody.enabled=!1,this.entity.parent.children[e].rigidbody.enabled=!1,this.entity.parent.children[n].rigidbody.enabled=!1;break;case 3:this.entity.parent.children[n].rigidbody.enabled=!1,this.entity.parent.children[s].rigidbody.enabled=!1;break;case 4:this.entity.parent.children[e].rigidbody.enabled=!1,this.entity.parent.children[s].rigidbody.enabled=!1;break;case 5:this.entity.parent.children[t].rigidbody.enabled=!1,this.entity.parent.children[n].rigidbody.enabled=!1;break;case 6:this.entity.parent.children[t].rigidbody.enabled=!1,this.entity.parent.children[e].rigidbody.enabled=!1;break;case 7:this.entity.parent.children[t].rigidbody.enabled=!1,this.entity.parent.children[n].rigidbody.enabled=!1,this.entity.parent.children[s].rigidbody.enabled=!1;break;case 8:this.entity.parent.children[t].rigidbody.enabled=!1,this.entity.parent.children[e].rigidbody.enabled=!1,this.entity.parent.children[s].rigidbody.enabled=!1}break;case 3:case 6:case 10:switch(t=1,e=3,n=6,s=7,i){case 1:this.entity.parent.children[e].rigidbody.enabled=!1,this.entity.parent.children[n].rigidbody.enabled=!1;break;case 2:this.entity.parent.children[t].rigidbody.enabled=!1,this.entity.parent.children[e].rigidbody.enabled=!1,this.entity.parent.children[n].rigidbody.enabled=!1;break;case 3:this.entity.parent.children[n].rigidbody.enabled=!1,this.entity.parent.children[s].rigidbody.enabled=!1;break;case 4:this.entity.parent.children[e].rigidbody.enabled=!1,this.entity.parent.children[s].rigidbody.enabled=!1;break;case 5:this.entity.parent.children[t].rigidbody.enabled=!1,this.entity.parent.children[n].rigidbody.enabled=!1;break;case 6:this.entity.parent.children[t].rigidbody.enabled=!1,this.entity.parent.children[e].rigidbody.enabled=!1;break;case 7:this.entity.parent.children[t].rigidbody.enabled=!1,this.entity.parent.children[n].rigidbody.enabled=!1,this.entity.parent.children[s].rigidbody.enabled=!1;break;case 8:this.entity.parent.children[t].rigidbody.enabled=!1,this.entity.parent.children[e].rigidbody.enabled=!1,this.entity.parent.children[s].rigidbody.enabled=!1}}}},PinPhysics.prototype.powerToMovement=function(i){var t=-1.1/35*(i-30)-.5;return t<-1.6&&(t=-1.6),t>-.5&&(t=-.5),t};var BowlingBallControl=pc.createScript("bowlingBallControl");BowlingBallControl.attributes.add("visualBowlingBall",{type:"entity",title:"visualBowlingBall"}),BowlingBallControl.attributes.add("reflectBowlingBall",{type:"entity",title:"reflectBowlingBall"}),BowlingBallControl.attributes.add("camera",{type:"entity",title:"camera"}),BowlingBallControl.attributes.add("movementCamera",{type:"entity",title:"movementCamera"}),BowlingBallControl.attributes.add("movementCameraParameters",{type:"entity",title:"movementCameraParameters"}),BowlingBallControl.attributes.add("finalCamera",{type:"entity",title:"finalCamera"}),BowlingBallControl.attributes.add("gutterLeftCamera",{type:"entity",title:"gutterLeftCamera"}),BowlingBallControl.attributes.add("gutterRightCamera",{type:"entity",title:"gutterRightCamera"}),BowlingBallControl.attributes.add("orbitSensitivity",{type:"number",default:.3}),BowlingBallControl.attributes.add("projectionFactor",{type:"number",default:15e4}),BowlingBallControl.attributes.add("orbitSensitivityMobile",{type:"number",default:.3}),BowlingBallControl.attributes.add("projectionFactorMobile",{type:"number",default:15e4}),BowlingBallControl.attributes.add("dragFactor",{type:"number",default:5e3}),BowlingBallControl.attributes.add("acceleration",{type:"number",default:80}),BowlingBallControl.attributes.add("aceleracionSpeed",{type:"number",default:.2}),BowlingBallControl.attributes.add("maximunAcceleration",{type:"number",default:5}),BowlingBallControl.attributes.add("downBowlingBallSpeed",{type:"number",default:50}),BowlingBallControl.attributes.add("bowlingBallCameraDeltaDistance",{type:"number",default:1}),BowlingBallControl.attributes.add("rotateSpeed",{type:"number",default:1}),BowlingBallControl.attributes.add("debug",{type:"entity"}),BowlingBallControl.attributes.add("radiusBowlingBall",{type:"number"}),BowlingBallControl.prototype.initialize=function(){this.posInitialBallTutorial=-123456789,this.posFinalBallTutorial=-123456789,this.dt=-1,this.ballTutorial=this.app.root.findByName("ballTutorial"),interactiveTutorial||(this.ballTutorial.enabled=!1),this.mouseMovePoint=null,this.spin=0,this.spinFinal=0,this.XaxisDirection=0,this.tweenBall=null,this.cameraMovementDeltaZ=.22,this.initialClick=null,this.initialClickLock=null,this.finalClick=null,this.initialBall=null,this.initialBallLock=null,this.detour=0,this.tweenCamara=null;var t=this.camera.getPosition();this.cameraPositionInitial=new pc.Vec3(t.x,t.y,t.z),this.finalDetection=!1,t=this.movementCamera.getPosition(),this.cameraInitialPosMovement=new pc.Vec3(t.x,t.y,t.z),t=this.gutterLeftCamera.getPosition(),this.camaraCanaletaIzqPosIni=new pc.Vec3(t.x,t.y,t.z),t=this.gutterRightCamera.getPosition(),this.camaraCanaletaDerPosIni=new pc.Vec3(t.x,t.y,t.z),this.divisorMobile=1,this.swipeInterval=null,isMobile.any()&&(this.divisorMobile=100*this.projectionFactorMobile/this.projectionFactor/200,this.dragFactor=this.dragFactor*this.divisorMobile,this.projectionFactor=this.projectionFactorMobile,this.orbitSensitivity=this.orbitSensitivityMobile),this.ballInGround=!1,this.dragFactorAux=this.dragFactor,this.activeTouches=[],this.freeTouches=[],this.secondFinger=!1,this.firstTouch=null,this.secondTouch=null,this.excepcionTouch=!1,this.divisor=1,this.lastTouchPoint=new pc.Vec2,this.bowlingBallState=0,this.entity.collision.on("collisionstart",this.onCollisionStart,this),isMobile.any()?(this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchStart,this),this.app.touch.on(pc.EVENT_TOUCHMOVE,this.onTouchMove,this),this.app.touch.on(pc.EVENT_TOUCHEND,this.onTouchEnd,this)):(this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.app.mouse.on(pc.EVENT_MOUSEMOVE,this.onMouseMove,this),this.app.mouse.on(pc.EVENT_MOUSEUP,this.onMouseUp,this),document.addEventListener("mouseout",this.onMouseLeave)),iniVars(),this.entity.setPosition(bowlingBallPosX,bowlingBallPosY,bowlingBallPosZ);var i=this.entity.getPosition();this.reflectBowlingBall.setPosition(i.x,i.y-.1467,i.z),this.visualBowlingBall.setPosition(i.x,i.y,i.z)},BowlingBallControl.DX=new pc.Vec3,BowlingBallControl.DXaux=null,BowlingBallControl.DY=new pc.Vec3,BowlingBallControl.tap=!1,BowlingBallControl.direcction=null,BowlingBallControl.mouseDirection=new pc.Vec3,BowlingBallControl.screenLocalRight=new pc.Vec3,BowlingBallControl.screenOriginPosition=new pc.Vec3,BowlingBallControl.screenYAxisPosition=new pc.Vec3,BowlingBallControl.screenLocalUp=new pc.Vec3,BowlingBallControl.worldYAxisPosition=new pc.Vec3,BowlingBallControl.projected=new pc.Vec3,BowlingBallControl.horizontalQuat=new pc.Quat,BowlingBallControl.verticalQuat=new pc.Quat,BowlingBallControl.resultQuat=new pc.Quat,BowlingBallControl.screenYAxisPositionY=new pc.Vec3,BowlingBallControl.worldYAxisPositionY=new pc.Vec3,BowlingBallControl.direccionY=null,BowlingBallControl.mouseDirectionY=new pc.Vec3,BowlingBallControl.screenLocalRightY=new pc.Vec3,BowlingBallControl.screenOriginPositionY=new pc.Vec3,BowlingBallControl.screenLocalUpY=new pc.Vec3,BowlingBallControl.projectedY=new pc.Vec3,BowlingBallControl.horizontalQuatY=new pc.Quat,BowlingBallControl.verticalQuatY=new pc.Quat,BowlingBallControl.resultQuatY=new pc.Quat,BowlingBallControl.prototype.onCollisionStart=function(t){t.other.rigidbody&&("pin"==t.other.name&&0==t.other.script.pinPhysics.pinHitted&&t.other.script.pinPhysics.collision(),"floor"==t.other.name&&(this.finalDetection||(this.finalDetection=!0,playSound("bolaFin"),this.reflectBowlingBall.enabled=!1,setTimeout(this.throwEnd.bind(this),waitToEnd))),"endWall"==t.other.name&&(this.entity.rigidbody.linearVelocity=pc.Vec3.ZERO,this.entity.rigidbody.angularVelocity=pc.Vec3.ZERO),"gutter-right"==t.other.name?this.gutterRightCamera.enabled||(onGutter=!0,this.gutterRightCamera.enabled=!0,this.movementCamera.enabled=!1,this.reflectBowlingBall.enabled=!1,playSound("canaleta")):"gutter-left"==t.other.name&&(this.gutterLeftCamera.enabled||(onGutter=!0,this.gutterLeftCamera.enabled=!0,this.movementCamera.enabled=!1,this.reflectBowlingBall.enabled=!1,playSound("canaleta"))))},BowlingBallControl.prototype.throwEnd=function(){this.reset()},BowlingBallControl.prototype.doRaycast=function(t,i){var l=this.camera.camera.screenToWorld(t,i,this.camera.camera.nearClip),a=this.camera.camera.screenToWorld(t,i,this.camera.camera.farClip),e=this.app.systems.rigidbody.raycastFirst(l,a);if(e&&"physicsBall"==e.entity.name)return BowlingBallControl.tap=!0,!0;return!1},BowlingBallControl.prototype.createBowlingBallDownMovement=function(){this.entity.getPosition().y;var t=bowlingBallDefaultPositionY,i={y:this.entity.getPosition().y};this.tweenBall=this.app.tween(i).to({y:t},.1,pc.BounceOut),this.tweenBall.on("update",function(){var t=this.entity.getPosition().y-i.y;this.entity.translateLocal(0,t,0)}.bind(this)),this.tweenBall.start()},BowlingBallControl.prototype.onTouchStart=function(t){var i=t.touches[0];this.touchStartMethod(i.x,i.y)},BowlingBallControl.prototype.touchStartMethod=function(t,i){if(0==trowBallState){if(pause)return;if(theFinal)return;if(timeEnd)return;if(!this.camera.enabled)return;if(this.doRaycast(t,i)){BowlingBallControl.tap=!0,clearInterval(this.swipeInterval),this.initialClick=new pc.Vec2(t,i),this.initialClickLock=new pc.Vec2(t,i);var l=this.visualBowlingBall.getPosition();this.initialBall=new pc.Vec3(l.x,l.y,l.z),this.initialBallLock=new pc.Vec3(l.x,l.y,l.z),this.swipeInterval=setInterval(this.throwCalculate.bind(this),120),interactiveTutorial&&-1==tutorialPhase&&(i=this.initialClickLock.y,this.ballTutorial.enabled=!0,this.ballTutorial.children[0].enabled=!0,this.ballTutorial.children[1].enabled=!0,this.ballTutorial.children[2].enabled=!1,this.ballTutorial.children[3].enabled=!1,this.ballTutorial.children[4].enabled=!1,tutorialPhase=0)}}else trowBallState},BowlingBallControl.prototype.onTouchEnd=function(t){this.touchUpMethod()},BowlingBallControl.prototype.onTouchMove=function(t){if(BowlingBallControl.tap){var i=t.touches[0];this.touchMoveMethod(i.x,i.y)}},BowlingBallControl.prototype.onMouseMove=function(t){BowlingBallControl.tap&&this.touchMoveMethod(t.x,t.y)},BowlingBallControl.prototype.touchMoveMethod=function(t,i){this.mouseMovePoint=new pc.Vec2(t,i)},BowlingBallControl.prototype.calculaMouseMove=function(){if(0==trowBallState){if(!BowlingBallControl.tap)return;if(null==this.initialClickLock)return;if(null==this.mouseMovePoint)return;if(null==this.initialClick)return;var t=960;window.innerWidth>window.innerHeight&&(960,t=540);this.entity.getPosition();var i=window.innerWidth,l=window.innerHeight,a=this.initialClickLock.x+(this.mouseMovePoint.x-this.initialClickLock.x),e=this.initialClickLock.y+(this.mouseMovePoint.y-this.initialClickLock.y);if(interactiveTutorial)if(0==tutorialPhase)e=this.initialClickLock.y,this.posInitialBallTutorial=this.mouseMovePoint.x,tutorialPhase=1,this.dt=0;else if(1==tutorialPhase){e=this.initialClickLock.y,this.posFinalBallTutorial=this.mouseMovePoint.x,this.dt=this.dt+1;var o=Math.abs(this.posInitialBallTutorial-this.posFinalBallTutorial)}else if(2==tutorialPhase)this.dt=0,a=this.initialClickLock.x,this.posInitialBallTutorial=e,tutorialPhase=3;else if(3==tutorialPhase){this.dt=this.dt+1,a=this.initialClickLock.x,e<this.posFinalBallTutorial?e=this.posFinalBallTutorial:this.posFinalBallTutorial=e,(o=Math.abs(this.posInitialBallTutorial-this.posFinalBallTutorial))>60&&(tutorialPhase=4,this.ballTutorial.children[2].enabled=!1,this.ballTutorial.children[3].enabled=!0,this.dt=-1,this.posInitialBallTutorial=-123456789,this.posInitialBallTutorial=-123456789)}else 4==tutorialPhase?(this.dt=0,a=this.initialClickLock.x,this.posInitialBallTutorial=e,tutorialPhase=5):5==tutorialPhase&&(this.dt=this.dt+1);isMobile.any()||(i=this.app.graphicsDevice.width,l=this.app.graphicsDevice.height,window.innerWidth>window.innerHeight&&(i=l));var n=l/t,s=0,r=-trackWidth/2+.105,h=i,c=trackWidth/2-.105,u=(c-r)/(h-s),p=u*(a-s)+r;s=0,r=-trackWidth/2+.105,h=i;var B=(u=((c=trackWidth/2-.105)-r)/(h-s))*(this.initialClickLock.x-s)+r,d=p-B;this.initialBallLock.x+d<-trackWidth/2+.12?d=-trackWidth/2+.12-this.initialBallLock.x:this.initialBallLock.x+d>trackWidth/2-.12&&(d=trackWidth/2-.12-this.initialBallLock.x),s=l-60*n,r=ballMaximunHeight,h=l-140*n,p=(u=((c=bowlingBallPosY)-r)/(h-s))*(e-s)+r,s=l-60*n,r=ballMaximunHeight,h=l-140*n;var g=p-(B=(u=((c=bowlingBallPosY)-r)/(h-s))*(this.initialClickLock.y-s)+r);this.initialBallLock.y+g<bowlingBallPosY?g=bowlingBallPosY-this.initialBallLock.y:this.initialBallLock.y+g>ballMaximunHeight&&(g=ballMaximunHeight-this.initialBallLock.y),s=l-50*n,r=trackBackLimitZ,h=l-140*n,p=(u=((c=trackLimitZ)-r)/(h-s))*(e-s)+r,s=l-50*n,r=trackBackLimitZ,h=l-140*n;var w=p-(B=(u=((c=trackLimitZ)-r)/(h-s))*(this.initialClickLock.y-s)+r);this.initialBallLock.z+w<trackLimitZ?w=trackLimitZ-this.initialBallLock.z:this.initialBallLock.z+w>trackBackLimitZ&&(w=trackBackLimitZ-this.initialBallLock.z),this.entity.rigidbody.teleport(this.initialBallLock.x+d,this.initialBallLock.y+g,this.initialBallLock.z+w),null==a&&(a=1212),null==e&&(e=830),this.finalClick=new pc.Vec2(a,e);var m=this.entity.getPosition();if(null!=this.initialBall&&m.z>this.initialBall.z&&(this.initialBall=new pc.Vec3(m.x,m.y,m.z)),null==this.finalClick||null==this.initialClick)return;var y=Math.abs(this.finalClick.y-this.initialClick.y);o=this.finalClick.x-this.initialClick.x;Math.sqrt(Math.pow(o,2),Math.pow(y,2))<1?(clearInterval(this.swipeInterval),this.swipeInterval=setInterval(this.throwCalculate.bind(this),100)):this.throwPrepare()}else if(1==trowBallState){a=this.mouseMovePoint.x,e=this.mouseMovePoint.y;this.finalClick=new pc.Vec2(a,e)}},BowlingBallControl.prototype.onMouseUp=function(t){this.touchUpMethod(t.x,t.y)},BowlingBallControl.prototype.touchUpMethod=function(t,i){(BowlingBallControl.tap=!1,clearInterval(this.swipeInterval),this.finalClick=null,this.initialClick=null,this.initialClickLock=null,this.initialBallLock=null,this.initialBall=null,this.mouseMovePoint=null,interactiveTutorial&&-123456789!=this.posInitialBallTutorial&&-123456789!=this.posFinalBallTutorial&&-1!=this.dt)?Math.abs(this.posInitialBallTutorial-this.posFinalBallTutorial)>20||this.dt>120?1==tutorialPhase?(tutorialPhase=2,this.ballTutorial.children[2].enabled=!0,this.ballTutorial.children[0].enabled=!1,this.ballTutorial.children[1].enabled=!1,this.dt=-1,this.posInitialBallTutorial=-123456789,this.posInitialBallTutorial=-123456789):3==tutorialPhase&&(tutorialPhase=4,this.ballTutorial.children[2].enabled=!1,this.ballTutorial.children[3].enabled=!0,this.dt=-1,this.posInitialBallTutorial=-123456789,this.posInitialBallTutorial=-123456789):1==tutorialPhase||0==tutorialPhase?(this.dt=-1,this.posInitialBallTutorial=-123456789,this.posInitialBallTutorial=-123456789,tutorialPhase=-1,this.ballTutorial.children[4].enabled=!0,this.ballTutorial.children[0].enabled=!1,this.ballTutorial.children[1].enabled=!1):3==tutorialPhase&&(this.dt=-1,this.posInitialBallTutorial=-123456789,this.posInitialBallTutorial=-123456789,tutorialPhase=2):interactiveTutorial&&(1!=tutorialPhase&&0!=tutorialPhase||(this.dt=-1,this.posInitialBallTutorial=-123456789,this.posInitialBallTutorial=-123456789,tutorialPhase=-1,this.ballTutorial.children[4].enabled=!0,this.ballTutorial.children[0].enabled=!1,this.ballTutorial.children[1].enabled=!1))},BowlingBallControl.prototype.onMouseDown=function(t){this.touchStartMethod(t.x,t.y)},BowlingBallControl.prototype.swipeX=function(){trowBallState},BowlingBallControl.prototype.throwCalculate=function(){if(0==trowBallState&&!theFinal){if(null!=this.finalClick){var t=this.entity.getPosition(),i=Math.abs(this.finalClick.y-this.initialClick.y),l=this.finalClick.x-this.initialClick.x;Math.sqrt(Math.pow(l,2)+Math.pow(i,2))<80&&(this.initialBall=new pc.Vec3(t.x,t.y,t.z))}null!=this.finalClick&&(this.initialClick=new pc.Vec2(this.finalClick.x,this.finalClick.y))}},BowlingBallControl.prototype.throwPrepare=function(){if(null!=this.initialClick&&null!=this.finalClick){var t=this.entity.getPosition(),i=Math.abs(this.finalClick.y-this.initialClick.y),l=this.finalClick.x-this.initialClick.x;Math.sqrt(Math.pow(l,2)+Math.pow(i,2));if(t.z<=trackLimitZ+.001){interactiveTutorial&&(interactiveTutorial=!1,saveVars(1,"interactiveTutorial"),this.ballTutorial.enabled=!1),axisX=this.shiftXCaltulation(l);var a=this.finalClick.y-this.initialClick.y,e=swipeTolerance,o=Math.abs(t.z-this.initialBall.z);if(o>.1?swipeTolerance=12:o>.2&&(swipeTolerance=1),i>=swipeTolerance&&a<0){this.entity.collision.radius=hitBox,swipeTolerance=e,trowBallState=1,shiftX=0,this.entity.rigidbody.type=pc.BODYTYPE_DYNAMIC,this.entity.rigidbody.mass=3,power=this.powerCalculation(o),factorSpeed=this.speedFactorCalculation(i);var n=(power+factorSpeed)/4;if(this.detour=0,o<=.15)var s=0,r=.7,h=.14,c=1.9;else{s=.14,r=1.9,h=.25,c=2.6;this.detour=0}var u=(c-r)/(h-s)*(o-s)+r;this.entity.rigidbody.applyImpulse(axisX,u,-n),this.camera.enabled=!1,this.movementCamera.enabled=!0;var p=this.movementCamera.getPosition(),B=this.movementCameraParameters.getPosition(),d={x:p.x,y:p.y},g={x:B.x,y:B.y},w=this.app.tween(d).to({x:g.x,y:g.y},.3,pc.Linear);w.on("update",function(){var t=this.movementCamera.getPosition();this.movementCamera.setPosition(d.x,d.y,t.z)}.bind(this)),w.start();p=this.movementCamera.getLocalEulerAngles(),B=this.movementCameraParameters.getLocalEulerAngles();var m={x:p.x,y:p.y,z:p.z},y={x:B.x,y:B.y,z:B.z},C=this.app.tween(m).to({x:y.x,y:y.y,z:y.z},.25,pc.Linear);C.on("update",function(){this.movementCamera.setLocalEulerAngles(m.x,m.y,m.z)}.bind(this)),C.start();var b={x:this.movementCamera.camera.fov},v=this.movementCameraParameters.camera.fov,f=this.app.tween(b).to({x:v},.25,pc.Linear);return f.on("update",function(){this.movementCamera.camera.fov=b.x}.bind(this)),f.start(),_sonidos.stop("pocoTiempo"),"stop"!=currentGamePlay&&PokiSDK.gameplayStop(),currentGamePlay="stop",_control.scoreOverScreen(!1),clearInterval(this.swipeInterval),this.finalClick=null,this.initialClick=null,void(this.initialBall=null)}}}},BowlingBallControl.prototype.cameraChange=function(){},BowlingBallControl.prototype.update=function(t){null!=this.mouseMovePoint&&this.calculaMouseMove();var i=this.entity.getPosition(),l=this.visualBowlingBall.getPosition();if(0==trowBallState){this.visualBowlingBall.setPosition(i.x,i.y,i.z);var a=l.y-bowlingBallPosY;this.reflectBowlingBall.setPosition(l.x,l.y-.1467-a,l.z)}else if(1==trowBallState){var e=(.009-(h=0))/((c=.04)-(r=.06))*(this.entity.collision.radius-r)+h;this.visualBowlingBall.setPosition(i.x,i.y-.01+e,i.z),!this.ballInGround&&this.visualBowlingBall.getPosition().y<=.23&&(this.ballInGround=!0,playSound("lanzar"),setTimeout(function(){this.app.systems.rigidbody.setGravity(0,-9.8,0)}.bind(this),600),this.spinFinal=spin/210,0!=this.spinFinal&&this.spinFinal>0?(this.spin=this.spin+t*speedSpin,this.spin<this.spinFinal?this.entity.rigidbody.applyImpulse(t*speedSpin,0,0):(this.entity.rigidbody.applyImpulse(this.spinFinal,0,0),this.spinFinal=0)):0!=this.spinFinal&&this.spinFinal<0&&(this.spin=this.spin-t*speedSpin,this.spin>this.spinFinal?this.entity.rigidbody.applyImpulse(-t*speedSpin,0,0):(this.entity.rigidbody.applyImpulse(this.spinFinal,0,0),this.spinFinal=0)));var o=i.y-.127;(o+=e)>.103&&(o=.103),this.reflectBowlingBall.setPosition(i.x,o,i.z);var n=3*factorSpeed+30*power;if(this.ballInGround){var s=-1*(this.rotateSpeed*t+n*t),r=0,h=s,c=263;spin<0&&(c=-263);e=(s/100-h)/(c-r)*(spin-r)+h;if((spin<-190||spin>190)&&(e=0),e=(.19*e-(h=e))/((c=100)-(r=50))*(aceite-r)+h,this.visualBowlingBall.children[0].children[0].rotateLocal(e,0,0),this.visualBowlingBall.children[0].rotateLocal(0,spin*t,0),0!=this.spinFinal&&this.spinFinal>0)if(this.spin=this.spin+t*speedSpin,this.spin<this.spinFinal)this.entity.rigidbody.applyImpulse(t*speedSpin,0,0);else{var u=this.spin-this.spinFinal;this.entity.rigidbody.applyImpulse(u,0,0),this.spinFinal=0}else if(0!=this.spinFinal&&this.spinFinal<0)if(this.spin=this.spin-t*speedSpin,this.spin>this.spinFinal)this.entity.rigidbody.applyImpulse(-t*speedSpin,0,0);else{u=this.spinFinal-this.spin;this.entity.rigidbody.applyImpulse(-u,0,0),this.spinFinal=0}}else this.visualBowlingBall.children[0].children[0].rotateLocal(-1*(this.rotateSpeed*t+n*t),0,0);this.reflectBowlingBall.rotateLocal(-1*(this.rotateSpeed*t+n*t),0,0)}this.entity.getPosition();this.ajustaCamara(t)},BowlingBallControl.prototype.ajustaCamara=function(t){if(0!=trowBallState&&trowBallState>0){var i=this.entity.getPosition();if(this.movementCamera.enabled){if(i.z<pinsZcamera)return void(this.finalCamera.enabled=!0);var l=this.movementCamera.getPosition();if((e=Math.abs(i.z-l.z))>this.bowlingBallCameraDeltaDistance){this.deltaY=0;var a=e-this.bowlingBallCameraDeltaDistance;this.cameraMovementDeltaZ>0?(this.cameraMovementDeltaZ=this.cameraMovementDeltaZ-.9*t,this.cameraMovementDeltaZ-.9*t<0&&(this.cameraMovementDeltaZ=0)):this.cameraMovementDeltaZ=0,this.movementCamera.setPosition(l.x,l.y-this.deltaY,l.z-a+this.cameraMovementDeltaZ)}}else if(this.gutterRightCamera.enabled){if(i.z>pinsZcamera){l=this.gutterRightCamera.getPosition();if((e=Math.abs(i.z-l.z))>4.6*this.bowlingBallCameraDeltaDistance){a=e-4.6*this.bowlingBallCameraDeltaDistance;this.gutterRightCamera.setPosition(l.x,l.y,l.z-a)}}}else if(this.gutterLeftCamera.enabled&&i.z>pinsZcamera){var e;l=this.gutterLeftCamera.getPosition();if((e=Math.abs(i.z-l.z))>4.6*this.bowlingBallCameraDeltaDistance){a=e-4.6*this.bowlingBallCameraDeltaDistance;this.gutterLeftCamera.setPosition(l.x,l.y,l.z-a)}}}(i=this.entity.getPosition()).z<pinsZcamera&&this.movementCamera.enabled,i.z<trackEndZ&&(this.reflectBowlingBall.enabled=!1)},BowlingBallControl.prototype.onMouseLeave=function(t){BowlingBallControl.tap=!1,this.finalClick=null,this.initialClick=null,this.initialBall=null},BowlingBallControl.prototype.heightCalculation=function(t){var i=bowlingBallPosZ+.025,l=bowlingBallPosY,a=trackBackLimitZ,e=(ballMaximunHeight-l)/(a-i)*(t-i)+l;return e<bowlingBallPosY&&(e=bowlingBallPosY),e},BowlingBallControl.prototype.powerCalculation=function(t){var i=14/(trackBackLimitZ-trackLimitZ-0)*(t-0)+6;return i<6&&(i=6),i>18&&(i=18),i},BowlingBallControl.prototype.speedFactorCalculation=function(t){var i=swipeTolerance,l=27/(550-i)*(t-i)+38;return l>65&&(l=65),l<38&&(l=38),l},BowlingBallControl.prototype.dragFactorCalculation=function(t){var i=bowlingBallPosZ,l=this.dragFactor,a=trackBackLimitZ,e=10*this.dragFactor;1==this.divisorMobile&&(l=this.dragFactor,e=15*this.dragFactor);var o=(e-l)/(a-i)*(t-i)+l;return o<this.dragFactor&&(o=this.dragFactor),o},BowlingBallControl.prototype.heightTimeCalculation=function(t){var i=ballMaximunHeight/4,l=-.5/(bowlingBallPosY-i)*(t-i)+.5;return l<0&&(l=0),l},BowlingBallControl.prototype.reset=function(){trowBallState=0,entry==finalEntry&&(specialEntry=1),_control.throwReset(!1)},BowlingBallControl.prototype.REinitialize=function(){this.spin=0,this.spinFinal=0,this.touchUpMethod(0,0),this.detour=0,this.app.systems.rigidbody.setGravity(0,-3.5,0),this.ballInGround=!1,this.entity.rigidbody.linearVelocity=pc.Vec3.ZERO,this.entity.rigidbody.angularVelocity=pc.Vec3.ZERO,this.entity.rigidbody.type=pc.BODYTYPE_STATIC,this.entity.rigidbody.teleport(bowlingBallPosX,bowlingBallPosY,bowlingBallPosZ,0,0,0),this.camera.setPosition(this.cameraPositionInitial.x,this.cameraPositionInitial.y,this.cameraPositionInitial.z),this.movementCamera.setPosition(this.cameraInitialPosMovement.x,this.cameraInitialPosMovement.y,this.cameraInitialPosMovement.z),this.gutterRightCamera.setPosition(this.camaraCanaletaDerPosIni.x,this.camaraCanaletaDerPosIni.y,this.camaraCanaletaDerPosIni.z),this.gutterLeftCamera.setPosition(this.camaraCanaletaIzqPosIni.x,this.camaraCanaletaIzqPosIni.y,this.camaraCanaletaIzqPosIni.z),this.camera.enabled=!0,this.finalCamera.enabled=!1,this.gutterRightCamera.enabled=!1,this.gutterLeftCamera.enabled=!1,this.tweenCamara=null,this.maximunAcceleration=0,this.cameraMovementDeltaZ=.22,this.acceleration=0,this.reflectBowlingBall.enabled=!0;var t=this.entity.getPosition();this.reflectBowlingBall.setPosition(t.x,t.y-.1467,t.z),this.reflectBowlingBall.setLocalEulerAngles(0,0,0),this.visualBowlingBall.setLocalEulerAngles(0,0,0),this.visualBowlingBall.children[0].setLocalEulerAngles(0,0,0),this.visualBowlingBall.children[0].children[0].setLocalEulerAngles(0,0,0),this.visualBowlingBall.setPosition(t.x,t.y,t.z),this.initialBallLock=new pc.Vec3(t.x,t.y,t.z);var i=this.camera.getLocalEulerAngles();this.movementCamera.setLocalEulerAngles(i.x,i.y,i.z),this.movementCamera.camera.fov=this.camera.camera.fov,iniVars(),this.finalDetection=!1,_control.screen2D.findByName("puntitoSpin").script.spinControl.reset()},BowlingBallControl.prototype.resetBola=function(){this.entity.rigidbody.linearVelocity=pc.Vec3.ZERO,this.entity.rigidbody.angularVelocity=pc.Vec3.ZERO,this.entity.rigidbody.type=pc.BODYTYPE_STATIC,this.entity.rigidbody.teleport(bowlingBallPosX,bowlingBallPosY,bowlingBallPosZ,0,0,0);var t=this.entity.getPosition();this.reflectBowlingBall.setPosition(t.x,t.y-.1467,t.z),this.reflectBowlingBall.setLocalEulerAngles(0,0,0),this.visualBowlingBall.setLocalEulerAngles(0,0,0),this.initialBallLock=new pc.Vec3(t.x,t.y,t.z)},BowlingBallControl.prototype.shiftXCaltulation=function(t){var i=2/300*(t-0)+0;return i<-2?i=-2:i>2&&(i=2),i};var RotaObjecto=pc.createScript("rotaObjecto");RotaObjecto.attributes.add("speed",{type:"number",default:5}),RotaObjecto.prototype.initialize=function(){},RotaObjecto.prototype.update=function(t){this.entity.rotateLocal(0,this.speed,0)};var PinsReplacer=pc.createScript("pinsReplacer");PinsReplacer.attributes.add("pins",{type:"entity",title:"pins"}),PinsReplacer.prototype.initialize=function(){this.tween=null,this.tween2=null;var t=this.entity.getLocalPosition();this.origin=new pc.Vec3(t.x,t.y,t.z),this.destination=new pc.Vec3(0,.167,-5.915),this.deltaZ=Math.abs(this.origin.z-this.destination.z),this.deltaY=Math.abs(this.origin.y-this.destination.y)},PinsReplacer.prototype.update=function(t){},PinsReplacer.prototype.putReplacer=function(t,e){this.tween=this.entity.tween(this.entity.getLocalPosition()).to(this.destination,.43,pc.SineOut).on("complete",this.removeReplacer.bind(this,t,e)),this.tween.start();var i=this.pins.getLocalPosition();this.pins.setLocalPosition(i.x,i.y+this.deltaY,i.z-this.deltaZ),i=this.pins.getLocalPosition();var n=new pc.Vec3(i.x,i.y-this.deltaY,i.z+this.deltaZ);this.tween2=this.pins.tween(this.pins.getLocalPosition()).to(n,.45,pc.SineOut),this.tween2.start()},PinsReplacer.prototype.removeReplacer=function(t,e){this.tween=this.entity.tween(this.entity.getLocalPosition()).to(this.origin,.35,pc.SineIn),this.tween.delay(.38),this.tween.start(),"gameOver"==t||e||("start"!=currentGamePlay&&PokiSDK.gameplayStart(),console.log("game play start"),currentGamePlay="start")};var AnimaMsg=pc.createScript("animaMsg");AnimaMsg.attributes.add("destinox",{type:"number",default:0,title:"destinox"}),AnimaMsg.attributes.add("destinoy",{type:"number",default:0,title:"destinoy"}),AnimaMsg.attributes.add("destinoz",{type:"number",default:0,title:"destinoz"}),AnimaMsg.attributes.add("tiempo",{type:"number",default:.6,title:"tiempo"}),AnimaMsg.attributes.add("delaySaca",{type:"number",default:1.8,title:"delaySaca"}),AnimaMsg.attributes.add("boton",{type:"asset",assetType:"texture",array:!0,title:"boton"}),AnimaMsg.attributes.add("tipoTween",{type:"string",default:"BounceOut",title:"tipoTween"}),AnimaMsg.prototype.initialize=function(){this.tween=null,this.mc=this.entity;var t=this.entity.getLocalPosition();switch(this.origen=new pc.Vec3(t.x,t.y,t.z),this.destino=new pc.Vec3(this.destinox,this.destinoy,this.destinoz),this.tipoTween){case"BounceOut":this.tipoTween=pc.BounceOut;break;case"SineIn":this.tipoTween=pc.SineIn;break;case"SineOut":this.tipoTween=pc.SineOut;break;case"SineInOut":this.tipoTween=pc.SineInOut}3==this.boton.length&&this.traduce(0)},AnimaMsg.prototype.clickBoton=function(t,e,i){null!=e?this.entity.element.texture=this.boton[i].resource:(this.entity.element.texture=this.boton[1].resource,setTimeout(this.restauraBoton.bind(this,t),180))},AnimaMsg.prototype.restauraBoton=function(t){this.entity.element.texture=this.boton[0].resource,t()},AnimaMsg.prototype.pone1Vez=function(t){this.entity.setLocalScale(1,0,1),this.entity.enabled=!0,this.tween=this.entity.tween(this.entity.getLocalScale()).to(new pc.Vec3(1,1,1),this.tiempo,this.tipoTween),null!=t&&this.tween.on("complete",t),this.tween.start()},AnimaMsg.prototype.pone=function(t){this.entity.setLocalScale(1,0,1),this.tween=this.entity.tween(this.entity.getLocalScale()).to(new pc.Vec3(1,1,1),this.tiempo,this.tipoTween).on("complete",this.saca.bind(this,t)),this.tween.start()},AnimaMsg.prototype.saca=function(t){this.tween=this.entity.tween(this.entity.getLocalScale()).to(new pc.Vec3(1,0,1),this.tiempo-.1,this.tipoTween),null!=t&&this.tween.on("complete",t),this.tween.delay(this.delaySaca),this.tween.start()},AnimaMsg.prototype.mueve=function(t){this.tween=this.entity.tween(this.entity.getLocalPosition()).to(this.destino,this.tiempo,this.tipoTween).on("complete",this.sacaMueve.bind(this,t)),this.tween.start()},AnimaMsg.prototype.sacaMueve=function(t){null!=t&&t(),this.tween=this.entity.tween(this.entity.getLocalPosition()).to(this.origen,this.tiempo-.1,this.tipoTween),this.tween.delay(this.delaySaca),this.tween.start()},AnimaMsg.prototype.animaMano=function(t){var e=this.tiempo,i=this.entity.getLocalPosition();if(0==t)var n=new pc.Vec3(i.x+this.destinox,i.y,i.z);else if(1==t){n=new pc.Vec3(i.x-2*this.destinox,i.y,i.z);e*=2}else if(2==t){n=new pc.Vec3(i.x+2*this.destinox,i.y,i.z);e*=2}3==(t+=1)&&(t=1),this.entity.enabled=!0,this.tween=this.mc.tween(i).to(n,e,this.tipoTween),this.tween.on("complete",this.animaMano.bind(this,t)),this.tween.start()},AnimaMsg.prototype.detieneMano=function(t){this.tween.stop()},AnimaMsg.prototype.traduce=function(t){var e=x=window.navigator.language||navigator.browserLanguage;t*=idiomas.length;var i=0;lenguajeManual?i=lenguajeEl:-1!==e.indexOf("de")?i=1:-1!==e.indexOf("nl")&&(i=2),this.entity.element.texture=this.boton[t+i].resource};var AnimaTexturas=pc.createScript("animaTexturas");AnimaTexturas.attributes.add("texturas",{type:"asset",assetType:"texture",array:!0,title:"texturas"}),AnimaTexturas.attributes.add("loop",{type:"number",default:0,title:"loop"}),AnimaTexturas.attributes.add("autoAnim",{type:"number",default:0,title:"autoAnim"}),AnimaTexturas.attributes.add("texture3D",{type:"number",default:0,title:"texture3D"}),AnimaTexturas.attributes.add("frames",{type:"number",default:60,title:"frames"}),AnimaTexturas.prototype.initialize=function(){this.entity;var a=[this.entity,this.texturas,0,this.texturas.length,!1,0,0,0,!1];this.cont=0,this.arrayAnimaciones=[],this.arrayAnimaciones[0]=a,this.callBack=null,1==this.autoAnim&&(1==this.loop&&(this.arrayAnimaciones[0][8]=!0),this.arrayAnimaciones[0][4]=!0)},AnimaTexturas.prototype.inicioAnim=function(a,i,t){this.callBack=a,this.cont=0;var r=[this.entity,this.texturas,0,this.texturas.length,!1,0,0,0,!1];if(this.cont=0,null!=i&&null!=t)this.arrayAnimaciones[0][2]=i,this.arrayAnimaciones[0][3]=t;else{r=[this.entity,this.texturas,0,this.texturas.length,!1,0,0,0,!1];this.arrayAnimaciones=[],this.arrayAnimaciones[0]=r}this.cont=0,this.entity.element.texture=this.texturas[this.arrayAnimaciones[0][2]].resource,this.arrayAnimaciones[0][4]=!0,1==this.loop&&(this.arrayAnimaciones[0][8]=!0)},AnimaTexturas.prototype.stopAnim=function(){this.arrayAnimaciones[0][4]=!1},AnimaTexturas.prototype.update=function(a){var i=a,t=1/i;this.cont=this.cont+i;var r=t/this.frames;if(r/=t,this.cont>=r){this.cont=0;for(var s=0;s<this.arrayAnimaciones.length;s++)if(1==this.arrayAnimaciones[s][4]){var e;if(0==this.arrayAnimaciones[s][7])0==(e=this.arrayAnimaciones[s][5])&&(e=this.arrayAnimaciones[s][2]),0==this.texture3D?this.arrayAnimaciones[s][0].element.texture=this.arrayAnimaciones[s][1][e].resource:this.cambiaTextura3D(this.arrayAnimaciones[s][1][e].resource),this.arrayAnimaciones[s][5]=this.arrayAnimaciones[s][5]+1,(e=this.arrayAnimaciones[s][5])==this.arrayAnimaciones[s][3]&&(0==this.arrayAnimaciones[s][6]?this.arrayAnimaciones[s][8]?this.arrayAnimaciones[s][5]=1:(this.arrayAnimaciones[s][4]=!1,this.arrayAnimaciones[s][5]=0,null!=this.callBack&&this.callBack()):2==this.arrayAnimaciones[s][6]&&(this.arrayAnimaciones[s][7]=1));if(1==this.arrayAnimaciones[s][7])(e=this.arrayAnimaciones[s][5])==this.arrayAnimaciones[s][3]&&(e=this.arrayAnimaciones[s][3]-2,this.arrayAnimaciones[s][5]=e),0==this.texture3D?this.arrayAnimaciones[s][0].element.texture=this.arrayAnimaciones[s][1][e].resource:this.cambiaTextura3D(this.arrayAnimaciones[s][1][e].resource),this.arrayAnimaciones[s][5]=this.arrayAnimaciones[s][5]-1,(e=this.arrayAnimaciones[s][5])==this.arrayAnimaciones[s][2]-1&&(this.arrayAnimaciones[s][4]=!1,this.arrayAnimaciones[s][5]=0,2==this.arrayAnimaciones[s][6]&&(this.arrayAnimaciones[s][7]=0))}}},AnimaTexturas.prototype.cambiaTextura3D=function(a){for(var i=this.entity.model.meshInstances,t=0;t<i.length;++t){var r=i[t];r.material.diffuseMap=a,r.material.opacityMap=a,r.material.update()}};var Parpadear=pc.createScript("parpadear");Parpadear.attributes.add("tiempoDesaparicion",{type:"number",default:.85,title:"tiempoDesaparicion"}),Parpadear.attributes.add("tiempoAparicion",{type:"number",default:.45,title:"tiempoAparicion"}),Parpadear.attributes.add("autoStart",{type:"number",default:1,title:"autoStart"}),Parpadear.prototype.initialize=function(){this.contador=0},Parpadear.prototype.update=function(t){0!=this.autoStart&&(this.contador=this.contador+t,this.entity.element.enabled?this.contador>this.tiempoDesaparicion&&(this.contador=0,this.entity.element.enabled=!1):this.entity.element.enabled||this.contador>this.tiempoAparicion&&(this.contador=0,this.entity.element.enabled=!0,2==this.autoStart&&(this.autoStart=0)))};var GameControl=pc.createScript("gameControl");GameControl.attributes.add("normalCamera",{type:"entity",title:"normalCamera"}),GameControl.attributes.add("introductionCamera",{type:"entity",title:"introductionCamera"}),GameControl.attributes.add("finalCamera",{type:"entity",title:"finalCamera"}),GameControl.attributes.add("bowlingBall",{type:"entity",title:"bowlingBall"}),GameControl.attributes.add("pins",{type:"entity",title:"pins"}),GameControl.attributes.add("pinsReplacer",{type:"entity",title:"pinsReplacer"}),GameControl.attributes.add("screen2D",{type:"entity",title:"screen2D"}),GameControl.attributes.add("rotate",{type:"entity",title:"rotate"}),GameControl.attributes.add("trackMaterial",{type:"asset",assetType:"material",array:!1}),GameControl.attributes.add("trackBright",{type:"entity",title:"trackBright"}),GameControl.attributes.add("pausePanel",{type:"entity",title:"pausePanel"}),GameControl.attributes.add("pauseb",{type:"entity",title:"pauseb"}),GameControl.prototype.initialize=function(){interactiveTutorial=!0,existeVars("interactiveTutorial")&&1==loadVars("interactiveTutorial")&&(interactiveTutorial=!1),_control=this,_menu=this,getAllVars(),this.scoreAc=0,this.timeTXT=this.screen2D.findByName("time").children[0],this.cameraIntroInitial=this.introductionCamera.getPosition(),this.cameraIntroInitial=new pc.Vec3(this.cameraIntroInitial.x,this.cameraIntroInitial.y,this.cameraIntroInitial.z),this.firstExecution=!1,this.indexTutorial=1;var e=this.screen2D.findByName("muteb");createEvents(e,!1),createEvents(e,!0,1,this.clickMuteButton.bind(this)),this.introStarts(),createEvents(this.pauseb,!0,1,this.clickPause.bind(this)),this.conExit=!1},GameControl.prototype.clickPause=function(){playSound("click"),this.pausePanel.enabled=!0;var e=this.pausePanel.findByName("resumeb"),t=this.pausePanel.findByName("endgameb");createEvents(e,!0,1,this.resumePause.bind(this)),createEvents(t,!0,1,this.endGamePause.bind(this)),pause=!0,this.app.timeScale=0},GameControl.prototype.resumePause=function(){var e=this.pausePanel.findByName("resumeb"),t=this.pausePanel.findByName("endgameb");createEvents(e,!1),createEvents(t,!1),playSound("click"),pause=!1,this.pausePanel.enabled=!1,this.app.timeScale=1},GameControl.prototype.endGamePause=function(){var e=this.pausePanel.findByName("resumeb"),t=this.pausePanel.findByName("endgameb");createEvents(e,!1),createEvents(t,!1),playSound("click"),pause=!1,this.app.timeScale=1,this.gameTime=0,this.pausePanel.enabled=!1,this.conExit=!0},GameControl.prototype.quickStart=function(){var e=this.trackMaterial.resource;e.opacity=.563,e.reflectivity=1.3,e.update(),this.bowlingBall.script.bowlingBallControl.visualBowlingBall.children[1].enabled=!1,spin=0,_globalScore=0,this.resetPins();var t=new pc.Color;this.timeTXT.element.color=t.fromString(colorNormal),this.currentScore=0,timeEnd=!1,this.intervalTime=null,muteMusic(),this.screen2D.findByName("endScore").enabled=!1,this.arrayScore=[],this.frames=[],this.pointsArray=[],this.resetScore(),this.startGame_continue()},GameControl.prototype.introStarts=function(){var e=this.trackMaterial.resource,t=this.screen2D.findByName("botonTuto");createEvents(t,!1),createEvents(t,!0,1,this.clickTutorialButton.bind(this)),e.opacity=.563,e.reflectivity=1.3,e.update(),this.bowlingBall.script.bowlingBallControl.visualBowlingBall.children[1].enabled=!1,spin=0,_globalScore=0,this.resetPins();var i=new pc.Color;this.timeTXT.element.color=i.fromString(colorNormal),this.currentScore=0,timeEnd=!1,this.intervalTime=null;for(var r=1;r<=10;r++)arrayScores[r]=[],arrayScores[r][1]=0,arrayScores[r][2]=0;if(arrayScores[10][3]=0,muteMusic(),this.screen2D.findByName("endScore").enabled=!1,this.arrayScore=[],this.frames=[],this.pointsArray=[],this.resetPinPoints(),this.resetScore(),skipMenu)return this.quickStart(),void(skipMenu=!1);_sonidos.stop("musicIngame"),_sonidos.play("musicaMenu"),this.introductionCamera.enabled=!0,this.normalCamera.enabled=!1,this.introductionCamera.setPosition(this.cameraIntroInitial.x,this.cameraIntroInitial.y,this.cameraIntroInitial.z);var n=this.introductionCamera.getPosition(),a={x:n.z,y:n.x},s=this.app.tween(a).to({x:4.772,y:.062},2.5,pc.QuadraticIn);s.on("update",function(){var e=this.introductionCamera.getPosition();this.introductionCamera.setPosition(a.y,e.y,a.x)}.bind(this)),s.on("complete",function(){this.putEvents(),this.screen2D.findByName("Logo").script.animaMsg.pone1Vez();var e=this.screen2D.findByName("tap");e.enabled=!0,e.script.animaMsg.traduce(0)}.bind(this)),s.start()},GameControl.prototype.resetPinPoints=function(){for(var e=this.screen2D.findByName("pinos"),t=0;t<10;t++)e.findByName("p"+(t+1)).enabled=!0;this.screen2D.findByName("player1").findByName("texto").element.text="0"},GameControl.prototype.putEvents=function(){var e=this.screen2D.findByName("botonMax");e.enabled=!0,createEvents(e,!0,1,this.startGame.bind(this))},GameControl.prototype.removeEvents=function(){var e=this.screen2D.findByName("botonMax");createEvents(e,!1),e.enabled=!1},GameControl.prototype.startGame=function(){this.killTutorial(),playSound("click"),_sonidos.slot("musicIngame").volume=.37,_sonidos.stop("musicaMenu"),muteMusic();var e=this.screen2D.findByName("Logo");e.enabled=!1,this.screen2D.findByName("tap").enabled=!1,e.enabled=!1,this.removeEvents();var t=this.screen2D.findByName("splashUp"),i=this.screen2D.findByName("splashDown");t.enabled=!0,i.enabled=!0,t.script.animaMsg.mueve(this.startGame_continue.bind(this)),i.script.animaMsg.mueve(null)},GameControl.prototype.startGame_continue=function(){adsUsados=!1,showAds(this.empezarGame_despuesDeAds.bind(this))},GameControl.prototype.empezarGame_despuesDeAds=function(){"start"!=currentGamePlay&&PokiSDK.gameplayStart(),currentGamePlay="start",this.screen2D.findByName("botonTuto").enabled=!1,this.timeTXT.element.text=gameTime.toString().toHHMMSS(),this.gameTime=gameTime,this.introductionCamera.enabled=!1,this.normalCamera.enabled=!0,theFinal=!1,_sonidos.play("musicIngame"),muteMusic(),onGameStart(),this.intervalTime=setInterval(this.timeCounter.bind(this),1e3),pause=!1,this.scoreOverScreen(!0);var e=this.screen2D.findByName("muteb");createEvents(e,!1),createEvents(e,!0,1,this.clickMuteButton.bind(this)),skipMenu=!1,this.entry=0,this.createOilEffect(800),setTimeout(function(){_fps.ini()}.bind(this),300),interactiveTutorial&&setTimeout(function(){this.bowlingBall.script.bowlingBallControl.ballTutorial.children[4].enabled=!0}.bind(this),800)},GameControl.prototype.createOilEffect=function(e){this.screen2D.findByName("oilFactor");creaAceite(50),this.entry=this.entry+1},GameControl.prototype.clickMuteButton=function(){var e=this.screen2D.findByName("muteb");0==muteSound?(e.script.animaMsg.clickBoton(null,!1,1),mute(1)):(e.script.animaMsg.clickBoton(null,!1,0),mute(0))},GameControl.prototype.clickTutorialButton=function(){if(0==trowBallState){playSound("click"),trowBallState=-1;var e=this.screen2D.findByName("tutorial");e.enabled=!0,e.enabled=!1,setTimeout(this.showTutorial.bind(this),30)}},GameControl.prototype.showTutorial=function(){var e=this.screen2D.findByName("tutorial");e.enabled=!0;var t=e.findByName("boton");this.indexTutorial=1,createEvents(t,!0,1,this.clickTutorial.bind(this)),this.tutorialOnScreen()},GameControl.prototype.tutorialOnScreen=function(){for(var e=this.screen2D.findByName("tutorial"),t=1;t<=3;t++){var i=e.findByName("indicator"+t),r=e.findByName("tuto"+t);i.enabled=!0,r.enabled=!0,1==t?r.script.animaTexturas.inicioAnim(null,0,31):2==t?r.script.animaTexturas.inicioAnim(null,0,50):r.script.animaMsg.animaMano(0)}},GameControl.prototype.clickTutorial=function(){playSound("click"),this.killTutorial()},GameControl.prototype.killTutorial=function(){var e=this.screen2D.findByName("tutorial");if(e.enabled){for(var t=1;t<=3;t++){var i=e.findByName("indicator"+t),r=e.findByName("tuto"+t);if(1==t)r.script.animaTexturas.stopAnim();else if(2==t)r.script.animaTexturas.stopAnim();else{r.script.animaMsg.detieneMano();var n=r.getLocalPosition();r.setLocalPosition(0,n.y,n.z)}i.enabled=!1,r.enabled=!1}var a=e.findByName("boton");createEvents(a,!1),e.enabled=!1,trowBallState=0,this.indexTutorial=1}},GameControl.prototype.timeCounter=function(){if(!pause){if(console.log("el tiempo!! "+this.gameTime),interactiveTutorial||(this.gameTime=this.gameTime-1),this.gameTime<0&&(this.gameTime=0),this.timeTXT.element.text=this.gameTime.toString().toHHMMSS(),this.gameTime<10&&this.timeTXT.element.color.toString()==colorNormal){var e=new pc.Color;this.timeTXT.element.color=e.fromString(colorParpadeo),0!=trowBallState||_sonidos.slot("pocoTiempo").isPlaying||pause||playSound("pocoTiempo")}else this.gameTime<10&&(0!=trowBallState||_sonidos.slot("pocoTiempo").isPlaying||pause||playSound("pocoTiempo"),this.timeTXT.script.parpadear.autoStart=2);0==this.gameTime&&(_sonidos.stop("pocoTiempo"),clearInterval(this.intervalTime),this.timeTXT.script.parpadear.autoStart=0,this.timeTXT.element.enabled=!0,timeEnd=!0,this.checkGameEnd("gameOver"))}},GameControl.prototype.resetScore=function(){for(var e=this.screen2D.findByName("score"),t=this.screen2D.findByName("pinos"),i=0;i<10;i++){var r=e.findByName("e"+(i+1)+"_1").element,n=e.findByName("e"+(i+1)+"_2").element,a=e.findByName("e"+(i+1)+"_t").element;if(this.pointsArray[i]=t.findByName("p"+(i+1)),r.text="",n.text="",a.text="",this.arrayScore[i]=[r,n,a],i==finalEntry){var s=e.findByName("e"+(i+1)+"_3").element;this.arrayScore[i]=[],this.arrayScore[i]=[r,n,s,a],s.text=""}}},GameControl.prototype.throwReset=function(e){if(specialEntry>0)this.methodSpecialEntry();else if(throwNumber+=1,2==throwNumber){for(var t=this.pins.children.length,i=0,r=!1,n=0,a=0;a<t;a++){var s=this.pins.children[a];e||s.script.pinPhysics.pinHitted>0&&(i+=1),this.pointsArray[s.script.pinPhysics.index-1].enabled=!0}e?r=2:(n=i-this.arrayScore[entry][throwNumber-2].text,arrayScores[entry+1][throwNumber]=n,new ScoreClass(this.screen2D.findByName("score"),arrayScores,entry+1,throwNumber),this.setScore(n,entry+1),r=10==i?1:0==n?onGutter?4:3:5),entry==finalEntry&&1==r?(specialEntry=1,throwNumber=2,this.throwingStart(r,"reset",n)):entry==finalEntry&&2==r?(specialEntry=2,throwNumber=1,this.throwingStart(r,"reset",n)):entry==finalEntry?this.throwingStart(r,"gameOver",n):(this.frames=this.frames+" ",throwNumber=0,entry+=1,this.throwingStart(r,"reset",n))}else{for(i=0,t=this.pins.children.length,a=0;a<t;a++){(s=this.pins.children[a]).script.pinPhysics.pinHitted>0&&(i+=1,this.pointsArray[s.script.pinPhysics.index-1].enabled=!1),currentPinsFallen=i}arrayScores[entry+1][throwNumber]=i,new ScoreClass(this.screen2D.findByName("score"),arrayScores,entry+1,throwNumber),this.setScore(i,entry+1),this.screen2D.findByName("score").findByName("e"+(entry+1)+"_2").element.text="",i==t?this.throwReset(!0):0==i?onGutter?this.throwingStart(4,""):this.throwingStart(3,""):this.throwingStart(5,"",i)}},GameControl.prototype.methodSpecialEntry=function(e){if(throwNumber+=1,3==throwNumber){e=!1;for(var t=0,i=this.pins.children.length,r=0;r<i;r++){(n=this.pins.children[r]).script.pinPhysics.pinHitted>0&&(t+=1,this.pointsArray[n.script.pinPhysics.index-1].enabled=!1),currentPinsFallen=t}arrayScores[entry+1][2]==i||arrayScores[entry+1][1]+arrayScores[entry+1][2]==i&&10!=arrayScores[entry+1][1]?t==i&&(e=!0,a=2):t-=arrayScores[entry+1][2],arrayScores[entry+1][throwNumber]=t,new ScoreClass(this.screen2D.findByName("score"),arrayScores,entry+1,throwNumber),this.setScore(t,entry+1),e||(a=t+arrayScores[entry+1][2]==i?1:t>0?5:onGutter?4:3),this.throwingStart(a,"gameOver",t)}else{for(t=0,i=this.pins.children.length,r=0;r<i;r++){var n;(n=this.pins.children[r]).script.pinPhysics.pinHitted>0&&(t+=1,this.pointsArray[n.script.pinPhysics.index-1].enabled=!1),currentPinsFallen=t}e=!1;if(1==throwNumber&&t==i?e=!0:2==throwNumber&&(10==arrayScores[entry+1][1]&&t==i?e=!0:10==arrayScores[entry+1][1]&&t!=i?t=t:10!=arrayScores[entry+1][1]&&(t-=arrayScores[entry+1][1])),arrayScores[entry+1][throwNumber]=t,new ScoreClass(this.screen2D.findByName("score"),arrayScores,entry+1,throwNumber),this.setScore(t,entry+1),1==throwNumber?(this.screen2D.findByName("score").findByName("e10_2").element.text="",this.screen2D.findByName("score").findByName("e10_3").element.text=""):2==throwNumber&&(this.screen2D.findByName("score").findByName("e10_3").element.text=""),e){console.log("esta es la entry "+throwNumber+"  y fue strike");var a=2;this.throwingStart(a,"reset",10)}else 1==throwNumber?0==t?onGutter?this.throwingStart(4,""):this.throwingStart(3,""):this.throwingStart(5,"",t):2==throwNumber&&(10!=arrayScores[entry+1][1]&&t+arrayScores[entry+1][1]==10?this.throwingStart(1,"reset",t):10!=arrayScores[entry+1][1]?0==t?onGutter?this.throwingStart(4,"gameOver"):this.throwingStart(3,"gameOver"):this.throwingStart(5,"gameOver",t):10==arrayScores[entry+1][1]&&(0==t?onGutter?this.throwingStart(4,""):this.throwingStart(3,""):this.throwingStart(5,"",t)))}},GameControl.prototype.throwingStart=function(e,t,i){if(0==e)this.gameTime<2||"gameOver"==t||timeEnd?this.volverATirarMetodo(e,t,i):showAds(this.volverATirarMetodo.bind(this,e,t,i));else if(1==e){playSound("spare"),(r=this.screen2D.findByName("spare")).enabled=!0,r.script.animaMsg.pone(this.throwingStart.bind(this,0,t)),PokiSDK.happyTime(.7)}else if(2==e){playSound("strikeM"),(r=this.screen2D.findByName("strike")).enabled=!0,r.script.animaMsg.pone(this.throwingStart.bind(this,0,t)),PokiSDK.happyTime(1)}else if(3==e){playSound("missGutter"),(r=this.screen2D.findByName("miss")).enabled=!0,r.script.animaMsg.pone(this.throwingStart.bind(this,0,t))}else if(4==e){playSound("missGutter"),(r=this.screen2D.findByName("gutter")).enabled=!0,r.script.animaMsg.pone(this.throwingStart.bind(this,0,t))}else if(5==e){playSound("pinosTirar");var r=this.screen2D.findByName("pins");PokiSDK.happyTime(.3),1==i&&(r=this.screen2D.findByName("pin"),PokiSDK.happyTime(.1)),r.enabled=!0,r.script.animaMsg.pone(this.throwingStart.bind(this,0,t)),(r=this.screen2D.findByName("numberPins")).enabled=!0,r.script.animaMsg.pone(null),r.script.animaTexturas.inicioAnim(null,0,i)}},GameControl.prototype.volverATirarMetodo=function(e,t,i){var r=this.screen2D.findByName("spare");if(r.enabled=!1,(r=this.screen2D.findByName("strike")).enabled=!1,(r=this.screen2D.findByName("gutter")).enabled=!1,(r=this.screen2D.findByName("miss")).enabled=!1,(r=this.screen2D.findByName("numberPins")).enabled=!1,r=this.screen2D.findByName("pins"),(r=this.screen2D.findByName("pin")).enabled=!1,"reset"==t||"gameOver"==t)this.resetPins();else if(""==t)for(var n=this.pins.children.length,a=0;a<n;a++){var s=this.pins.children[a];s.script.pinPhysics.pinHitted>0?s.script.pinPhysics.turnOff():s.script.pinPhysics.reset()}this.bowlingBall.script.bowlingBallControl.REinitialize(),this.pinsReplacer.script.pinsReplacer.putReplacer(t,timeEnd),this.scoreOverScreen(!0),("gameOver"==t||timeEnd)&&this.preGameOver()},GameControl.prototype.checkGameEnd=function(e){0!=trowBallState||"gameOver"!=e&&!timeEnd||theFinal||(console.log("llamo al pregameOver"),this.preGameOver())},GameControl.prototype.preGameOver=function(){theFinal||(onGameEnd(),timeEnd||(this.conExit=!0),"stop"!=currentGamePlay&&PokiSDK.gameplayStop(),currentGamePlay="stop",theFinal=!0,clearInterval(this.intervalTime),_sonidos.stop("pocoTiempo"),this.timeTXT.script.parpadear.autoStart=0,this.timeTXT.element.enabled=!0,continuePanel=this.screen2D.findByName("continuePanel"),poneContinue(this),timeEnd||(this.conExit=!1))},GameControl.prototype.continueYES=function(){this.gameTime=this.gameTime+tiempoExtra,theFinal=!1,timeEnd=!1,trowBallState=0,this.intervalTime=setInterval(this.timeCounter.bind(this),1e3);var e=new pc.Color;this.timeTXT.element.color=e.fromString(colorNormal),this.timeTXT.element.text=this.gameTime.toString().toHHMMSS()},GameControl.prototype.continueNO=function(){if(skipMenu)this.finalQuick();else{if(timeEnd){console.log("toco el gutter");var e=this.screen2D.findByName("timeOut");e.enabled=!0,e.script.animaMsg.pone(null),playSound("missGutter")}else playSound("spare");setTimeout(this.showFinalScore.bind(this),1400)}},GameControl.prototype.forzeGameEnding=function(){this.gameTime=0,this.screen2D.findByName("Logo").enabled&&this.startGame()},GameControl.prototype.finalQuick=function(){setTimeout(this.gameEnding.bind(this),100)},GameControl.prototype.showFinalScore=function(){if(!this.normalCamera.script.bloom.enabled){var e=this.screen2D.findByName("endScore"),t=e.children[2],i=e.children[3];t.element.text=this.currentScore,this.currentScore>bestScore&&(bestScore=this.currentScore),i.element.text=bestScore,""==i.element.text&&(i.element.text="0"),saveVars(bestScore,"bestScore"),""==t.element.text&&(t.element.text="0"),e.script.animaMsg.pone1Vez(this.putFinalTap.bind(this)),this.normalCamera.script.bloom.enabled=!0}},GameControl.prototype.putFinalTap=function(){var e=this.screen2D.findByName("tap");e.enabled=!0,e.script.animaMsg.traduce(0),isMobile.any()?this.app.touch.off(pc.EVENT_TOUCHSTART,this.gameEnding,this):this.app.mouse.off(pc.EVENT_MOUSEDOWN,this.gameEnding,this),isMobile.any()?this.app.touch.on(pc.EVENT_TOUCHSTART,this.gameEnding,this):this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.gameEnding,this)},GameControl.prototype.gameEnding=function(){this.normalCamera.script.bloom.enabled=!1;var e=this.screen2D.findByName("splashUp"),t=this.screen2D.findByName("splashDown");e.enabled=!0,t.enabled=!0,this.scoreOverScreen(!1),this.screen2D.findByName("tap").enabled=!1,playSound("click"),isMobile.any()?this.app.touch.off(pc.EVENT_TOUCHSTART,this.gameEnding,this):this.app.mouse.off(pc.EVENT_MOUSEDOWN,this.gameEnding,this),this.bowlingBall.script.bowlingBallControl.resetBola(),entry=0,throwNumber=0,specialEntry=0,this.conExit?(skipMenu=!1,this.conExit=!1):skipMenu=!0,e.script.animaMsg.mueve(this.introStarts.bind(this)),t.script.animaMsg.mueve(null)},GameControl.prototype.resetPins=function(){for(var e=this.pins.children.length,t=0;t<e;t++){var i=this.pins.children[t];i.script.pinPhysics.turnOff(),i.script.pinPhysics.reset()}},GameControl.prototype.scoreOverScreen=function(e){var t=this.screen2D.findByName("score"),i=this.screen2D.findByName("pinos"),r=this.screen2D.findByName("time"),n=this.screen2D.findByName("barraTime"),a=this.screen2D.findByName("player1"),s=this.screen2D.findByName("player2"),o=this.screen2D.findByName("muteb"),c=(this.screen2D.findByName("botonTuto"),this.screen2D.findByName("barraSpin")),l=this.screen2D.findByName("puntitoSpin"),m=this.screen2D.findByName("oilFactor"),h=this.screen2D.findByName("hintSpin");e?(interactiveTutorial||(t.script.mueveScoreHud.pone(),i.script.mueveScoreHud.pone(),r.script.mueveScoreHud.pone(),n.script.mueveScoreHud.pone(),a.script.mueveScoreHud.pone(),s.script.mueveScoreHud.pone(),o.setLocalPosition(0,190,0),o.script.mueveScoreHud.pone(),c.script.mueveScoreHud.pone(),l.script.mueveScoreHud.pone(),m.script.mueveScoreHud.pone(),setTimeout(function(){h.script.mueveScoreHud.pone()},150)),interactiveTutorial?h.enabled=!1:this.firstExecution?h.enabled=!1:(this.firstExecution=!0,h.enabled=!0)):(t.script.mueveScoreHud.saca(),i.script.mueveScoreHud.saca(),r.script.mueveScoreHud.saca(),n.script.mueveScoreHud.saca(),a.script.mueveScoreHud.saca(),s.script.mueveScoreHud.saca(),o.script.mueveScoreHud.saca(),c.script.mueveScoreHud.saca(),l.script.mueveScoreHud.saca(),m.script.mueveScoreHud.saca(),h.script.mueveScoreHud.saca())},GameControl.prototype.setScore=function(e,t){if(0!=t){var i=this.screen2D.findByName("score").findByName("e"+t+"_t"),r=i.element.text,n=i.enabled;if(""!=r&&n){var a=r-_globalScore;_globalScore=r,this.screen2D.findByName("player1").findByName("texto").element.text=r,a>0&&onGameUpdate(a),this.currentScore=r}else this.setScore(e,t-1)}},GameControl.prototype.update=function(e){isMobile.any()&&(window.innerHeight<window.innerWidth?this.rotate.enabled||(this.rotate.enabled=!0):window.innerHeight>window.innerWidth&&this.rotate.enabled&&(this.rotate.enabled=!1))};var MueveScoreHud=pc.createScript("mueveScoreHud");MueveScoreHud.attributes.add("tipo",{type:"string",default:"",title:"tipo"}),MueveScoreHud.prototype.initialize=function(){this.tween=null;var e=this.entity.getLocalPosition();this.origen=new pc.Vec3(e.x,e.y,e.z);window.innerWidth,window.innerHeight;isMobile.any()||(this.app.graphicsDevice.width,this.app.graphicsDevice.height);var t=_control.screen2D.screen.scaleBlend;_control.screen2D.screen.scaleBlend,_control.screen2D.screen.referenceResolution.x,_control.screen2D.screen.resolution.x,_control.screen2D.screen.referenceResolution.y,_control.screen2D.screen.resolution.y;var i=0;"score"==this.tipo?i=-64:"time"==this.tipo?i=0:"spin"==this.tipo?i=29.5:"mute"==this.tipo?i=-259:"tuto"==this.tipo&&(i=-202),"oilFactor"==this.tipo&&(i=29.5),this.destino=new pc.Vec3(0,i,0),"oilFactor"==this.tipo&&(this.destino=new pc.Vec3(0,this.entity.getLocalPosition().y,0))},MueveScoreHud.prototype.update=function(e){},MueveScoreHud.prototype.pone=function(){this.tween=this.entity.tween(this.entity.getLocalPosition()).to(this.destino,.6,pc.SineOut),this.tween.start()},MueveScoreHud.prototype.saca=function(){this.tween=this.entity.tween(this.entity.getLocalPosition()).to(this.origen,.5,pc.SineIn),this.tween.start()};var AnimaUvs=pc.createScript("animaUvs");AnimaUvs.attributes.add("material",{type:"asset",assetType:"material",array:!1}),AnimaUvs.attributes.add("speed",{type:"number",default:.01,title:"speed"}),AnimaUvs.attributes.add("eje",{type:"number",default:0,title:"ejeX_o_Y"}),AnimaUvs.attributes.add("loop",{type:"number",default:1,title:"LOOP"}),AnimaUvs.attributes.add("desde",{type:"number",default:0,title:"desde"}),AnimaUvs.attributes.add("hasta",{type:"number",default:1,title:"hasta"}),AnimaUvs.attributes.add("activado",{type:"number",default:1,title:"activado"}),AnimaUvs.attributes.add("tipoMaterial",{type:"string",default:"opacityMapOffset",title:"opacityMapOffset"}),AnimaUvs.prototype.initialize=function(){this.materialCargado=this.material.resource},AnimaUvs.prototype.setIntervalo=function(a,t){this.desde=a,this.hasta=t,"difuse_opacity"==this.tipoMaterial?(console.log(this.materialCargado),this.materialCargado.diffuseMapOffset=new pc.Vec2(0,a),this.materialCargado.opacityMapOffset=new pc.Vec2(0,a)):this.materialCargado[this.tipoMaterial]=new pc.Vec2(0,a),this.materialCargado.update()},AnimaUvs.prototype.resetMaterial=function(a){this.materialCargado[this.tipoMaterial]=new pc.Vec2(0,0),this.materialCargado.update(),this.entity.enabled=!0,this.eje=a,this.activado=1},AnimaUvs.prototype.update=function(a){if(0!=this.activado){var t;switch(this.tipoMaterial){case"opacityMapOffset":t=this.materialCargado.opacityMapOffset;break;case"diffuseMapOffset":t=this.materialCargado.diffuseMapOffset;break;case"emissiveMapOffset":t=this.materialCargado.emissiveMapOffset;break;case"difuse_opacity":(t=[])[0]=this.materialCargado.opacityMapOffset,t[1]=this.materialCargado.diffuseMapOffset,t[2]=this.materialCargado.emissiveMapOffset}if(0==this.eje){var e=("difuse_opacity"==this.tipoMaterial?t[0].y:t.y)-a*this.speed;if(this.desde<this.hasta?e<0&&(0==this.loop?(e=0,this.activado=0):e=1):e<this.hasta&&(0==this.loop?(e=this.hasta,this.activado=0):e=this.desde),"difuse_opacity"==this.tipoMaterial){this.materialCargado.diffuseMapOffset=new pc.Vec2(0,e);var i=t[1].y-a*this.speed;this.materialCargado.opacityMapOffset=new pc.Vec2(0,i)}else this.materialCargado[this.tipoMaterial]=new pc.Vec2(0,e);this.materialCargado.update()}else if(1==this.eje){e=("difuse_opacity"==this.tipoMaterial?t[0].x:t.x)-a*this.speed;this.desde<this.hasta?e<0&&(0==this.loop?(e=0,this.activado=0):e=1):e<this.hasta&&(0==this.loop?(e=this.hasta,this.activado=0,setTimeout(this.apagaObjeto.bind(this),20)):e=this.desde),"difuse_opacity"==this.tipoMaterial?(this.materialCargado.diffuseMapOffset=new pc.Vec2(e,0),this.materialCargado.opacityMapOffset=new pc.Vec2(e,0),this.materialCargado.emissiveMapOffset=new pc.Vec2(e,0)):this.materialCargado[this.tipoMaterial]=new pc.Vec2(e,0),this.materialCargado.update()}}},AnimaUvs.prototype.apagaObjeto=function(){this.entity.enabled=!1};var SpinControl=pc.createScript("spinControl");SpinControl.attributes.add("spinEffect",{type:"entity",title:"spinEffect"}),SpinControl.attributes.add("hitBoxBowlingBall",{type:"entity",title:"hitBoxBowlingBall"}),SpinControl.attributes.add("spinExplo",{type:"entity",title:"spinExplo"}),SpinControl.prototype.initialize=function(){this.putEvents(),this.onTap=!1,this.tip=0,this.xIni=0,this.spinControl=this.spinEffect.script.animaUvs,this.alfaControl=this.spinEffect.script.animaAlfa3d;var i=960,t=window.innerWidth,n=window.innerHeight;isMobile.any()||(t=this.app.graphicsDevice.width/window.devicePixelRatio,n=this.app.graphicsDevice.height/window.devicePixelRatio),window.innerWidth>window.innerHeight&&(960,i=540),this.middleX=t/2,console.log("este ?? "+this.middleX),this._scale=n/i,this.iniPointX=this.middleX-330*this._scale/2,this.endPointX=this.middleX+330*this._scale/2,this.setColiderBowlingBall()},SpinControl.prototype.reset=function(){this.onTap=!1,this.tip=0,this.xIni=0,this.hitBoxBowlingBall.collision.radius=.06},SpinControl.prototype.update=function(i){if(0==trowBallState){this.spinEffect.enabled||0==spin&&(this.spinEffect.enabled=!0,this.tip=this.entity.getLocalPosition().x);var t=263;spin<0&&(t=-263);var n=3.6,o=0,e=.1,s=(e-n)/(o-t),l=s*(spin-t)+n;spin>0&&(l=-l),this.spinControl.speed=l,this.exploControl(spin),l=(s=((e=.12)-(n=1))/((o=0)-(t=spin<0?-263:263)))*(spin-t)+n,this.alfaControl.setAlfa(l),this.setColiderBowlingBall()}else this.hitBoxBowlingBall.getPosition().z<-6.3&&.065!=this.hitBoxBowlingBall.collision.radius&&(this.hitBoxBowlingBall.collision.radius=.065,this.spinEffect.enabled=!1)},SpinControl.prototype.exploControl=function(i){var t=-.8/-263*((i=Math.abs(i))-263)+1;this.spinExplo.setLocalScale(t,t,t)},SpinControl.prototype.putEvents=function(i){createEvents(this.entity,!0,1,this.downButton.bind(this)),createEvents(this.entity,!0,2,this.upButton.bind(this)),createEvents(this.entity,!0,3,this.moveButton.bind(this)),this.entity.element.on("mouseleave",this.onMouseLeave.bind(this))},SpinControl.prototype.onMouseLeave=function(i){this.upButton()},SpinControl.prototype.removeEvents=function(i){createEvents(this.entity,!1),createEvents(this.entity,!1),createEvents(this.entity,!1)},SpinControl.prototype.downButton=function(i){var t,n=960,o=window.innerWidth,e=window.innerHeight;if(isMobile.any()||(o=this.app.graphicsDevice.width/window.devicePixelRatio,e=this.app.graphicsDevice.height/window.devicePixelRatio),window.innerWidth>window.innerHeight&&(960,n=540),console.log(o),this.middleX=o/2,this._scale=e/n,this.iniPointX=this.middleX-330*this._scale/2,this.endPointX=this.middleX+330*this._scale/2,isMobile.any()){var s=i.touches[0];t=s.clientX,s.clientY}else t=i.x,i.y;console.log(i.x),this.xIni=t,this.onTap=!0},SpinControl.prototype.upButton=function(i){this.onTap=!1,this.xIni=null,this.tip=this.entity.getLocalPosition().x},SpinControl.prototype.moveButton=function(i){if(this.onTap){var t;if(isMobile.any()){var n=i.touches[0];t=n.clientX,n.clientY}else t=i.x,i.y;console.log(" middleX "+this.middleX),console.log("endPointX "+this.endPointX);var o=this.middleX,e=263/(this.endPointX-o)*(t-o)+0,s=this.entity.getLocalPosition();this.entity.setLocalPosition(e,s.y,s.z),(s=this.entity.getLocalPosition()).x<-263?this.entity.setLocalPosition(-263,s.y,s.z):s.x>263&&this.entity.setLocalPosition(263,s.y,s.z),spin=s.x}},SpinControl.prototype.setColiderBowlingBall=function(){var i=-263;if(this.entity.getLocalPosition().x>0)i=263;var t=(.0515-.086)/(0-i)*(this.tip-i)+.086;t>=.062&&(t=.062),hitBox=t};var AnimaAlfa3d=pc.createScript("animaAlfa3d");AnimaAlfa3d.attributes.add("material",{type:"asset",assetType:"material",array:!1}),AnimaAlfa3d.attributes.add("speed",{type:"number",default:.01,title:"speed"}),AnimaAlfa3d.attributes.add("desde",{type:"number",default:0,title:"desde"}),AnimaAlfa3d.attributes.add("hasta",{type:"number",default:1,title:"hasta"}),AnimaAlfa3d.attributes.add("delay",{type:"number",default:0,title:"delay"}),AnimaAlfa3d.attributes.add("loop",{type:"number",default:1,title:"LOOP"}),AnimaAlfa3d.attributes.add("apagaAlTerminar",{type:"number",default:1,title:"apagaAlTerminar"}),AnimaAlfa3d.attributes.add("tipoMaterial",{type:"string",default:"opacity",title:"opacity"}),AnimaAlfa3d.attributes.add("finAnim",{type:"number",default:1,title:"finAnim"}),AnimaAlfa3d.prototype.initialize=function(){this.sentido=0,this.contadorDelay=0,this.materialCargado=this.material.resource,this.desde<this.hasta?this.sentido=1:this.sentido=-1,this.resetMaterial()},AnimaAlfa3d.prototype.empiezaAnim=function(t,a,i,e){this.entity.enabled=!0,this.desde=t,this.hasta=a,null!=i&&(this.delay=i),null!=e&&(this.speed=e),this.desde<this.hasta?this.sentido=1:this.sentido=-1,this.contadorDelay=0,this.resetMaterial(),this.finAnim=0},AnimaAlfa3d.prototype.setAlfa=function(t){this.materialCargado[this.tipoMaterial]=t,this.materialCargado.update()},AnimaAlfa3d.prototype.resetMaterial=function(t){this.materialCargado[this.tipoMaterial]=this.desde,this.materialCargado.update()},AnimaAlfa3d.prototype.update=function(t){if(1!=this.finAnim)if(this.contadorDelay<this.delay)this.contadorDelay=this.contadorDelay+t;else{var a,i=this.materialCargado.opacity,e=!1;(a=-1==this.sentido?i-t*this.speed:i+t*this.speed)<=0?(e=!0,a=0):a>=1&&(e=!0,a=1),this.materialCargado[this.tipoMaterial]=a,this.materialCargado.update(),e&&(1==this.loop?this.empiezaAnim(this.desde,this.hasta):(this.finAnim=1,setTimeout(this.apagaObjeto.bind(this),.1)))}},AnimaAlfa3d.prototype.apagaObjeto=function(){1==this.finAnim&&(this.entity.enabled=!1)},AnimaAlfa3d.prototype.terminaAnim=function(){this.finAnim=1};var PhysicsLayer=pc.createScript("physicsLayer");PhysicsLayer.attributes.add("groupA",{type:"boolean",default:!1,title:"Group A"}),PhysicsLayer.attributes.add("groupB",{type:"boolean",default:!1,title:"Group B"}),PhysicsLayer.attributes.add("groupC",{type:"boolean",default:!1,title:"Group C"}),PhysicsLayer.attributes.add("groupD",{type:"boolean",default:!1,title:"Group D"}),PhysicsLayer.attributes.add("maskAll",{type:"boolean",default:!0,title:"Mask All"}),PhysicsLayer.attributes.add("maskA",{type:"boolean",default:!1,title:"Mask A"}),PhysicsLayer.attributes.add("maskB",{type:"boolean",default:!1,title:"Mask B"}),PhysicsLayer.attributes.add("maskC",{type:"boolean",default:!1,title:"Mask C"}),PhysicsLayer.attributes.add("maskD",{type:"boolean",default:!1,title:"Mask D"}),PhysicsLayer.prototype.initialize=function(){var t=this.entity.rigidbody;this.groupA&&(t.group|=pc.BODYGROUP_USER_1),this.groupB&&(t.group|=pc.BODYGROUP_USER_2),this.groupC&&(t.group|=pc.BODYGROUP_USER_3),this.groupD&&(t.group|=pc.BODYGROUP_USER_4),t.mask=pc.BODYGROUP_TRIGGER,this.maskAll&&(t.mask|=pc.BODYMASK_ALL),this.maskA&&(t.mask|=pc.BODYGROUP_USER_1),this.maskB&&(t.mask|=pc.BODYGROUP_USER_2),this.maskC&&(t.mask|=pc.BODYGROUP_USER_3),this.maskD&&(t.mask|=pc.BODYGROUP_USER_4)};var TriggerLayer=pc.createScript("triggerLayer");TriggerLayer.attributes.add("groupA",{type:"boolean",default:!1,title:"Group A"}),TriggerLayer.attributes.add("groupB",{type:"boolean",default:!1,title:"Group B"}),TriggerLayer.attributes.add("groupC",{type:"boolean",default:!1,title:"Group C"}),TriggerLayer.attributes.add("groupD",{type:"boolean",default:!1,title:"Group D"}),TriggerLayer.prototype.initialize=function(){var r=this.entity.trigger.body,t=4;this.groupA&&(t|=pc.BODYGROUP_USER_1),this.groupB&&(t|=pc.BODYGROUP_USER_2),this.groupC&&(t|=pc.BODYGROUP_USER_3),this.groupD&&(t|=pc.BODYGROUP_USER_4),r.setCollisionFlags(t)};"use strict";var ScoreClass=function(){function ScoreClass(e,t,r,i){this.scoreArray=[],this.totalScoreArray=[],this.bonusScoreArray=[],this.showScoreArray=[],this.entityScore=e,this.scoreArray=t,this.initializeArrays(),this.setScore(r,i)}return ScoreClass.prototype.initializeArrays=function(){for(var e=1;e<=10;e++){this.bonusScoreArray[e]=0,this.showScoreArray[e]=!1,this.entityScore.findByName("e"+e+"_t").element.text="";for(var t=1;t<=2;t++)this.entityScore.findByName("e"+e+"_"+t).element.text="";10==e&&(this.entityScore.findByName("e"+e+"_"+t).element.text="")}},ScoreClass.prototype.getScore=function(e){return 1==e?this.totalScoreArray[e]+this.bonusScoreArray[e]:this.totalScoreArray[e]+this.bonusScoreArray[e]+this.getScore(e-1)},ScoreClass.prototype.setScore=function(e,t){var r=2;10==e&&(r=3);for(var i=1;i<=e;i++){this.showScoreArray[i]=!0;for(var s=1;s<=r;s++){if(10==e?e==i&&(this.showScoreArray[i]=s<t&&3==s):e==i&&(this.showScoreArray[i]=s<t&&2==s),i<10){if(3==s)break;s<3&&(" "==this.entityScore.findByName("e"+i+"_"+s).element.text?this.entityScore.findByName("e"+i+"_"+s).element.text="":this.entityScore.findByName("e"+i+"_"+s).element.text=this.scoreArray[i][s])}else" "==this.entityScore.findByName("e"+i+"_"+s).element.text?this.entityScore.findByName("e"+i+"_"+s).element.text="":this.entityScore.findByName("e"+i+"_"+s).element.text=this.scoreArray[i][s];try{var o=parseInt(this.entityScore.findByName("e"+i+"_t").element.text);""==this.entityScore.findByName("e"+i+"_t").element.text&&(o=0),this.entityScore.findByName("e"+i+"_t").element.text=o+this.scoreArray[i][s]}catch(e){console.log("error")}if(10!=i)switch(s){case 1:10==this.scoreArray[i][1]&&(this.entityScore.findByName("e"+i+"_1").element.text="X",this.entityScore.findByName("e"+i+"_2").element.text=" ",this.showScoreArray[i]=!1);break;case 2:this.scoreArray[i][1]+this.scoreArray[i][2]==10&&10!=this.scoreArray[i][1]&&(this.entityScore.findByName("e"+i+"_2").element.text="/",this.showScoreArray[i]=!1)}else switch(this.showScoreArray[i]=!1,s){case 1:10==this.scoreArray[i][1]&&(this.entityScore.findByName("e"+i+"_1").element.text="X");break;case 2:10==this.scoreArray[i][1]&&10==this.scoreArray[i][2]?this.entityScore.findByName("e"+i+"_2").element.text="X":10!=this.scoreArray[i][1]&&this.scoreArray[i][1]+this.scoreArray[i][2]==10&&(this.entityScore.findByName("e"+i+"_2").element.text="/");break;case 3:10!=this.scoreArray[i][2]&&this.scoreArray[i][2]+this.scoreArray[i][3]==10?this.entityScore.findByName("e"+i+"_3").element.text="/":10==this.scoreArray[i][3]&&(this.entityScore.findByName("e"+i+"_3").element.text="X")}}if(10!=this.totalScoreArray[i]){o=parseInt(this.entityScore.findByName("e"+i+"_t").element.text);""==this.entityScore.findByName("e"+i+"_t").element.text&&(o=0),this.totalScoreArray[i]=o}}this.strikeScore(e,t),10==e&&(3==t?this.showScoreArray[10]=!0:2==t&&this.totalScoreArray[10]<10&&(this.showScoreArray[10]=!0));for(i=1;i<=e;i++)1==this.showScoreArray[i]?(this.entityScore.findByName("e"+i+"_t").element.text=this.getScore(i),this.entityScore.findByName("e"+i+"_t").enabled=!0):this.entityScore.findByName("e"+i+"_t").enabled=!1},ScoreClass.prototype.bonusRestart=function(){for(var e=1;e<=10;e++)this.bonusScoreArray[e]=0},ScoreClass.prototype.strikeScore=function(e,t){var r,i=0,s=!1;e<=9?r=e:(r=9,s=!0),this.bonusRestart();for(var o=1;o<=r&&(1!=s||9!=o);o++)if("X"==this.entityScore.findByName("e"+o+"_1").element.text){i=0;for(var a=o+1;a<=o+2;a++){if(a>r){if(0==s&&o<8)break;if(1==s){if(a>10)break}else if(a>r)break}if(i+=1,"X"==this.entityScore.findByName("e"+a+"_1").element.text)this.bonusScoreArray[o]=this.bonusScoreArray[o]+10,2==i&&(this.showScoreArray[o]=!0);else{if(1==i){this.bonusScoreArray[o]=this.bonusScoreArray[o]+this.totalScoreArray[a],""!=this.entityScore.findByName("e"+a+"_2").element.text&&"Na"!=this.entityScore.findByName("e"+a+"_2").element.text&&(this.showScoreArray[o]=!0,a==r&&1==t&&0==s&&(this.showScoreArray[o]=!1));break}this.bonusScoreArray[o]=this.bonusScoreArray[o]+this.scoreArray[a][1],this.showScoreArray[o]=!0}}}else if("/"==this.entityScore.findByName("e"+o+"_2").element.text)for(a=o+1;a<=o+1;a++){if(a>r){if(0==s&&o<8)break;if(1==s){if(a>10)break}else if(a>r)break}"X"==this.entityScore.findByName("e"+a+"_1").element.text?(this.bonusScoreArray[o]=this.bonusScoreArray[o]+10,this.showScoreArray[o]=!0):(this.bonusScoreArray[o]=this.bonusScoreArray[o]+this.scoreArray[a][1],this.showScoreArray[o]=!0)}else 2==t&&(this.showScoreArray[o]=!0);if(1==s)if(o=9,"X"==this.entityScore.findByName("e"+o+"_1").element.text)for(a=1;a<=2;a++)"X"==this.entityScore.findByName("e10_"+a).element.text?this.bonusScoreArray[o]=this.bonusScoreArray[o]+10:this.bonusScoreArray[o]=this.bonusScoreArray[o]+this.scoreArray[10][a],2==a&&t>1&&(this.showScoreArray[o]=!0);else if("/"==this.entityScore.findByName("e"+o+"_2").element.text){for(a=1;a<=1;a++)"X"==this.entityScore.findByName("e10_"+a).element.text?this.bonusScoreArray[o]=this.bonusScoreArray[o]+10:this.bonusScoreArray[o]=this.bonusScoreArray[o]+this.scoreArray[10][a];2==a&&t>1&&(this.showScoreArray[o]=!0)}},ScoreClass}();var EfectoAgranda=pc.createScript("efectoAgranda");EfectoAgranda.attributes.add("duracion",{type:"number",title:"duracion"}),EfectoAgranda.prototype.initialize=function(){},EfectoAgranda.prototype.init=function(t){this.entity.setLocalScale(0,0,0),setTimeout(function(){this.tween=this.entity.tween(this.entity.getLocalScale()).to(new pc.Vec3(1.7,1.7,1.7),this.duracion,pc.Linear),this.tween.on("complete",function(){this.entity.tween(this.entity.getLocalScale()).to(new pc.Vec3(1,1,1),.25,pc.BounceOut).start()}),this.tween.start()}.bind(this),t)};var oilFactorArray=[];oilFactorArray[0]=[],oilFactorArray[0][0]=6,oilFactorArray[0][1]=96,oilFactorArray[0][2]=7,oilFactorArray[0][3]=79,oilFactorArray[0][4]=22,oilFactorArray[0][5]=57,oilFactorArray[0][6]=13,oilFactorArray[0][7]=4,oilFactorArray[0][8]=9,oilFactorArray[0][9]=34,oilFactorArray[0][10]=72,oilFactorArray[1]=[],oilFactorArray[1][0]=23,oilFactorArray[1][1]=6,oilFactorArray[1][2]=18,oilFactorArray[1][3]=8,oilFactorArray[1][4]=7,oilFactorArray[1][5]=25,oilFactorArray[1][6]=26,oilFactorArray[1][7]=34,oilFactorArray[1][8]=28,oilFactorArray[1][9]=4,oilFactorArray[1][10]=63,oilFactorArray[2]=[],oilFactorArray[2][0]=96,oilFactorArray[2][1]=70,oilFactorArray[2][2]=43,oilFactorArray[2][3]=2,oilFactorArray[2][4]=87,oilFactorArray[2][5]=55,oilFactorArray[2][6]=31,oilFactorArray[2][7]=19,oilFactorArray[2][8]=3,oilFactorArray[2][9]=55,oilFactorArray[2][10]=43,oilFactorArray[3]=[],oilFactorArray[3][0]=89,oilFactorArray[3][1]=90,oilFactorArray[3][2]=84,oilFactorArray[3][3]=84,oilFactorArray[3][4]=73,oilFactorArray[3][5]=40,oilFactorArray[3][6]=61,oilFactorArray[3][7]=13,oilFactorArray[3][8]=70,oilFactorArray[3][9]=60,oilFactorArray[3][10]=77,oilFactorArray[4]=[],oilFactorArray[4][0]=19,oilFactorArray[4][1]=99,oilFactorArray[4][2]=96,oilFactorArray[4][3]=47,oilFactorArray[4][4]=75,oilFactorArray[4][5]=47,oilFactorArray[4][6]=19,oilFactorArray[4][7]=35,oilFactorArray[4][8]=81,oilFactorArray[4][9]=89,oilFactorArray[4][10]=26,oilFactorArray[5]=[],oilFactorArray[5][0]=20,oilFactorArray[5][1]=16,oilFactorArray[5][2]=9,oilFactorArray[5][3]=26,oilFactorArray[5][4]=52,oilFactorArray[5][5]=22,oilFactorArray[5][6]=59,oilFactorArray[5][7]=48,oilFactorArray[5][8]=16,oilFactorArray[5][9]=28,oilFactorArray[5][10]=9,oilFactorArray[6]=[],oilFactorArray[6][0]=21,oilFactorArray[6][1]=46,oilFactorArray[6][2]=88,oilFactorArray[6][3]=63,oilFactorArray[6][4]=32,oilFactorArray[6][5]=4,oilFactorArray[6][6]=10,oilFactorArray[6][7]=85,oilFactorArray[6][8]=19,oilFactorArray[6][9]=74,oilFactorArray[6][10]=68,oilFactorArray[7]=[],oilFactorArray[7][0]=29,oilFactorArray[7][1]=82,oilFactorArray[7][2]=85,oilFactorArray[7][3]=10,oilFactorArray[7][4]=61,oilFactorArray[7][5]=75,oilFactorArray[7][6]=65,oilFactorArray[7][7]=40,oilFactorArray[7][8]=30,oilFactorArray[7][9]=96,oilFactorArray[7][10]=21,oilFactorArray[8]=[],oilFactorArray[8][0]=80,oilFactorArray[8][1]=70,oilFactorArray[8][2]=43,oilFactorArray[8][3]=38,oilFactorArray[8][4]=6,oilFactorArray[8][5]=70,oilFactorArray[8][6]=38,oilFactorArray[8][7]=25,oilFactorArray[8][8]=74,oilFactorArray[8][9]=18,oilFactorArray[8][10]=25,oilFactorArray[9]=[],oilFactorArray[9][0]=20,oilFactorArray[9][1]=56,oilFactorArray[9][2]=98,oilFactorArray[9][3]=64,oilFactorArray[9][4]=84,oilFactorArray[9][5]=31,oilFactorArray[9][6]=33,oilFactorArray[9][7]=40,oilFactorArray[9][8]=12,oilFactorArray[9][9]=72,oilFactorArray[9][10]=76,oilFactorArray[10]=[],oilFactorArray[10][0]=31,oilFactorArray[10][1]=83,oilFactorArray[10][2]=64,oilFactorArray[10][3]=26,oilFactorArray[10][4]=96,oilFactorArray[10][5]=23,oilFactorArray[10][6]=53,oilFactorArray[10][7]=91,oilFactorArray[10][8]=64,oilFactorArray[10][9]=92,oilFactorArray[10][10]=47,oilFactorArray[11]=[],oilFactorArray[11][0]=86,oilFactorArray[11][1]=63,oilFactorArray[11][2]=10,oilFactorArray[11][3]=76,oilFactorArray[11][4]=65,oilFactorArray[11][5]=54,oilFactorArray[11][6]=18,oilFactorArray[11][7]=33,oilFactorArray[11][8]=12,oilFactorArray[11][9]=53,oilFactorArray[11][10]=5,oilFactorArray[12]=[],oilFactorArray[12][0]=79,oilFactorArray[12][1]=57,oilFactorArray[12][2]=34,oilFactorArray[12][3]=38,oilFactorArray[12][4]=5,oilFactorArray[12][5]=34,oilFactorArray[12][6]=65,oilFactorArray[12][7]=87,oilFactorArray[12][8]=38,oilFactorArray[12][9]=41,oilFactorArray[12][10]=3,oilFactorArray[13]=[],oilFactorArray[13][0]=17,oilFactorArray[13][1]=4,oilFactorArray[13][2]=66,oilFactorArray[13][3]=94,oilFactorArray[13][4]=52,oilFactorArray[13][5]=29,oilFactorArray[13][6]=90,oilFactorArray[13][7]=56,oilFactorArray[13][8]=2,oilFactorArray[13][9]=19,oilFactorArray[13][10]=90,oilFactorArray[14]=[],oilFactorArray[14][0]=82,oilFactorArray[14][1]=2,oilFactorArray[14][2]=15,oilFactorArray[14][3]=3,oilFactorArray[14][4]=35,oilFactorArray[14][5]=77,oilFactorArray[14][6]=81,oilFactorArray[14][7]=68,oilFactorArray[14][8]=45,oilFactorArray[14][9]=1,oilFactorArray[14][10]=83,oilFactorArray[15]=[],oilFactorArray[15][0]=36,oilFactorArray[15][1]=95,oilFactorArray[15][2]=39,oilFactorArray[15][3]=94,oilFactorArray[15][4]=75,oilFactorArray[15][5]=21,oilFactorArray[15][6]=98,oilFactorArray[15][7]=29,oilFactorArray[15][8]=36,oilFactorArray[15][9]=2,oilFactorArray[15][10]=79,oilFactorArray[16]=[],oilFactorArray[16][0]=38,oilFactorArray[16][1]=53,oilFactorArray[16][2]=99,oilFactorArray[16][3]=43,oilFactorArray[16][4]=70,oilFactorArray[16][5]=66,oilFactorArray[16][6]=78,oilFactorArray[16][7]=18,oilFactorArray[16][8]=12,oilFactorArray[16][9]=4,oilFactorArray[16][10]=19,oilFactorArray[17]=[],oilFactorArray[17][0]=72,oilFactorArray[17][1]=55,oilFactorArray[17][2]=22,oilFactorArray[17][3]=49,oilFactorArray[17][4]=96,oilFactorArray[17][5]=6,oilFactorArray[17][6]=97,oilFactorArray[17][7]=77,oilFactorArray[17][8]=89,oilFactorArray[17][9]=29,oilFactorArray[17][10]=13,oilFactorArray[18]=[],oilFactorArray[18][0]=85,oilFactorArray[18][1]=92,oilFactorArray[18][2]=6,oilFactorArray[18][3]=88,oilFactorArray[18][4]=5,oilFactorArray[18][5]=87,oilFactorArray[18][6]=76,oilFactorArray[18][7]=70,oilFactorArray[18][8]=41,oilFactorArray[18][9]=8,oilFactorArray[18][10]=28,oilFactorArray[19]=[],oilFactorArray[19][0]=62,oilFactorArray[19][1]=96,oilFactorArray[19][2]=38,oilFactorArray[19][3]=84,oilFactorArray[19][4]=43,oilFactorArray[19][5]=52,oilFactorArray[19][6]=97,oilFactorArray[19][7]=51,oilFactorArray[19][8]=69,oilFactorArray[19][9]=74,oilFactorArray[19][10]=21,oilFactorArray[20]=[],oilFactorArray[20][0]=30,oilFactorArray[20][1]=24,oilFactorArray[20][2]=83,oilFactorArray[20][3]=33,oilFactorArray[20][4]=55,oilFactorArray[20][5]=84,oilFactorArray[20][6]=56,oilFactorArray[20][7]=69,oilFactorArray[20][8]=72,oilFactorArray[20][9]=59,oilFactorArray[20][10]=73,oilFactorArray[21]=[],oilFactorArray[21][0]=44,oilFactorArray[21][1]=6,oilFactorArray[21][2]=88,oilFactorArray[21][3]=39,oilFactorArray[21][4]=67,oilFactorArray[21][5]=56,oilFactorArray[21][6]=50,oilFactorArray[21][7]=67,oilFactorArray[21][8]=39,oilFactorArray[21][9]=75,oilFactorArray[21][10]=51,oilFactorArray[22]=[],oilFactorArray[22][0]=27,oilFactorArray[22][1]=91,oilFactorArray[22][2]=4,oilFactorArray[22][3]=80,oilFactorArray[22][4]=16,oilFactorArray[22][5]=41,oilFactorArray[22][6]=38,oilFactorArray[22][7]=63,oilFactorArray[22][8]=90,oilFactorArray[22][9]=96,oilFactorArray[22][10]=16,oilFactorArray[23]=[],oilFactorArray[23][0]=74,oilFactorArray[23][1]=50,oilFactorArray[23][2]=7,oilFactorArray[23][3]=99,oilFactorArray[23][4]=4,oilFactorArray[23][5]=23,oilFactorArray[23][6]=26,oilFactorArray[23][7]=72,oilFactorArray[23][8]=30,oilFactorArray[23][9]=7,oilFactorArray[23][10]=86,oilFactorArray[24]=[],oilFactorArray[24][0]=27,oilFactorArray[24][1]=94,oilFactorArray[24][2]=71,oilFactorArray[24][3]=35,oilFactorArray[24][4]=50,oilFactorArray[24][5]=5,oilFactorArray[24][6]=37,oilFactorArray[24][7]=84,oilFactorArray[24][8]=6,oilFactorArray[24][9]=72,oilFactorArray[24][10]=70,oilFactorArray[25]=[],oilFactorArray[25][0]=54,oilFactorArray[25][1]=69,oilFactorArray[25][2]=49,oilFactorArray[25][3]=30,oilFactorArray[25][4]=68,oilFactorArray[25][5]=62,oilFactorArray[25][6]=3,oilFactorArray[25][7]=22,oilFactorArray[25][8]=86,oilFactorArray[25][9]=66,oilFactorArray[25][10]=32,oilFactorArray[26]=[],oilFactorArray[26][0]=53,oilFactorArray[26][1]=63,oilFactorArray[26][2]=56,oilFactorArray[26][3]=46,oilFactorArray[26][4]=53,oilFactorArray[26][5]=82,oilFactorArray[26][6]=61,oilFactorArray[26][7]=60,oilFactorArray[26][8]=60,oilFactorArray[26][9]=71,oilFactorArray[26][10]=47,oilFactorArray[27]=[],oilFactorArray[27][0]=15,oilFactorArray[27][1]=75,oilFactorArray[27][2]=24,oilFactorArray[27][3]=14,oilFactorArray[27][4]=31,oilFactorArray[27][5]=78,oilFactorArray[27][6]=91,oilFactorArray[27][7]=15,oilFactorArray[27][8]=19,oilFactorArray[27][9]=32,oilFactorArray[27][10]=94,oilFactorArray[28]=[],oilFactorArray[28][0]=85,oilFactorArray[28][1]=99,oilFactorArray[28][2]=65,oilFactorArray[28][3]=47,oilFactorArray[28][4]=19,oilFactorArray[28][5]=84,oilFactorArray[28][6]=29,oilFactorArray[28][7]=85,oilFactorArray[28][8]=86,oilFactorArray[28][9]=30,oilFactorArray[28][10]=5,oilFactorArray[29]=[],oilFactorArray[29][0]=98,oilFactorArray[29][1]=55,oilFactorArray[29][2]=23,oilFactorArray[29][3]=43,oilFactorArray[29][4]=84,oilFactorArray[29][5]=27,oilFactorArray[29][6]=50,oilFactorArray[29][7]=33,oilFactorArray[29][8]=55,oilFactorArray[29][9]=68,oilFactorArray[29][10]=70,oilFactorArray[30]=[],oilFactorArray[30][0]=64,oilFactorArray[30][1]=90,oilFactorArray[30][2]=26,oilFactorArray[30][3]=80,oilFactorArray[30][4]=85,oilFactorArray[30][5]=46,oilFactorArray[30][6]=77,oilFactorArray[30][7]=61,oilFactorArray[30][8]=76,oilFactorArray[30][9]=85,oilFactorArray[30][10]=59,oilFactorArray[31]=[],oilFactorArray[31][0]=22,oilFactorArray[31][1]=91,oilFactorArray[31][2]=42,oilFactorArray[31][3]=55,oilFactorArray[31][4]=64,oilFactorArray[31][5]=97,oilFactorArray[31][6]=8,oilFactorArray[31][7]=39,oilFactorArray[31][8]=70,oilFactorArray[31][9]=31,oilFactorArray[31][10]=8,oilFactorArray[32]=[],oilFactorArray[32][0]=36,oilFactorArray[32][1]=64,oilFactorArray[32][2]=18,oilFactorArray[32][3]=88,oilFactorArray[32][4]=42,oilFactorArray[32][5]=93,oilFactorArray[32][6]=94,oilFactorArray[32][7]=26,oilFactorArray[32][8]=56,oilFactorArray[32][9]=59,oilFactorArray[32][10]=44,oilFactorArray[33]=[],oilFactorArray[33][0]=7,oilFactorArray[33][1]=87,oilFactorArray[33][2]=92,oilFactorArray[33][3]=18,oilFactorArray[33][4]=91,oilFactorArray[33][5]=3,oilFactorArray[33][6]=14,oilFactorArray[33][7]=94,oilFactorArray[33][8]=33,oilFactorArray[33][9]=64,oilFactorArray[33][10]=53,oilFactorArray[34]=[],oilFactorArray[34][0]=93,oilFactorArray[34][1]=9,oilFactorArray[34][2]=76,oilFactorArray[34][3]=59,oilFactorArray[34][4]=87,oilFactorArray[34][5]=36,oilFactorArray[34][6]=50,oilFactorArray[34][7]=90,oilFactorArray[34][8]=99,oilFactorArray[34][9]=85,oilFactorArray[34][10]=9,oilFactorArray[35]=[],oilFactorArray[35][0]=98,oilFactorArray[35][1]=24,oilFactorArray[35][2]=25,oilFactorArray[35][3]=24,oilFactorArray[35][4]=83,oilFactorArray[35][5]=63,oilFactorArray[35][6]=89,oilFactorArray[35][7]=11,oilFactorArray[35][8]=76,oilFactorArray[35][9]=62,oilFactorArray[35][10]=83,oilFactorArray[36]=[],oilFactorArray[36][0]=18,oilFactorArray[36][1]=69,oilFactorArray[36][2]=96,oilFactorArray[36][3]=94,oilFactorArray[36][4]=96,oilFactorArray[36][5]=9,oilFactorArray[36][6]=12,oilFactorArray[36][7]=94,oilFactorArray[36][8]=48,oilFactorArray[36][9]=71,oilFactorArray[36][10]=19,oilFactorArray[37]=[],oilFactorArray[37][0]=81,oilFactorArray[37][1]=57,oilFactorArray[37][2]=35,oilFactorArray[37][3]=43,oilFactorArray[37][4]=99,oilFactorArray[37][5]=57,oilFactorArray[37][6]=81,oilFactorArray[37][7]=5,oilFactorArray[37][8]=8,oilFactorArray[37][9]=52,oilFactorArray[37][10]=17,oilFactorArray[38]=[],oilFactorArray[38][0]=77,oilFactorArray[38][1]=74,oilFactorArray[38][2]=42,oilFactorArray[38][3]=66,oilFactorArray[38][4]=23,oilFactorArray[38][5]=8,oilFactorArray[38][6]=29,oilFactorArray[38][7]=56,oilFactorArray[38][8]=41,oilFactorArray[38][9]=51,oilFactorArray[38][10]=9,oilFactorArray[39]=[],oilFactorArray[39][0]=3,oilFactorArray[39][1]=37,oilFactorArray[39][2]=31,oilFactorArray[39][3]=5,oilFactorArray[39][4]=23,oilFactorArray[39][5]=32,oilFactorArray[39][6]=23,oilFactorArray[39][7]=15,oilFactorArray[39][8]=93,oilFactorArray[39][9]=24,oilFactorArray[39][10]=24,oilFactorArray[40]=[],oilFactorArray[40][0]=37,oilFactorArray[40][1]=32,oilFactorArray[40][2]=19,oilFactorArray[40][3]=7,oilFactorArray[40][4]=45,oilFactorArray[40][5]=89,oilFactorArray[40][6]=67,oilFactorArray[40][7]=67,oilFactorArray[40][8]=41,oilFactorArray[40][9]=18,oilFactorArray[40][10]=85,oilFactorArray[41]=[],oilFactorArray[41][0]=97,oilFactorArray[41][1]=91,oilFactorArray[41][2]=23,oilFactorArray[41][3]=84,oilFactorArray[41][4]=45,oilFactorArray[41][5]=61,oilFactorArray[41][6]=11,oilFactorArray[41][7]=69,oilFactorArray[41][8]=46,oilFactorArray[41][9]=77,oilFactorArray[41][10]=94,oilFactorArray[42]=[],oilFactorArray[42][0]=41,oilFactorArray[42][1]=60,oilFactorArray[42][2]=13,oilFactorArray[42][3]=16,oilFactorArray[42][4]=19,oilFactorArray[42][5]=80,oilFactorArray[42][6]=92,oilFactorArray[42][7]=23,oilFactorArray[42][8]=48,oilFactorArray[42][9]=66,oilFactorArray[42][10]=84,oilFactorArray[43]=[],oilFactorArray[43][0]=17,oilFactorArray[43][1]=32,oilFactorArray[43][2]=95,oilFactorArray[43][3]=38,oilFactorArray[43][4]=13,oilFactorArray[43][5]=42,oilFactorArray[43][6]=17,oilFactorArray[43][7]=79,oilFactorArray[43][8]=14,oilFactorArray[43][9]=43,oilFactorArray[43][10]=28,oilFactorArray[44]=[],oilFactorArray[44][0]=76,oilFactorArray[44][1]=96,oilFactorArray[44][2]=13,oilFactorArray[44][3]=27,oilFactorArray[44][4]=12,oilFactorArray[44][5]=3,oilFactorArray[44][6]=93,oilFactorArray[44][7]=66,oilFactorArray[44][8]=96,oilFactorArray[44][9]=24,oilFactorArray[44][10]=27,oilFactorArray[45]=[],oilFactorArray[45][0]=68,oilFactorArray[45][1]=36,oilFactorArray[45][2]=80,oilFactorArray[45][3]=70,oilFactorArray[45][4]=11,oilFactorArray[45][5]=42,oilFactorArray[45][6]=76,oilFactorArray[45][7]=74,oilFactorArray[45][8]=56,oilFactorArray[45][9]=30,oilFactorArray[45][10]=87,oilFactorArray[46]=[],oilFactorArray[46][0]=9,oilFactorArray[46][1]=81,oilFactorArray[46][2]=71,oilFactorArray[46][3]=68,oilFactorArray[46][4]=17,oilFactorArray[46][5]=95,oilFactorArray[46][6]=97,oilFactorArray[46][7]=7,oilFactorArray[46][8]=55,oilFactorArray[46][9]=29,oilFactorArray[46][10]=70,oilFactorArray[47]=[],oilFactorArray[47][0]=60,oilFactorArray[47][1]=90,oilFactorArray[47][2]=58,oilFactorArray[47][3]=68,oilFactorArray[47][4]=25,oilFactorArray[47][5]=95,oilFactorArray[47][6]=2,oilFactorArray[47][7]=42,oilFactorArray[47][8]=92,oilFactorArray[47][9]=96,oilFactorArray[47][10]=58,oilFactorArray[48]=[],oilFactorArray[48][0]=34,oilFactorArray[48][1]=31,oilFactorArray[48][2]=6,oilFactorArray[48][3]=58,oilFactorArray[48][4]=15,oilFactorArray[48][5]=74,oilFactorArray[48][6]=37,oilFactorArray[48][7]=41,oilFactorArray[48][8]=41,oilFactorArray[48][9]=3,oilFactorArray[48][10]=71,oilFactorArray[49]=[],oilFactorArray[49][0]=71,oilFactorArray[49][1]=35,oilFactorArray[49][2]=68,oilFactorArray[49][3]=15,oilFactorArray[49][4]=79,oilFactorArray[49][5]=70,oilFactorArray[49][6]=95,oilFactorArray[49][7]=1,oilFactorArray[49][8]=77,oilFactorArray[49][9]=38,oilFactorArray[49][10]=37,oilFactorArray[50]=[],oilFactorArray[50][0]=76,oilFactorArray[50][1]=58,oilFactorArray[50][2]=31,oilFactorArray[50][3]=77,oilFactorArray[50][4]=35,oilFactorArray[50][5]=65,oilFactorArray[50][6]=54,oilFactorArray[50][7]=97,oilFactorArray[50][8]=2,oilFactorArray[50][9]=71,oilFactorArray[50][10]=50,oilFactorArray[51]=[],oilFactorArray[51][0]=75,oilFactorArray[51][1]=98,oilFactorArray[51][2]=95,oilFactorArray[51][3]=65,oilFactorArray[51][4]=29,oilFactorArray[51][5]=78,oilFactorArray[51][6]=81,oilFactorArray[51][7]=61,oilFactorArray[51][8]=45,oilFactorArray[51][9]=25,oilFactorArray[51][10]=47,oilFactorArray[52]=[],oilFactorArray[52][0]=6,oilFactorArray[52][1]=87,oilFactorArray[52][2]=48,oilFactorArray[52][3]=60,oilFactorArray[52][4]=21,oilFactorArray[52][5]=24,oilFactorArray[52][6]=16,oilFactorArray[52][7]=59,oilFactorArray[52][8]=80,oilFactorArray[52][9]=16,oilFactorArray[52][10]=39,oilFactorArray[53]=[],oilFactorArray[53][0]=78,oilFactorArray[53][1]=58,oilFactorArray[53][2]=14,oilFactorArray[53][3]=87,oilFactorArray[53][4]=64,oilFactorArray[53][5]=3,oilFactorArray[53][6]=90,oilFactorArray[53][7]=13,oilFactorArray[53][8]=95,oilFactorArray[53][9]=3,oilFactorArray[53][10]=26,oilFactorArray[54]=[],oilFactorArray[54][0]=29,oilFactorArray[54][1]=23,oilFactorArray[54][2]=3,oilFactorArray[54][3]=19,oilFactorArray[54][4]=75,oilFactorArray[54][5]=22,oilFactorArray[54][6]=67,oilFactorArray[54][7]=52,oilFactorArray[54][8]=44,oilFactorArray[54][9]=28,oilFactorArray[54][10]=97,oilFactorArray[55]=[],oilFactorArray[55][0]=8,oilFactorArray[55][1]=31,oilFactorArray[55][2]=26,oilFactorArray[55][3]=68,oilFactorArray[55][4]=62,oilFactorArray[55][5]=20,oilFactorArray[55][6]=42,oilFactorArray[55][7]=11,oilFactorArray[55][8]=67,oilFactorArray[55][9]=72,oilFactorArray[55][10]=88,oilFactorArray[56]=[],oilFactorArray[56][0]=79,oilFactorArray[56][1]=9,oilFactorArray[56][2]=17,oilFactorArray[56][3]=1,oilFactorArray[56][4]=80,oilFactorArray[56][5]=20,oilFactorArray[56][6]=20,oilFactorArray[56][7]=95,oilFactorArray[56][8]=60,oilFactorArray[56][9]=95,oilFactorArray[56][10]=64,oilFactorArray[57]=[],oilFactorArray[57][0]=23,oilFactorArray[57][1]=65,oilFactorArray[57][2]=75,oilFactorArray[57][3]=32,oilFactorArray[57][4]=2,oilFactorArray[57][5]=59,oilFactorArray[57][6]=85,oilFactorArray[57][7]=49,oilFactorArray[57][8]=82,oilFactorArray[57][9]=65,oilFactorArray[57][10]=52,oilFactorArray[58]=[],oilFactorArray[58][0]=69,oilFactorArray[58][1]=83,oilFactorArray[58][2]=24,oilFactorArray[58][3]=43,oilFactorArray[58][4]=19,oilFactorArray[58][5]=89,oilFactorArray[58][6]=35,oilFactorArray[58][7]=48,oilFactorArray[58][8]=93,oilFactorArray[58][9]=15,oilFactorArray[58][10]=96,oilFactorArray[59]=[],oilFactorArray[59][0]=68,oilFactorArray[59][1]=90,oilFactorArray[59][2]=2,oilFactorArray[59][3]=34,oilFactorArray[59][4]=48,oilFactorArray[59][5]=87,oilFactorArray[59][6]=89,oilFactorArray[59][7]=13,oilFactorArray[59][8]=81,oilFactorArray[59][9]=34,oilFactorArray[59][10]=72,oilFactorArray[60]=[],oilFactorArray[60][0]=94,oilFactorArray[60][1]=21,oilFactorArray[60][2]=16,oilFactorArray[60][3]=28,oilFactorArray[60][4]=97,oilFactorArray[60][5]=72,oilFactorArray[60][6]=93,oilFactorArray[60][7]=66,oilFactorArray[60][8]=13,oilFactorArray[60][9]=27,oilFactorArray[60][10]=62,oilFactorArray[61]=[],oilFactorArray[61][0]=69,oilFactorArray[61][1]=3,oilFactorArray[61][2]=11,oilFactorArray[61][3]=18,oilFactorArray[61][4]=26,oilFactorArray[61][5]=86,oilFactorArray[61][6]=98,oilFactorArray[61][7]=78,oilFactorArray[61][8]=93,oilFactorArray[61][9]=12,oilFactorArray[61][10]=9,oilFactorArray[62]=[],oilFactorArray[62][0]=86,oilFactorArray[62][1]=47,oilFactorArray[62][2]=26,oilFactorArray[62][3]=35,oilFactorArray[62][4]=23,oilFactorArray[62][5]=6,oilFactorArray[62][6]=98,oilFactorArray[62][7]=9,oilFactorArray[62][8]=38,oilFactorArray[62][9]=80,oilFactorArray[62][10]=99,oilFactorArray[63]=[],oilFactorArray[63][0]=24,oilFactorArray[63][1]=58,oilFactorArray[63][2]=30,oilFactorArray[63][3]=45,oilFactorArray[63][4]=80,oilFactorArray[63][5]=81,oilFactorArray[63][6]=46,oilFactorArray[63][7]=19,oilFactorArray[63][8]=33,oilFactorArray[63][9]=24,oilFactorArray[63][10]=43,oilFactorArray[64]=[],oilFactorArray[64][0]=21,oilFactorArray[64][1]=34,oilFactorArray[64][2]=88,oilFactorArray[64][3]=39,oilFactorArray[64][4]=45,oilFactorArray[64][5]=11,oilFactorArray[64][6]=48,oilFactorArray[64][7]=26,oilFactorArray[64][8]=91,oilFactorArray[64][9]=14,oilFactorArray[64][10]=62,oilFactorArray[65]=[],oilFactorArray[65][0]=88,oilFactorArray[65][1]=95,oilFactorArray[65][2]=39,oilFactorArray[65][3]=14,oilFactorArray[65][4]=61,oilFactorArray[65][5]=94,oilFactorArray[65][6]=63,oilFactorArray[65][7]=48,oilFactorArray[65][8]=2,oilFactorArray[65][9]=94,oilFactorArray[65][10]=38,oilFactorArray[66]=[],oilFactorArray[66][0]=29,oilFactorArray[66][1]=8,oilFactorArray[66][2]=76,oilFactorArray[66][3]=30,oilFactorArray[66][4]=32,oilFactorArray[66][5]=65,oilFactorArray[66][6]=2;oilFactorArray[66][7]=21,oilFactorArray[66][8]=46,oilFactorArray[66][9]=82,oilFactorArray[66][10]=95,oilFactorArray[67]=[],oilFactorArray[67][0]=65,oilFactorArray[67][1]=13,oilFactorArray[67][2]=14,oilFactorArray[67][3]=96,oilFactorArray[67][4]=60,oilFactorArray[67][5]=74,oilFactorArray[67][6]=81,oilFactorArray[67][7]=96,oilFactorArray[67][8]=40,oilFactorArray[67][9]=1,oilFactorArray[67][10]=23,oilFactorArray[68]=[],oilFactorArray[68][0]=53,oilFactorArray[68][1]=1,oilFactorArray[68][2]=91,oilFactorArray[68][3]=27,oilFactorArray[68][4]=77,oilFactorArray[68][5]=33,oilFactorArray[68][6]=59,oilFactorArray[68][7]=98,oilFactorArray[68][8]=58,oilFactorArray[68][9]=54,oilFactorArray[68][10]=86,oilFactorArray[69]=[],oilFactorArray[69][0]=38,oilFactorArray[69][1]=63,oilFactorArray[69][2]=27,oilFactorArray[69][3]=77,oilFactorArray[69][4]=40,oilFactorArray[69][5]=95,oilFactorArray[69][6]=93,oilFactorArray[69][7]=39,oilFactorArray[69][8]=88,oilFactorArray[69][9]=51,oilFactorArray[69][10]=53,oilFactorArray[70]=[],oilFactorArray[70][0]=36,oilFactorArray[70][1]=25,oilFactorArray[70][2]=94,oilFactorArray[70][3]=71,oilFactorArray[70][4]=2,oilFactorArray[70][5]=24,oilFactorArray[70][6]=27,oilFactorArray[70][7]=19,oilFactorArray[70][8]=8,oilFactorArray[70][9]=44,oilFactorArray[70][10]=67,oilFactorArray[71]=[],oilFactorArray[71][0]=20,oilFactorArray[71][1]=59,oilFactorArray[71][2]=18,oilFactorArray[71][3]=87,oilFactorArray[71][4]=96,oilFactorArray[71][5]=35,oilFactorArray[71][6]=63,oilFactorArray[71][7]=83,oilFactorArray[71][8]=5,oilFactorArray[71][9]=32,oilFactorArray[71][10]=53,oilFactorArray[72]=[],oilFactorArray[72][0]=51,oilFactorArray[72][1]=26,oilFactorArray[72][2]=99,oilFactorArray[72][3]=75,oilFactorArray[72][4]=33,oilFactorArray[72][5]=71,oilFactorArray[72][6]=27,oilFactorArray[72][7]=87,oilFactorArray[72][8]=84,oilFactorArray[72][9]=16,oilFactorArray[72][10]=87,oilFactorArray[73]=[],oilFactorArray[73][0]=85,oilFactorArray[73][1]=33,oilFactorArray[73][2]=82,oilFactorArray[73][3]=17,oilFactorArray[73][4]=52,oilFactorArray[73][5]=45,oilFactorArray[73][6]=96,oilFactorArray[73][7]=73,oilFactorArray[73][8]=31,oilFactorArray[73][9]=13,oilFactorArray[73][10]=84,oilFactorArray[74]=[],oilFactorArray[74][0]=85,oilFactorArray[74][1]=49,oilFactorArray[74][2]=28,oilFactorArray[74][3]=98,oilFactorArray[74][4]=78,oilFactorArray[74][5]=27,oilFactorArray[74][6]=72,oilFactorArray[74][7]=5,oilFactorArray[74][8]=88,oilFactorArray[74][9]=49,oilFactorArray[74][10]=69,oilFactorArray[75]=[],oilFactorArray[75][0]=97,oilFactorArray[75][1]=38,oilFactorArray[75][2]=77,oilFactorArray[75][3]=42,oilFactorArray[75][4]=82,oilFactorArray[75][5]=49,oilFactorArray[75][6]=94,oilFactorArray[75][7]=35,oilFactorArray[75][8]=64,oilFactorArray[75][9]=57,oilFactorArray[75][10]=42,oilFactorArray[76]=[],oilFactorArray[76][0]=15,oilFactorArray[76][1]=69,oilFactorArray[76][2]=79,oilFactorArray[76][3]=94,oilFactorArray[76][4]=52,oilFactorArray[76][5]=92,oilFactorArray[76][6]=7,oilFactorArray[76][7]=2,oilFactorArray[76][8]=57,oilFactorArray[76][9]=92,oilFactorArray[76][10]=51,oilFactorArray[77]=[],oilFactorArray[77][0]=32,oilFactorArray[77][1]=27,oilFactorArray[77][2]=11,oilFactorArray[77][3]=55,oilFactorArray[77][4]=93,oilFactorArray[77][5]=60,oilFactorArray[77][6]=32,oilFactorArray[77][7]=37,oilFactorArray[77][8]=93,oilFactorArray[77][9]=58,oilFactorArray[77][10]=70,oilFactorArray[78]=[],oilFactorArray[78][0]=99,oilFactorArray[78][1]=5,oilFactorArray[78][2]=80,oilFactorArray[78][3]=90,oilFactorArray[78][4]=39,oilFactorArray[78][5]=23,oilFactorArray[78][6]=87,oilFactorArray[78][7]=31,oilFactorArray[78][8]=71,oilFactorArray[78][9]=54,oilFactorArray[78][10]=71,oilFactorArray[79]=[],oilFactorArray[79][0]=41,oilFactorArray[79][1]=23,oilFactorArray[79][2]=72,oilFactorArray[79][3]=43,oilFactorArray[79][4]=88,oilFactorArray[79][5]=99,oilFactorArray[79][6]=77,oilFactorArray[79][7]=77,oilFactorArray[79][8]=41,oilFactorArray[79][9]=77,oilFactorArray[79][10]=64,oilFactorArray[80]=[],oilFactorArray[80][0]=4,oilFactorArray[80][1]=4,oilFactorArray[80][2]=35,oilFactorArray[80][3]=87,oilFactorArray[80][4]=34,oilFactorArray[80][5]=22,oilFactorArray[80][6]=76,oilFactorArray[80][7]=60,oilFactorArray[80][8]=25,oilFactorArray[80][9]=94,oilFactorArray[80][10]=48,oilFactorArray[81]=[],oilFactorArray[81][0]=50,oilFactorArray[81][1]=18,oilFactorArray[81][2]=89,oilFactorArray[81][3]=74,oilFactorArray[81][4]=58,oilFactorArray[81][5]=69,oilFactorArray[81][6]=53,oilFactorArray[81][7]=71,oilFactorArray[81][8]=74,oilFactorArray[81][9]=56,oilFactorArray[81][10]=31,oilFactorArray[82]=[],oilFactorArray[82][0]=73,oilFactorArray[82][1]=24,oilFactorArray[82][2]=73,oilFactorArray[82][3]=3,oilFactorArray[82][4]=81,oilFactorArray[82][5]=25,oilFactorArray[82][6]=48,oilFactorArray[82][7]=93,oilFactorArray[82][8]=6,oilFactorArray[82][9]=90,oilFactorArray[82][10]=82,oilFactorArray[83]=[],oilFactorArray[83][0]=94,oilFactorArray[83][1]=96,oilFactorArray[83][2]=28,oilFactorArray[83][3]=95,oilFactorArray[83][4]=36,oilFactorArray[83][5]=67,oilFactorArray[83][6]=18,oilFactorArray[83][7]=61,oilFactorArray[83][8]=73,oilFactorArray[83][9]=21,oilFactorArray[83][10]=57,oilFactorArray[84]=[],oilFactorArray[84][0]=38,oilFactorArray[84][1]=45,oilFactorArray[84][2]=48,oilFactorArray[84][3]=90,oilFactorArray[84][4]=88,oilFactorArray[84][5]=65,oilFactorArray[84][6]=62,oilFactorArray[84][7]=71,oilFactorArray[84][8]=50,oilFactorArray[84][9]=52,oilFactorArray[84][10]=36,oilFactorArray[85]=[],oilFactorArray[85][0]=97,oilFactorArray[85][1]=29,oilFactorArray[85][2]=33,oilFactorArray[85][3]=42,oilFactorArray[85][4]=36,oilFactorArray[85][5]=30,oilFactorArray[85][6]=51,oilFactorArray[85][7]=69,oilFactorArray[85][8]=4,oilFactorArray[85][9]=64,oilFactorArray[85][10]=57,oilFactorArray[86]=[],oilFactorArray[86][0]=2,oilFactorArray[86][1]=49,oilFactorArray[86][2]=21,oilFactorArray[86][3]=81,oilFactorArray[86][4]=23,oilFactorArray[86][5]=52,oilFactorArray[86][6]=74,oilFactorArray[86][7]=29,oilFactorArray[86][8]=11,oilFactorArray[86][9]=81,oilFactorArray[86][10]=14,oilFactorArray[87]=[],oilFactorArray[87][0]=1,oilFactorArray[87][1]=62,oilFactorArray[87][2]=75,oilFactorArray[87][3]=67,oilFactorArray[87][4]=94,oilFactorArray[87][5]=19,oilFactorArray[87][6]=66,oilFactorArray[87][7]=13,oilFactorArray[87][8]=65,oilFactorArray[87][9]=97,oilFactorArray[87][10]=76,oilFactorArray[88]=[],oilFactorArray[88][0]=23,oilFactorArray[88][1]=13,oilFactorArray[88][2]=30,oilFactorArray[88][3]=99,oilFactorArray[88][4]=81,oilFactorArray[88][5]=66,oilFactorArray[88][6]=8,oilFactorArray[88][7]=81,oilFactorArray[88][8]=33,oilFactorArray[88][9]=58,oilFactorArray[88][10]=62,oilFactorArray[89]=[],oilFactorArray[89][0]=64,oilFactorArray[89][1]=52,oilFactorArray[89][2]=47,oilFactorArray[89][3]=39,oilFactorArray[89][4]=25,oilFactorArray[89][5]=49,oilFactorArray[89][6]=64,oilFactorArray[89][7]=57,oilFactorArray[89][8]=16,oilFactorArray[89][9]=79,oilFactorArray[89][10]=92,oilFactorArray[90]=[],oilFactorArray[90][0]=80,oilFactorArray[90][1]=91,oilFactorArray[90][2]=7,oilFactorArray[90][3]=13,oilFactorArray[90][4]=11,oilFactorArray[90][5]=68,oilFactorArray[90][6]=7,oilFactorArray[90][7]=65,oilFactorArray[90][8]=74,oilFactorArray[90][9]=2,oilFactorArray[90][10]=48,oilFactorArray[91]=[],oilFactorArray[91][0]=62,oilFactorArray[91][1]=41,oilFactorArray[91][2]=18,oilFactorArray[91][3]=70,oilFactorArray[91][4]=42,oilFactorArray[91][5]=1,oilFactorArray[91][6]=74,oilFactorArray[91][7]=53,oilFactorArray[91][8]=82,oilFactorArray[91][9]=84,oilFactorArray[91][10]=91,oilFactorArray[92]=[],oilFactorArray[92][0]=47,oilFactorArray[92][1]=90,oilFactorArray[92][2]=22,oilFactorArray[92][3]=64,oilFactorArray[92][4]=53,oilFactorArray[92][5]=10,oilFactorArray[92][6]=92,oilFactorArray[92][7]=41,oilFactorArray[92][8]=93,oilFactorArray[92][9]=65,oilFactorArray[92][10]=92,oilFactorArray[93]=[],oilFactorArray[93][0]=35,oilFactorArray[93][1]=16,oilFactorArray[93][2]=75,oilFactorArray[93][3]=69,oilFactorArray[93][4]=54,oilFactorArray[93][5]=82,oilFactorArray[93][6]=75,oilFactorArray[93][7]=53,oilFactorArray[93][8]=56,oilFactorArray[93][9]=41,oilFactorArray[93][10]=98,oilFactorArray[94]=[],oilFactorArray[94][0]=70,oilFactorArray[94][1]=11,oilFactorArray[94][2]=32,oilFactorArray[94][3]=25,oilFactorArray[94][4]=77,oilFactorArray[94][5]=44,oilFactorArray[94][6]=11,oilFactorArray[94][7]=14,oilFactorArray[94][8]=93,oilFactorArray[94][9]=33,oilFactorArray[94][10]=25,oilFactorArray[95]=[],oilFactorArray[95][0]=62,oilFactorArray[95][1]=45,oilFactorArray[95][2]=73,oilFactorArray[95][3]=76,oilFactorArray[95][4]=81,oilFactorArray[95][5]=9,oilFactorArray[95][6]=71,oilFactorArray[95][7]=20,oilFactorArray[95][8]=25,oilFactorArray[95][9]=10,oilFactorArray[95][10]=62,oilFactorArray[96]=[],oilFactorArray[96][0]=11,oilFactorArray[96][1]=73,oilFactorArray[96][2]=93,oilFactorArray[96][3]=67,oilFactorArray[96][4]=31,oilFactorArray[96][5]=8,oilFactorArray[96][6]=58,oilFactorArray[96][7]=23,oilFactorArray[96][8]=41,oilFactorArray[96][9]=74,oilFactorArray[96][10]=60,oilFactorArray[97]=[],oilFactorArray[97][0]=85,oilFactorArray[97][1]=62,oilFactorArray[97][2]=87,oilFactorArray[97][3]=46,oilFactorArray[97][4]=99,oilFactorArray[97][5]=24,oilFactorArray[97][6]=41,oilFactorArray[97][7]=44,oilFactorArray[97][8]=59,oilFactorArray[97][9]=3,oilFactorArray[97][10]=90,oilFactorArray[98]=[],oilFactorArray[98][0]=38,oilFactorArray[98][1]=58,oilFactorArray[98][2]=26,oilFactorArray[98][3]=68,oilFactorArray[98][4]=95,oilFactorArray[98][5]=56,oilFactorArray[98][6]=23,oilFactorArray[98][7]=86,oilFactorArray[98][8]=80,oilFactorArray[98][9]=21,oilFactorArray[98][10]=80,oilFactorArray[99]=[],oilFactorArray[99][0]=96,oilFactorArray[99][1]=99,oilFactorArray[99][2]=46,oilFactorArray[99][3]=93,oilFactorArray[99][4]=58,oilFactorArray[99][5]=94,oilFactorArray[99][6]=61,oilFactorArray[99][7]=66,oilFactorArray[99][8]=21,oilFactorArray[99][9]=69,oilFactorArray[99][10]=12;Object.assign(pc,function(){var e=15;function computeGaussian(e,t){return 1/Math.sqrt(2*Math.PI*t)*Math.exp(-e*e/(2*t*t))}function calculateBlurValues(t,s,o,r,i){t[0]=computeGaussian(0,i),s[0]=0,s[1]=0;var a,l,u=t[0];for(a=0,l=Math.floor(e/2);a<l;a++){var h=computeGaussian(a+1,i);t[2*a]=h,t[2*a+1]=h,u+=2*h;var n=2*a+1.5;s[4*a]=o*n,s[4*a+1]=r*n,s[4*a+2]=-o*n,s[4*a+3]=-r*n}for(a=0,l=t.length;a<l;a++)t[a]/=u}var t=function(t){pc.PostEffect.call(this,t);var s={aPosition:pc.SEMANTIC_POSITION},o=["attribute vec2 aPosition;","","varying vec2 vUv0;","","void main(void)","{","    gl_Position = vec4(aPosition, 0.0, 1.0);","    vUv0 = (aPosition + 1.0) * 0.5;","}"].join("\n"),r=["precision "+t.precision+" float;","","varying vec2 vUv0;","","uniform sampler2D uBaseTexture;","uniform float uBloomThreshold;","","void main(void)","{","    vec4 color = texture2D(uBaseTexture, vUv0);","","    gl_FragColor = clamp((color - uBloomThreshold) / (1.0 - uBloomThreshold), 0.0, 1.0);","}"].join("\n"),i=["precision "+t.precision+" float;","","#define SAMPLE_COUNT "+e,"","varying vec2 vUv0;","","uniform sampler2D uBloomTexture;","uniform vec2 uBlurOffsets[SAMPLE_COUNT];","uniform float uBlurWeights[SAMPLE_COUNT];","","void main(void)","{","    vec4 color = vec4(0.0);","    for (int i = 0; i < SAMPLE_COUNT; i++)","    {","        color += texture2D(uBloomTexture, vUv0 + uBlurOffsets[i]) * uBlurWeights[i];","    }","","    gl_FragColor = color;","}"].join("\n"),a=["precision "+t.precision+" float;","","varying vec2 vUv0;","","uniform float uBloomEffectIntensity;","uniform sampler2D uBaseTexture;","uniform sampler2D uBloomTexture;","","void main(void)","{","    vec4 bloom = texture2D(uBloomTexture, vUv0) * uBloomEffectIntensity;","    vec4 base = texture2D(uBaseTexture, vUv0);","","    base *= (1.0 - clamp(bloom, 0.0, 1.0));","","    gl_FragColor = base + bloom;","}"].join("\n");this.extractShader=new pc.Shader(t,{attributes:s,vshader:o,fshader:r}),this.blurShader=new pc.Shader(t,{attributes:s,vshader:o,fshader:i}),this.combineShader=new pc.Shader(t,{attributes:s,vshader:o,fshader:a});var l=t.width,u=t.height;this.targets=[];for(var h=0;h<2;h++){var n=new pc.Texture(t,{format:pc.PIXELFORMAT_R8_G8_B8_A8,width:l>>1,height:u>>1});n.minFilter=pc.FILTER_LINEAR,n.magFilter=pc.FILTER_LINEAR,n.addressU=pc.ADDRESS_CLAMP_TO_EDGE,n.addressV=pc.ADDRESS_CLAMP_TO_EDGE,n.name="pe-bloom";var f=new pc.RenderTarget(t,n,{depth:!1});this.targets.push(f)}this.bloomThreshold=.25,this.blurAmount=4,this.bloomIntensity=1.25,this.sampleWeights=new Float32Array(e),this.sampleOffsets=new Float32Array(2*e)};return(t.prototype=Object.create(pc.PostEffect.prototype)).constructor=t,Object.assign(t.prototype,{render:function(e,t,s){var o=this.device,r=o.scope;r.resolve("uBloomThreshold").setValue(this.bloomThreshold),r.resolve("uBaseTexture").setValue(e.colorBuffer),pc.drawFullscreenQuad(o,this.targets[0],this.vertexBuffer,this.extractShader),calculateBlurValues(this.sampleWeights,this.sampleOffsets,1/this.targets[1].width,0,this.blurAmount),r.resolve("uBlurWeights[0]").setValue(this.sampleWeights),r.resolve("uBlurOffsets[0]").setValue(this.sampleOffsets),r.resolve("uBloomTexture").setValue(this.targets[0].colorBuffer),pc.drawFullscreenQuad(o,this.targets[1],this.vertexBuffer,this.blurShader),calculateBlurValues(this.sampleWeights,this.sampleOffsets,0,1/this.targets[0].height,this.blurAmount),r.resolve("uBlurWeights[0]").setValue(this.sampleWeights),r.resolve("uBlurOffsets[0]").setValue(this.sampleOffsets),r.resolve("uBloomTexture").setValue(this.targets[1].colorBuffer),pc.drawFullscreenQuad(o,this.targets[0],this.vertexBuffer,this.blurShader),r.resolve("uBloomEffectIntensity").setValue(this.bloomIntensity),r.resolve("uBloomTexture").setValue(this.targets[0].colorBuffer),r.resolve("uBaseTexture").setValue(e.colorBuffer),pc.drawFullscreenQuad(o,t,this.vertexBuffer,this.combineShader,s)}}),{BloomEffect:t}}());var Bloom=pc.createScript("bloom");Bloom.attributes.add("bloomIntensity",{type:"number",default:1,min:0,title:"Intensity"}),Bloom.attributes.add("bloomThreshold",{type:"number",default:.25,min:0,max:1,precision:2,title:"Threshold"}),Bloom.attributes.add("blurAmount",{type:"number",default:4,min:1,title:"Blur amount"}),Bloom.prototype.initialize=function(){this.effect=new pc.BloomEffect(this.app.graphicsDevice),this.effect.bloomThreshold=this.bloomThreshold,this.effect.blurAmount=this.blurAmount,this.effect.bloomIntensity=this.bloomIntensity;var e=this.entity.camera.postEffects;e.addEffect(this.effect),this.on("attr",function(e,t){this.effect[e]=t},this),this.on("state",function(t){t?e.addEffect(this.effect):e.removeEffect(this.effect)}),this.on("destroy",function(){e.removeEffect(this.effect)})};// pokiSystem.js
var tiempoExtra = 45;
var adsUsados = false;
var continuePanel;
var classCallBack;
var _menu;

function loadScript(url, callback)
{
    // Adding the script tag to the head as suggested before
    var head = document.head;
    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.src = url;

    // Then bind the event to the callback function.
    // There are several events for cross browser compatibility.
    script.onreadystatechange = callback;
    script.onload = callback;

    // Fire the loading
    head.appendChild(script);
}

function iniPoki()
{

    PokiSDK.init().then(
        () => {
            // successfully initialized
            console.log("PokiSDK initialized");
            // continue to game
        }   
    ).catch(
        () => {
            // initialized but the user has an adblock
            console.log("Adblock enabled");
            // feel free to kindly ask the user to disable AdBlock, like forcing weird usernames or showing a sad face; be creative!
            // continue to the game
        }   
    );
    PokiSDK.setDebug(false);

}


var sounBeforeAds = 0;
function showAds(callBack)
{
     pause = true;
  soundBeforeAds = muteSound;
  muteSound = 0;
  _menu.clickMuteButton();

  PokiSDK.commercialBreak()
   .then(() => {
      muteSound = soundBeforeAds;
      if(muteSound == 0)
      {
          muteSound = 1;
         _menu.clickMuteButton();
      }      
      pause = false;
      callBack();
   });
}
function showReward(callBackBueno,callBackMalo)
{
    soundBeforeAds = muteSound;
    muteSound = 0;
    _menu.clickMuteButton();
    
    PokiSDK.rewardedBreak().then(
        (success) => {
            muteSound = soundBeforeAds;
            if(muteSound == 0)
            {
                muteSound = 1;
                _menu.clickMuteButton();
            }      
            if(success){
                console.log("Revive!");
                adsUsados = true;
                PokiSDK.gameplayStart();
                callBackBueno();
            }
            else
            {
                console.log("Revive failed!");
                callBackMalo();
            }
        }

    );
}

function poneContinue(clase)
{
    classCallBack = clase;
    
    if(adsUsados || clase.conExit)
    {
        detenerContinue(false);  
        return;
    }
    
    continuePanel.enabled = true;   
    var continuePanel_fill = continuePanel.findByName("fill");
    var continuePanel_botonYES = continuePanel.findByName("botonYes");
    var continuePanel_botonNO = continuePanel.findByName("botonNo");
    
    continuePanel_fill.script.animaTexturas.inicioAnim(finTiempoContinue.bind(window));         
    createEvents(continuePanel_botonYES,true,1,clickRewardVideo.bind(window,true)); 
    createEvents(continuePanel_botonNO,true,1,clickRewardVideo.bind(window,false)); 

};
function finTiempoContinue()
{
   detenerContinue(false);    

};
function clickRewardVideo(resp)
{    
   detenerContinue(resp);    

};
function detenerContinue(resp)
{  
   adsUsados = true;
   var continuePanel_fill = continuePanel.findByName("fill");
   var continuePanel_botonYES = continuePanel.findByName("botonYes");
   var continuePanel_botonNO = continuePanel.findByName("botonNo");
   
   if(!classCallBack.conExit)
       continuePanel_fill.script.animaTexturas.stopAnim();   
   createEvents(continuePanel_botonYES,false); 
   createEvents(continuePanel_botonNO,false); 
    
   if(!resp)
   {       
       classCallBack.continueNO();
   }
   else
   {  
       showReward(classCallBack.continueYES.bind(classCallBack),classCallBack.continueNO.bind(classCallBack));
     
   }   
   continuePanel.enabled = false;


};



//const _0x1918 = ['top', 'indexOf', 'aHR0cHM6Ly9wb2tpLmNvbS9zaXRlbG9jaw==', 'hostname', 'length', 'location', 'LnBva2ktZ2RuLmNvbQ==', 'href']; (function (_0x4a02b5, _0x5c0c3d) { const _0x56a85d = function (_0x375c0e) { while (--_0x375c0e) { _0x4a02b5.push(_0x4a02b5.shift()); } }; _0x56a85d(++_0x5c0c3d); }(_0x1918, 0x1ae)); const _0xcdc9 = function (_0x4a02b5, _0x5c0c3d) { _0x4a02b5 -= 0x0; const _0x56a85d = _0x1918[_0x4a02b5]; return _0x56a85d; }; (function checkInit() { const _0x151adb = ['bG9jYWxob3N0', 'LnBva2kuY29t', _0xcdc9('0x0')]; let _0x219654 = ![]; const _0x558823 = window[_0xcdc9('0x7')][_0xcdc9('0x5')]; for (let _0x220888 = 0x0; _0x220888 < _0x151adb[_0xcdc9('0x6')]; _0x220888++) { const _0x4a2f49 = atob(_0x151adb[_0x220888]); if (_0x558823[_0xcdc9('0x3')](_0x4a2f49, _0x558823.length - _0x4a2f49.length) !== -0x1) { _0x219654 = !![]; break; } } if (!_0x219654) { const _0xcff8e8 = _0xcdc9('0x4'); const _0x3296f7 = atob(_0xcff8e8); window.location[_0xcdc9('0x1')] = _0x3296f7; window[_0xcdc9('0x2')][_0xcdc9('0x7')] !== window[_0xcdc9('0x7')] && (window[_0xcdc9('0x2')][_0xcdc9('0x7')] = window[_0xcdc9('0x7')]); } }());


    

"undefined"!=typeof document&&(function(t,e){function s(t,e){for(var n in e)try{t.style[n]=e[n]}catch(t){}return t}function H(t){return null==t?String(t):"object"==typeof t||"function"==typeof t?Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase()||"object":typeof t}function R(t,e){if("array"!==H(e))return-1;if(e.indexOf)return e.indexOf(t);for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}function I(){var t,e=arguments;for(t in e[1])if(e[1].hasOwnProperty(t))switch(H(e[1][t])){case"object":e[0][t]=I({},e[0][t],e[1][t]);break;case"array":e[0][t]=e[1][t].slice(0);break;default:e[0][t]=e[1][t]}return 2<e.length?I.apply(null,[e[0]].concat(Array.prototype.slice.call(e,2))):e[0]}function N(t){return 1===(t=Math.round(255*t).toString(16)).length?"0"+t:t}function S(t,e,n,i){t.addEventListener?t[i?"removeEventListener":"addEventListener"](e,n,!1):t.attachEvent&&t[i?"detachEvent":"attachEvent"]("on"+e,n)}function D(t,i){function g(t,e,n,i){return p[0|t][Math.round(Math.min((e-n)/(i-n)*M,M))]}function r(){P.legend.fps!==B&&(P.legend.fps=B,P.legend[l]=B?"FPS":"ms"),w=B?F.fps:F.duration,P.count[l]=999<w?"999+":w.toFixed(99<w?0:O.decimals)}function m(){for(c=n(),j<c-O.threshold&&(F.fps-=F.fps/Math.max(1,60*O.smoothing/O.interval),F.duration=1e3/F.fps),b=O.history;b--;)T[b]=0===b?F.fps:T[b-1],q[b]=0===b?F.duration:q[b-1];if(r(),O.heat){if(z.length)for(b=z.length;b--;)z[b].el.style[h[z[b].name].heatOn]=B?g(h[z[b].name].heatmap,F.fps,0,O.maxFps):g(h[z[b].name].heatmap,F.duration,O.threshold,0);if(P.graph&&h.column.heatOn)for(b=C.length;b--;)C[b].style[h.column.heatOn]=B?g(h.column.heatmap,T[b],0,O.maxFps):g(h.column.heatmap,q[b],O.threshold,0)}if(P.graph)for(y=0;y<O.history;y++)C[y].style.height=(B?T[y]?Math.round(v/O.maxFps*Math.min(T[y],O.maxFps)):0:q[y]?Math.round(v/O.threshold*Math.min(q[y],O.threshold)):0)+"px"}function k(){20>O.interval?(f=o(k),m()):(f=setTimeout(k,O.interval),x=o(m))}function G(t){(t=t||window.event).preventDefault?(t.preventDefault(),t.stopPropagation()):(t.returnValue=!1,t.cancelBubble=!0),F.toggle()}function U(){O.toggleOn&&S(P.container,O.toggleOn,G,1),t.removeChild(P.container)}function V(){if(P.container&&U(),h=D.theme[O.theme],!(p=h.compiledHeatmaps||[]).length&&h.heatmaps.length){for(y=0;y<h.heatmaps.length;y++)for(p[y]=[],b=0;b<=M;b++){var e,n=p[y],i=b;e=.33/M*b;var a=h.heatmaps[y].saturation,o=h.heatmaps[y].lightness,c=void 0,l=void 0,d=void 0,u=d=void 0,m=c=l=void 0;m=void 0;0===(d=.5>=o?o*(1+a):o+a-o*a)?e="#000":(l=(d-(u=2*o-d))/d,m=(e*=6)-(c=Math.floor(e)),m*=d*l,0===c||6===c?(c=d,l=u+m,d=u):1===c?(c=d-m,l=d,d=u):2===c?(c=u,l=d,d=u+m):3===c?(c=u,l=d-m):4===c?(c=u+m,l=u):(c=d,l=u,d-=m),e="#"+N(c)+N(l)+N(d)),n[i]=e}h.compiledHeatmaps=p}for(var f in P.container=s(document.createElement("div"),h.container),P.count=P.container.appendChild(s(document.createElement("div"),h.count)),P.legend=P.container.appendChild(s(document.createElement("div"),h.legend)),P.graph=O.graph?P.container.appendChild(s(document.createElement("div"),h.graph)):0,z.length=0,P)P[f]&&h[f].heatOn&&z.push({name:f,el:P[f]});if(C.length=0,P.graph)for(P.graph.style.width=O.history*h.column.width+(O.history-1)*h.column.spacing+"px",b=0;b<O.history;b++)C[b]=P.graph.appendChild(s(document.createElement("div"),h.column)),C[b].style.position="absolute",C[b].style.bottom=0,C[b].style.right=b*h.column.width+b*h.column.spacing+"px",C[b].style.width=h.column.width+"px",C[b].style.height="0px";s(P.container,O),r(),t.appendChild(P.container),P.graph&&(v=P.graph.clientHeight),O.toggleOn&&("click"===O.toggleOn&&(P.container.style.cursor="pointer"),S(P.container,O.toggleOn,G))}"object"===H(t)&&t.nodeType===e&&(i=t,t=document.body),t||(t=document.body);var h,p,c,f,x,v,w,b,y,F=this,O=I({},D.defaults,i||{}),P={},C=[],M=100,z=[],E=O.threshold,A=0,j=n()-E,T=[],q=[],B="fps"===O.show;F.options=O,F.fps=0,F.duration=0,F.isPaused=0,F.tickStart=function(){A=n()},F.tick=function(){c=n(),E+=(c-j-E)/O.smoothing,F.fps=1e3/E,F.duration=A<j?E:c-A,j=c},F.pause=function(){return f&&(F.isPaused=1,clearTimeout(f),a(f),a(x),f=x=0),F},F.resume=function(){return f||(F.isPaused=0,k()),F},F.set=function(t,e){return O[t]=e,B="fps"===O.show,-1!==R(t,d)&&V(),-1!==R(t,u)&&s(P.container,O),F},F.showDuration=function(){return F.set("show","ms"),F},F.showFps=function(){return F.set("show","fps"),F},F.toggle=function(){return F.set("show",B?"ms":"fps"),F},F.hide=function(){return F.pause(),P.container.style.display="none",F},F.show=function(){return F.resume(),P.container.style.display="block",F},F.destroy=function(){F.pause(),U(),F.tick=F.tickStart=function(){}},V(),k()}var n,i=t.performance;n=i&&(i.now||i.webkitNow)?i[i.now?"now":"webkitNow"].bind(i):function(){return+new Date};for(var a=t.cancelAnimationFrame||t.cancelRequestAnimationFrame,o=t.requestAnimationFrame,h=0,p=0,c=(i=["moz","webkit","o"]).length;p<c&&!a;++p)o=(a=t[i[p]+"CancelAnimationFrame"]||t[i[p]+"CancelRequestAnimationFrame"])&&t[i[p]+"RequestAnimationFrame"];a||(o=function(e){var i=n(),a=Math.max(0,16-(i-h));return h=i+a,t.setTimeout(function(){e(i+a)},a)},a=function(t){clearTimeout(t)});var l="string"===H(document.createElement("div").textContent)?"textContent":"innerText";D.extend=I,window.FPSMeter=D,D.defaults={interval:100,smoothing:10,show:"fps",toggleOn:"click",decimals:1,maxFps:60,threshold:100,position:"absolute",zIndex:10,left:"5px",top:"5px",right:"auto",bottom:"auto",margin:"0 0 0 0",theme:"dark",heat:0,graph:0,history:20};var d=["toggleOn","theme","heat","graph","history"],u="position zIndex left top right bottom margin".split(" ")}(window),function(t,e){e.theme={};var n=e.theme.base={heatmaps:[],container:{heatOn:null,heatmap:null,padding:"5px",minWidth:"95px",height:"30px",lineHeight:"30px",textAlign:"right",textShadow:"none"},count:{heatOn:null,heatmap:null,position:"absolute",top:0,right:0,padding:"5px 10px",height:"30px",fontSize:"24px",fontFamily:"Consolas, Andale Mono, monospace",zIndex:2},legend:{heatOn:null,heatmap:null,position:"absolute",top:0,left:0,padding:"5px 10px",height:"30px",fontSize:"12px",lineHeight:"32px",fontFamily:"sans-serif",textAlign:"left",zIndex:2},graph:{heatOn:null,heatmap:null,position:"relative",boxSizing:"padding-box",MozBoxSizing:"padding-box",height:"100%",zIndex:1},column:{width:4,spacing:1,heatOn:null,heatmap:null}};e.theme.dark=e.extend({},n,{heatmaps:[{saturation:.8,lightness:.8}],container:{background:"#222",color:"#fff",border:"1px solid #1a1a1a",textShadow:"1px 1px 0 #222"},count:{heatOn:"color"},column:{background:"#3f3f3f"}}),e.theme.light=e.extend({},n,{heatmaps:[{saturation:.5,lightness:.5}],container:{color:"#666",background:"#fff",textShadow:"1px 1px 0 rgba(255,255,255,.5), -1px -1px 0 rgba(255,255,255,.5)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},count:{heatOn:"color"},column:{background:"#eaeaea"}}),e.theme.colorful=e.extend({},n,{heatmaps:[{saturation:.5,lightness:.6}],container:{heatOn:"backgroundColor",background:"#888",color:"#fff",textShadow:"1px 1px 0 rgba(0,0,0,.2)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},column:{background:"#777",backgroundColor:"rgba(0,0,0,.2)"}}),e.theme.transparent=e.extend({},n,{heatmaps:[{saturation:.8,lightness:.5}],container:{padding:0,color:"#fff",textShadow:"1px 1px 0 rgba(0,0,0,.5)"},count:{padding:"0 5px",height:"40px",lineHeight:"40px"},legend:{padding:"0 5px",height:"40px",lineHeight:"42px"},graph:{height:"40px"},column:{width:5,background:"#999",heatOn:"backgroundColor",opacity:.5}})}(window,FPSMeter));var Fps=pc.createScript("fps");Fps.prototype.initialize=function(){_fps=this,this.fps=new FPSMeter({heat:!1,graph:!1}),this.fps.hide(),this.tiempo=0,this.tiempoMax=1.2,this.sumFps=0,this.cantFps=0,this.iniciarCalculos=!1,this.primerIntento=!0,this.rectificadores=0,this.maxRectificadores=1},Fps.prototype.ini=function(){this.iniciarCalculos=!0},Fps.prototype.update=function(t){if(this.iniciarCalculos&&this.rectificadores!=this.maxRectificadores)if(this.fps.tick(),this.tiempo=this.tiempo+t,this.tiempo<this.tiempoMax)this.sumFps=this.sumFps+this.fps.fps,this.cantFps=this.cantFps+1;else{var e=this.sumFps/this.cantFps;if(this.primerIntento)console.log("el promedio de fps 1 intento fue de "+e),this.primerIntento=!1,this.tiempoMax=2;else{console.log("el promedio de fps fue de "+e),this.rectificadores=this.rectificadores+1;var n="";if(n=e>45?"alta":e>33?"media":e>14?"mediaBaja":"baja",calidad!=n)switch(calidad=n,calidad){case"alta":this.app.graphicsDevice.maxPixelRatio=window.devicePixelRatio;break;case"media":window.devicePixelRatio>2?this.app.graphicsDevice.maxPixelRatio=2:window.devicePixelRatio>1.5?this.app.graphicsDevice.maxPixelRatio=1.5:this.app.graphicsDevice.maxPixelRatio=1;break;case"mediaBaja":window.devicePixelRatio,this.app.graphicsDevice.maxPixelRatio=1;break;case"baja":this.app.graphicsDevice.maxPixelRatio=.5}}this.sumFps=0,this.tiempo=0,this.cantFps=0}};pc.extend(pc,function(){var e=function(e){var o={aPosition:pc.SEMANTIC_POSITION},r=["attribute vec2 aPosition;","","void main(void)","{","    gl_Position = vec4(aPosition, 0.0, 1.0);","}"].join("\n"),a=["precision "+e.precision+" float;","","uniform sampler2D uColorBuffer;","uniform vec2 uResolution;","","#define FXAA_REDUCE_MIN   (1.0/128.0)","#define FXAA_REDUCE_MUL   (1.0/8.0)","#define FXAA_SPAN_MAX     8.0","","void main()","{","    vec3 rgbNW = texture2D( uColorBuffer, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * uResolution ).xyz;","    vec3 rgbNE = texture2D( uColorBuffer, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * uResolution ).xyz;","    vec3 rgbSW = texture2D( uColorBuffer, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * uResolution ).xyz;","    vec3 rgbSE = texture2D( uColorBuffer, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * uResolution ).xyz;","    vec4 rgbaM  = texture2D( uColorBuffer,  gl_FragCoord.xy  * uResolution );","    vec3 rgbM  = rgbaM.xyz;","    float opacity  = rgbaM.w;","","    vec3 luma = vec3( 0.299, 0.587, 0.114 );","","    float lumaNW = dot( rgbNW, luma );","    float lumaNE = dot( rgbNE, luma );","    float lumaSW = dot( rgbSW, luma );","    float lumaSE = dot( rgbSE, luma );","    float lumaM  = dot( rgbM,  luma );","    float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );","    float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );","","    vec2 dir;","    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));","    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));","","    float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );","","    float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );","    dir = min( vec2( FXAA_SPAN_MAX, FXAA_SPAN_MAX), max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX), dir * rcpDirMin)) * uResolution;","","    vec3 rgbA = 0.5 * (","        texture2D( uColorBuffer, gl_FragCoord.xy  * uResolution + dir * ( 1.0 / 3.0 - 0.5 ) ).xyz +","        texture2D( uColorBuffer, gl_FragCoord.xy  * uResolution + dir * ( 2.0 / 3.0 - 0.5 ) ).xyz );","","    vec3 rgbB = rgbA * 0.5 + 0.25 * (","        texture2D( uColorBuffer, gl_FragCoord.xy  * uResolution + dir * -0.5 ).xyz +","        texture2D( uColorBuffer, gl_FragCoord.xy  * uResolution + dir * 0.5 ).xyz );","","    float lumaB = dot( rgbB, luma );","","    if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) )","    {","        gl_FragColor = vec4( rgbA, opacity );","    }","    else","    {","        gl_FragColor = vec4( rgbB, opacity );","    }","}"].join("\n");this.fxaaShader=new pc.Shader(e,{attributes:o,vshader:r,fshader:a}),this.resolution=new Float32Array(2)};return(e=pc.inherits(e,pc.PostEffect)).prototype=pc.extend(e.prototype,{render:function(e,o,r){var a=this.device,t=a.scope;this.resolution[0]=1/e.width,this.resolution[1]=1/e.height,t.resolve("uResolution").setValue(this.resolution),t.resolve("uColorBuffer").setValue(e.colorBuffer),pc.drawFullscreenQuad(a,o,this.vertexBuffer,this.fxaaShader,r)}}),{FxaaEffect:e}}());var Fxaa=pc.createScript("fxaa");Fxaa.prototype.initialize=function(){this.effect=new pc.FxaaEffect(this.app.graphicsDevice);var e=this.entity.camera.postEffects;e.addEffect(this.effect),this.on("state",function(o){o?e.addEffect(this.effect):e.removeEffect(this.effect)}),this.on("destroy",function(){e.removeEffect(this.effect)})};